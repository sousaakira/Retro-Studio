"use strict";const ne=require("electron"),z=require("path"),U=require("fs"),vi=require("assert"),co=require("events"),Zr=require("util"),Ko=require("https"),uo=require("stream"),fo=require("buffer"),Jo=require("os"),Qo=require("node-pty"),ui=require("child_process");var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oe={},Pr={exports:{}},rt,Oi;function Hr(){if(Oi)return rt;Oi=1;const e="2.0.0",i=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,f=i-6;return rt={MAX_LENGTH:i,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:f,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},rt}var tt,Ti;function Vr(){return Ti||(Ti=1,tt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...i)=>console.error("SEMVER",...i):()=>{}),tt}var Ii;function kr(){return Ii||(Ii=1,(function(e,i){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:f}=Hr(),t=Vr();i=e.exports={};const a=i.re=[],l=i.safeRe=[],s=i.src=[],d=i.t={};let v=0;const h="[a-zA-Z0-9-]",o=[["\\s",1],["\\d",f],[h,n]],p=_=>{for(const[w,c]of o)_=_.split(`${w}*`).join(`${w}{0,${c}}`).split(`${w}+`).join(`${w}{1,${c}}`);return _},y=(_,w,c)=>{const m=p(w),S=v++;t(_,S,w),d[_]=S,s[S]=w,a[S]=new RegExp(w,c?"g":void 0),l[S]=new RegExp(m,c?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),y("MAINVERSION",`(${s[d.NUMERICIDENTIFIER]})\\.(${s[d.NUMERICIDENTIFIER]})\\.(${s[d.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${s[d.NUMERICIDENTIFIERLOOSE]})\\.(${s[d.NUMERICIDENTIFIERLOOSE]})\\.(${s[d.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${s[d.NUMERICIDENTIFIER]}|${s[d.NONNUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${s[d.NUMERICIDENTIFIERLOOSE]}|${s[d.NONNUMERICIDENTIFIER]})`),y("PRERELEASE",`(?:-(${s[d.PRERELEASEIDENTIFIER]}(?:\\.${s[d.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${s[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[d.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${h}+`),y("BUILD",`(?:\\+(${s[d.BUILDIDENTIFIER]}(?:\\.${s[d.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${s[d.MAINVERSION]}${s[d.PRERELEASE]}?${s[d.BUILD]}?`),y("FULL",`^${s[d.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${s[d.MAINVERSIONLOOSE]}${s[d.PRERELEASELOOSE]}?${s[d.BUILD]}?`),y("LOOSE",`^${s[d.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${s[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${s[d.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${s[d.XRANGEIDENTIFIER]})(?:\\.(${s[d.XRANGEIDENTIFIER]})(?:\\.(${s[d.XRANGEIDENTIFIER]})(?:${s[d.PRERELEASE]})?${s[d.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${s[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[d.XRANGEIDENTIFIERLOOSE]})(?:${s[d.PRERELEASELOOSE]})?${s[d.BUILD]}?)?)?`),y("XRANGE",`^${s[d.GTLT]}\\s*${s[d.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${s[d.GTLT]}\\s*${s[d.XRANGEPLAINLOOSE]}$`),y("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),y("COERCERTL",s[d.COERCE],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${s[d.LONETILDE]}\\s+`,!0),i.tildeTrimReplace="$1~",y("TILDE",`^${s[d.LONETILDE]}${s[d.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${s[d.LONETILDE]}${s[d.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${s[d.LONECARET]}\\s+`,!0),i.caretTrimReplace="$1^",y("CARET",`^${s[d.LONECARET]}${s[d.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${s[d.LONECARET]}${s[d.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${s[d.GTLT]}\\s*(${s[d.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${s[d.GTLT]}\\s*(${s[d.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${s[d.GTLT]}\\s*(${s[d.LOOSEPLAIN]}|${s[d.XRANGEPLAIN]})`,!0),i.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${s[d.XRANGEPLAIN]})\\s+-\\s+(${s[d.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${s[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[d.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Pr,Pr.exports)),Pr.exports}var nt,Pi;function mi(){if(Pi)return nt;Pi=1;const e=Object.freeze({loose:!0}),i=Object.freeze({});return nt=n=>n?typeof n!="object"?e:n:i,nt}var it,Di;function ho(){if(Di)return it;Di=1;const e=/^[0-9]+$/,i=(n,f)=>{const t=e.test(n),a=e.test(f);return t&&a&&(n=+n,f=+f),n===f?0:t&&!a?-1:a&&!t?1:n<f?-1:1};return it={compareIdentifiers:i,rcompareIdentifiers:(n,f)=>i(f,n)},it}var at,Ni;function Ge(){if(Ni)return at;Ni=1;const e=Vr(),{MAX_LENGTH:i,MAX_SAFE_INTEGER:r}=Hr(),{safeRe:n,t:f}=kr(),t=mi(),{compareIdentifiers:a}=ho();class l{constructor(d,v){if(v=t(v),d instanceof l){if(d.loose===!!v.loose&&d.includePrerelease===!!v.includePrerelease)return d;d=d.version}else if(typeof d!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof d}".`);if(d.length>i)throw new TypeError(`version is longer than ${i} characters`);e("SemVer",d,v),this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease;const h=d.trim().match(v.loose?n[f.LOOSE]:n[f.FULL]);if(!h)throw new TypeError(`Invalid Version: ${d}`);if(this.raw=d,this.major=+h[1],this.minor=+h[2],this.patch=+h[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");h[4]?this.prerelease=h[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const p=+o;if(p>=0&&p<r)return p}return o}):this.prerelease=[],this.build=h[5]?h[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(d){if(e("SemVer.compare",this.version,this.options,d),!(d instanceof l)){if(typeof d=="string"&&d===this.version)return 0;d=new l(d,this.options)}return d.version===this.version?0:this.compareMain(d)||this.comparePre(d)}compareMain(d){return d instanceof l||(d=new l(d,this.options)),a(this.major,d.major)||a(this.minor,d.minor)||a(this.patch,d.patch)}comparePre(d){if(d instanceof l||(d=new l(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;let v=0;do{const h=this.prerelease[v],o=d.prerelease[v];if(e("prerelease compare",v,h,o),h===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(h===void 0)return-1;if(h===o)continue;return a(h,o)}while(++v)}compareBuild(d){d instanceof l||(d=new l(d,this.options));let v=0;do{const h=this.build[v],o=d.build[v];if(e("prerelease compare",v,h,o),h===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(h===void 0)return-1;if(h===o)continue;return a(h,o)}while(++v)}inc(d,v,h){switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v,h);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v,h);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v,h),this.inc("pre",v,h);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",v,h),this.inc("pre",v,h);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const o=Number(h)?1:0;if(!v&&h===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(v===this.prerelease.join(".")&&h===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(v){let p=[v,o];h===!1&&(p=[v]),a(this.prerelease[0],v)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${d}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return at=l,at}var st,ji;function br(){if(ji)return st;ji=1;const e=Ge();return st=(r,n,f=!1)=>{if(r instanceof e)return r;try{return new e(r,n)}catch(t){if(!f)return null;throw t}},st}var ot,Li;function el(){if(Li)return ot;Li=1;const e=br();return ot=(r,n)=>{const f=e(r,n);return f?f.version:null},ot}var lt,Mi;function rl(){if(Mi)return lt;Mi=1;const e=br();return lt=(r,n)=>{const f=e(r.trim().replace(/^[=v]+/,""),n);return f?f.version:null},lt}var ct,Fi;function tl(){if(Fi)return ct;Fi=1;const e=Ge();return ct=(r,n,f,t,a)=>{typeof f=="string"&&(a=t,t=f,f=void 0);try{return new e(r instanceof e?r.version:r,f).inc(n,t,a).version}catch{return null}},ct}var ut,qi;function nl(){if(qi)return ut;qi=1;const e=br();return ut=(r,n)=>{const f=e(r,null,!0),t=e(n,null,!0),a=f.compare(t);if(a===0)return null;const l=a>0,s=l?f:t,d=l?t:f,v=!!s.prerelease.length;if(!!d.prerelease.length&&!v)return!d.patch&&!d.minor?"major":s.patch?"patch":s.minor?"minor":"major";const o=v?"pre":"";return f.major!==t.major?o+"major":f.minor!==t.minor?o+"minor":f.patch!==t.patch?o+"patch":"prerelease"},ut}var ft,Bi;function il(){if(Bi)return ft;Bi=1;const e=Ge();return ft=(r,n)=>new e(r,n).major,ft}var ht,$i;function al(){if($i)return ht;$i=1;const e=Ge();return ht=(r,n)=>new e(r,n).minor,ht}var dt,zi;function sl(){if(zi)return dt;zi=1;const e=Ge();return dt=(r,n)=>new e(r,n).patch,dt}var pt,Ui;function ol(){if(Ui)return pt;Ui=1;const e=br();return pt=(r,n)=>{const f=e(r,n);return f&&f.prerelease.length?f.prerelease:null},pt}var vt,Wi;function er(){if(Wi)return vt;Wi=1;const e=Ge();return vt=(r,n,f)=>new e(r,f).compare(new e(n,f)),vt}var mt,Gi;function ll(){if(Gi)return mt;Gi=1;const e=er();return mt=(r,n,f)=>e(n,r,f),mt}var gt,Zi;function cl(){if(Zi)return gt;Zi=1;const e=er();return gt=(r,n)=>e(r,n,!0),gt}var yt,Hi;function gi(){if(Hi)return yt;Hi=1;const e=Ge();return yt=(r,n,f)=>{const t=new e(r,f),a=new e(n,f);return t.compare(a)||t.compareBuild(a)},yt}var _t,Vi;function ul(){if(Vi)return _t;Vi=1;const e=gi();return _t=(r,n)=>r.sort((f,t)=>e(f,t,n)),_t}var wt,Xi;function fl(){if(Xi)return wt;Xi=1;const e=gi();return wt=(r,n)=>r.sort((f,t)=>e(t,f,n)),wt}var bt,Yi;function Xr(){if(Yi)return bt;Yi=1;const e=er();return bt=(r,n,f)=>e(r,n,f)>0,bt}var Et,Ki;function yi(){if(Ki)return Et;Ki=1;const e=er();return Et=(r,n,f)=>e(r,n,f)<0,Et}var St,Ji;function po(){if(Ji)return St;Ji=1;const e=er();return St=(r,n,f)=>e(r,n,f)===0,St}var xt,Qi;function vo(){if(Qi)return xt;Qi=1;const e=er();return xt=(r,n,f)=>e(r,n,f)!==0,xt}var Rt,ea;function _i(){if(ea)return Rt;ea=1;const e=er();return Rt=(r,n,f)=>e(r,n,f)>=0,Rt}var kt,ra;function wi(){if(ra)return kt;ra=1;const e=er();return kt=(r,n,f)=>e(r,n,f)<=0,kt}var Ct,ta;function mo(){if(ta)return Ct;ta=1;const e=po(),i=vo(),r=Xr(),n=_i(),f=yi(),t=wi();return Ct=(l,s,d,v)=>{switch(s){case"===":return typeof l=="object"&&(l=l.version),typeof d=="object"&&(d=d.version),l===d;case"!==":return typeof l=="object"&&(l=l.version),typeof d=="object"&&(d=d.version),l!==d;case"":case"=":case"==":return e(l,d,v);case"!=":return i(l,d,v);case">":return r(l,d,v);case">=":return n(l,d,v);case"<":return f(l,d,v);case"<=":return t(l,d,v);default:throw new TypeError(`Invalid operator: ${s}`)}},Ct}var At,na;function hl(){if(na)return At;na=1;const e=Ge(),i=br(),{safeRe:r,t:n}=kr();return At=(t,a)=>{if(t instanceof e)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;a=a||{};let l=null;if(!a.rtl)l=t.match(r[n.COERCE]);else{let s;for(;(s=r[n.COERCERTL].exec(t))&&(!l||l.index+l[0].length!==t.length);)(!l||s.index+s[0].length!==l.index+l[0].length)&&(l=s),r[n.COERCERTL].lastIndex=s.index+s[1].length+s[2].length;r[n.COERCERTL].lastIndex=-1}return l===null?null:i(`${l[2]}.${l[3]||"0"}.${l[4]||"0"}`,a)},At}var Ot,ia;function dl(){return ia||(ia=1,Ot=function(e){e.prototype[Symbol.iterator]=function*(){for(let i=this.head;i;i=i.next)yield i.value}}),Ot}var Tt,aa;function pl(){if(aa)return Tt;aa=1,Tt=e,e.Node=f,e.create=e;function e(t){var a=this;if(a instanceof e||(a=new e),a.tail=null,a.head=null,a.length=0,t&&typeof t.forEach=="function")t.forEach(function(d){a.push(d)});else if(arguments.length>0)for(var l=0,s=arguments.length;l<s;l++)a.push(arguments[l]);return a}e.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var a=t.next,l=t.prev;return a&&(a.prev=l),l&&(l.next=a),t===this.head&&(this.head=a),t===this.tail&&(this.tail=l),t.list.length--,t.next=null,t.prev=null,t.list=null,a},e.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var a=this.head;t.list=this,t.next=a,a&&(a.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},e.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var a=this.tail;t.list=this,t.prev=a,a&&(a.next=t),this.tail=t,this.head||(this.head=t),this.length++}},e.prototype.push=function(){for(var t=0,a=arguments.length;t<a;t++)r(this,arguments[t]);return this.length},e.prototype.unshift=function(){for(var t=0,a=arguments.length;t<a;t++)n(this,arguments[t]);return this.length},e.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},e.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},e.prototype.forEach=function(t,a){a=a||this;for(var l=this.head,s=0;l!==null;s++)t.call(a,l.value,s,this),l=l.next},e.prototype.forEachReverse=function(t,a){a=a||this;for(var l=this.tail,s=this.length-1;l!==null;s--)t.call(a,l.value,s,this),l=l.prev},e.prototype.get=function(t){for(var a=0,l=this.head;l!==null&&a<t;a++)l=l.next;if(a===t&&l!==null)return l.value},e.prototype.getReverse=function(t){for(var a=0,l=this.tail;l!==null&&a<t;a++)l=l.prev;if(a===t&&l!==null)return l.value},e.prototype.map=function(t,a){a=a||this;for(var l=new e,s=this.head;s!==null;)l.push(t.call(a,s.value,this)),s=s.next;return l},e.prototype.mapReverse=function(t,a){a=a||this;for(var l=new e,s=this.tail;s!==null;)l.push(t.call(a,s.value,this)),s=s.prev;return l},e.prototype.reduce=function(t,a){var l,s=this.head;if(arguments.length>1)l=a;else if(this.head)s=this.head.next,l=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=0;s!==null;d++)l=t(l,s.value,d),s=s.next;return l},e.prototype.reduceReverse=function(t,a){var l,s=this.tail;if(arguments.length>1)l=a;else if(this.tail)s=this.tail.prev,l=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;s!==null;d--)l=t(l,s.value,d),s=s.prev;return l},e.prototype.toArray=function(){for(var t=new Array(this.length),a=0,l=this.head;l!==null;a++)t[a]=l.value,l=l.next;return t},e.prototype.toArrayReverse=function(){for(var t=new Array(this.length),a=0,l=this.tail;l!==null;a++)t[a]=l.value,l=l.prev;return t},e.prototype.slice=function(t,a){a=a||this.length,a<0&&(a+=this.length),t=t||0,t<0&&(t+=this.length);var l=new e;if(a<t||a<0)return l;t<0&&(t=0),a>this.length&&(a=this.length);for(var s=0,d=this.head;d!==null&&s<t;s++)d=d.next;for(;d!==null&&s<a;s++,d=d.next)l.push(d.value);return l},e.prototype.sliceReverse=function(t,a){a=a||this.length,a<0&&(a+=this.length),t=t||0,t<0&&(t+=this.length);var l=new e;if(a<t||a<0)return l;t<0&&(t=0),a>this.length&&(a=this.length);for(var s=this.length,d=this.tail;d!==null&&s>a;s--)d=d.prev;for(;d!==null&&s>t;s--,d=d.prev)l.push(d.value);return l},e.prototype.splice=function(t,a,...l){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var s=0,d=this.head;d!==null&&s<t;s++)d=d.next;for(var v=[],s=0;d&&s<a;s++)v.push(d.value),d=this.removeNode(d);d===null&&(d=this.tail),d!==this.head&&d!==this.tail&&(d=d.prev);for(var s=0;s<l.length;s++)d=i(this,d,l[s]);return v},e.prototype.reverse=function(){for(var t=this.head,a=this.tail,l=t;l!==null;l=l.prev){var s=l.prev;l.prev=l.next,l.next=s}return this.head=a,this.tail=t,this};function i(t,a,l){var s=a===t.head?new f(l,null,a,t):new f(l,a,a.next,t);return s.next===null&&(t.tail=s),s.prev===null&&(t.head=s),t.length++,s}function r(t,a){t.tail=new f(a,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function n(t,a){t.head=new f(a,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function f(t,a,l,s){if(!(this instanceof f))return new f(t,a,l,s);this.list=s,this.value=t,a?(a.next=this,this.prev=a):this.prev=null,l?(l.prev=this,this.next=l):this.next=null}try{dl()(e)}catch{}return Tt}var It,sa;function vl(){if(sa)return It;sa=1;const e=pl(),i=Symbol("max"),r=Symbol("length"),n=Symbol("lengthCalculator"),f=Symbol("allowStale"),t=Symbol("maxAge"),a=Symbol("dispose"),l=Symbol("noDisposeOnSet"),s=Symbol("lruList"),d=Symbol("cache"),v=Symbol("updateAgeOnGet"),h=()=>1;class o{constructor(g){if(typeof g=="number"&&(g={max:g}),g||(g={}),g.max&&(typeof g.max!="number"||g.max<0))throw new TypeError("max must be a non-negative number");this[i]=g.max||1/0;const b=g.length||h;if(this[n]=typeof b!="function"?h:b,this[f]=g.stale||!1,g.maxAge&&typeof g.maxAge!="number")throw new TypeError("maxAge must be a number");this[t]=g.maxAge||0,this[a]=g.dispose,this[l]=g.noDisposeOnSet||!1,this[v]=g.updateAgeOnGet||!1,this.reset()}set max(g){if(typeof g!="number"||g<0)throw new TypeError("max must be a non-negative number");this[i]=g||1/0,_(this)}get max(){return this[i]}set allowStale(g){this[f]=!!g}get allowStale(){return this[f]}set maxAge(g){if(typeof g!="number")throw new TypeError("maxAge must be a non-negative number");this[t]=g,_(this)}get maxAge(){return this[t]}set lengthCalculator(g){typeof g!="function"&&(g=h),g!==this[n]&&(this[n]=g,this[r]=0,this[s].forEach(b=>{b.length=this[n](b.value,b.key),this[r]+=b.length})),_(this)}get lengthCalculator(){return this[n]}get length(){return this[r]}get itemCount(){return this[s].length}rforEach(g,b){b=b||this;for(let O=this[s].tail;O!==null;){const k=O.prev;m(this,g,O,b),O=k}}forEach(g,b){b=b||this;for(let O=this[s].head;O!==null;){const k=O.next;m(this,g,O,b),O=k}}keys(){return this[s].toArray().map(g=>g.key)}values(){return this[s].toArray().map(g=>g.value)}reset(){this[a]&&this[s]&&this[s].length&&this[s].forEach(g=>this[a](g.key,g.value)),this[d]=new Map,this[s]=new e,this[r]=0}dump(){return this[s].map(g=>y(this,g)?!1:{k:g.key,v:g.value,e:g.now+(g.maxAge||0)}).toArray().filter(g=>g)}dumpLru(){return this[s]}set(g,b,O){if(O=O||this[t],O&&typeof O!="number")throw new TypeError("maxAge must be a number");const k=O?Date.now():0,D=this[n](b,g);if(this[d].has(g)){if(D>this[i])return w(this,this[d].get(g)),!1;const q=this[d].get(g).value;return this[a]&&(this[l]||this[a](g,q.value)),q.now=k,q.maxAge=O,q.value=b,this[r]+=D-q.length,q.length=D,this.get(g),_(this),!0}const I=new c(g,b,D,k,O);return I.length>this[i]?(this[a]&&this[a](g,b),!1):(this[r]+=I.length,this[s].unshift(I),this[d].set(g,this[s].head),_(this),!0)}has(g){if(!this[d].has(g))return!1;const b=this[d].get(g).value;return!y(this,b)}get(g){return p(this,g,!0)}peek(g){return p(this,g,!1)}pop(){const g=this[s].tail;return g?(w(this,g),g.value):null}del(g){w(this,this[d].get(g))}load(g){this.reset();const b=Date.now();for(let O=g.length-1;O>=0;O--){const k=g[O],D=k.e||0;if(D===0)this.set(k.k,k.v);else{const I=D-b;I>0&&this.set(k.k,k.v,I)}}}prune(){this[d].forEach((g,b)=>p(this,b,!1))}}const p=(S,g,b)=>{const O=S[d].get(g);if(O){const k=O.value;if(y(S,k)){if(w(S,O),!S[f])return}else b&&(S[v]&&(O.value.now=Date.now()),S[s].unshiftNode(O));return k.value}},y=(S,g)=>{if(!g||!g.maxAge&&!S[t])return!1;const b=Date.now()-g.now;return g.maxAge?b>g.maxAge:S[t]&&b>S[t]},_=S=>{if(S[r]>S[i])for(let g=S[s].tail;S[r]>S[i]&&g!==null;){const b=g.prev;w(S,g),g=b}},w=(S,g)=>{if(g){const b=g.value;S[a]&&S[a](b.key,b.value),S[r]-=b.length,S[d].delete(b.key),S[s].removeNode(g)}};class c{constructor(g,b,O,k,D){this.key=g,this.value=b,this.length=O,this.now=k,this.maxAge=D||0}}const m=(S,g,b,O)=>{let k=b.value;y(S,k)&&(w(S,b),S[f]||(k=void 0)),k&&g.call(O,k.value,k.key,S)};return It=o,It}var Pt,oa;function rr(){if(oa)return Pt;oa=1;class e{constructor(M,X){if(X=n(X),M instanceof e)return M.loose===!!X.loose&&M.includePrerelease===!!X.includePrerelease?M:new e(M.raw,X);if(M instanceof f)return this.raw=M.value,this.set=[[M]],this.format(),this;if(this.options=X,this.loose=!!X.loose,this.includePrerelease=!!X.includePrerelease,this.raw=M.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(ee=>this.parseRange(ee.trim())).filter(ee=>ee.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const ee=this.set[0];if(this.set=this.set.filter(C=>!y(C[0])),this.set.length===0)this.set=[ee];else if(this.set.length>1){for(const C of this.set)if(C.length===1&&_(C[0])){this.set=[C];break}}}this.format()}format(){return this.range=this.set.map(M=>M.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(M){const ee=((this.options.includePrerelease&&o)|(this.options.loose&&p))+":"+M,C=r.get(ee);if(C)return C;const T=this.options.loose,B=T?l[s.HYPHENRANGELOOSE]:l[s.HYPHENRANGE];M=M.replace(B,q(this.options.includePrerelease)),t("hyphen replace",M),M=M.replace(l[s.COMPARATORTRIM],d),t("comparator trim",M),M=M.replace(l[s.TILDETRIM],v),t("tilde trim",M),M=M.replace(l[s.CARETTRIM],h),t("caret trim",M);let Y=M.split(" ").map(fe=>c(fe,this.options)).join(" ").split(/\s+/).map(fe=>L(fe,this.options));T&&(Y=Y.filter(fe=>(t("loose invalid filter",fe,this.options),!!fe.match(l[s.COMPARATORLOOSE])))),t("range list",Y);const K=new Map,oe=Y.map(fe=>new f(fe,this.options));for(const fe of oe){if(y(fe))return[fe];K.set(fe.value,fe)}K.size>1&&K.has("")&&K.delete("");const ce=[...K.values()];return r.set(ee,ce),ce}intersects(M,X){if(!(M instanceof e))throw new TypeError("a Range is required");return this.set.some(ee=>w(ee,X)&&M.set.some(C=>w(C,X)&&ee.every(T=>C.every(B=>T.intersects(B,X)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new a(M,this.options)}catch{return!1}for(let X=0;X<this.set.length;X++)if($(this.set[X],M,this.options))return!0;return!1}}Pt=e;const i=vl(),r=new i({max:1e3}),n=mi(),f=Yr(),t=Vr(),a=Ge(),{safeRe:l,t:s,comparatorTrimReplace:d,tildeTrimReplace:v,caretTrimReplace:h}=kr(),{FLAG_INCLUDE_PRERELEASE:o,FLAG_LOOSE:p}=Hr(),y=N=>N.value==="<0.0.0-0",_=N=>N.value==="",w=(N,M)=>{let X=!0;const ee=N.slice();let C=ee.pop();for(;X&&ee.length;)X=ee.every(T=>C.intersects(T,M)),C=ee.pop();return X},c=(N,M)=>(t("comp",N,M),N=b(N,M),t("caret",N),N=S(N,M),t("tildes",N),N=k(N,M),t("xrange",N),N=I(N,M),t("stars",N),N),m=N=>!N||N.toLowerCase()==="x"||N==="*",S=(N,M)=>N.trim().split(/\s+/).map(X=>g(X,M)).join(" "),g=(N,M)=>{const X=M.loose?l[s.TILDELOOSE]:l[s.TILDE];return N.replace(X,(ee,C,T,B,Y)=>{t("tilde",N,ee,C,T,B,Y);let K;return m(C)?K="":m(T)?K=`>=${C}.0.0 <${+C+1}.0.0-0`:m(B)?K=`>=${C}.${T}.0 <${C}.${+T+1}.0-0`:Y?(t("replaceTilde pr",Y),K=`>=${C}.${T}.${B}-${Y} <${C}.${+T+1}.0-0`):K=`>=${C}.${T}.${B} <${C}.${+T+1}.0-0`,t("tilde return",K),K})},b=(N,M)=>N.trim().split(/\s+/).map(X=>O(X,M)).join(" "),O=(N,M)=>{t("caret",N,M);const X=M.loose?l[s.CARETLOOSE]:l[s.CARET],ee=M.includePrerelease?"-0":"";return N.replace(X,(C,T,B,Y,K)=>{t("caret",N,C,T,B,Y,K);let oe;return m(T)?oe="":m(B)?oe=`>=${T}.0.0${ee} <${+T+1}.0.0-0`:m(Y)?T==="0"?oe=`>=${T}.${B}.0${ee} <${T}.${+B+1}.0-0`:oe=`>=${T}.${B}.0${ee} <${+T+1}.0.0-0`:K?(t("replaceCaret pr",K),T==="0"?B==="0"?oe=`>=${T}.${B}.${Y}-${K} <${T}.${B}.${+Y+1}-0`:oe=`>=${T}.${B}.${Y}-${K} <${T}.${+B+1}.0-0`:oe=`>=${T}.${B}.${Y}-${K} <${+T+1}.0.0-0`):(t("no pr"),T==="0"?B==="0"?oe=`>=${T}.${B}.${Y}${ee} <${T}.${B}.${+Y+1}-0`:oe=`>=${T}.${B}.${Y}${ee} <${T}.${+B+1}.0-0`:oe=`>=${T}.${B}.${Y} <${+T+1}.0.0-0`),t("caret return",oe),oe})},k=(N,M)=>(t("replaceXRanges",N,M),N.split(/\s+/).map(X=>D(X,M)).join(" ")),D=(N,M)=>{N=N.trim();const X=M.loose?l[s.XRANGELOOSE]:l[s.XRANGE];return N.replace(X,(ee,C,T,B,Y,K)=>{t("xRange",N,ee,C,T,B,Y,K);const oe=m(T),ce=oe||m(B),fe=ce||m(Y),Ee=fe;return C==="="&&Ee&&(C=""),K=M.includePrerelease?"-0":"",oe?C===">"||C==="<"?ee="<0.0.0-0":ee="*":C&&Ee?(ce&&(B=0),Y=0,C===">"?(C=">=",ce?(T=+T+1,B=0,Y=0):(B=+B+1,Y=0)):C==="<="&&(C="<",ce?T=+T+1:B=+B+1),C==="<"&&(K="-0"),ee=`${C+T}.${B}.${Y}${K}`):ce?ee=`>=${T}.0.0${K} <${+T+1}.0.0-0`:fe&&(ee=`>=${T}.${B}.0${K} <${T}.${+B+1}.0-0`),t("xRange return",ee),ee})},I=(N,M)=>(t("replaceStars",N,M),N.trim().replace(l[s.STAR],"")),L=(N,M)=>(t("replaceGTE0",N,M),N.trim().replace(l[M.includePrerelease?s.GTE0PRE:s.GTE0],"")),q=N=>(M,X,ee,C,T,B,Y,K,oe,ce,fe,Ee,pe)=>(m(ee)?X="":m(C)?X=`>=${ee}.0.0${N?"-0":""}`:m(T)?X=`>=${ee}.${C}.0${N?"-0":""}`:B?X=`>=${X}`:X=`>=${X}${N?"-0":""}`,m(oe)?K="":m(ce)?K=`<${+oe+1}.0.0-0`:m(fe)?K=`<${oe}.${+ce+1}.0-0`:Ee?K=`<=${oe}.${ce}.${fe}-${Ee}`:N?K=`<${oe}.${ce}.${+fe+1}-0`:K=`<=${K}`,`${X} ${K}`.trim()),$=(N,M,X)=>{for(let ee=0;ee<N.length;ee++)if(!N[ee].test(M))return!1;if(M.prerelease.length&&!X.includePrerelease){for(let ee=0;ee<N.length;ee++)if(t(N[ee].semver),N[ee].semver!==f.ANY&&N[ee].semver.prerelease.length>0){const C=N[ee].semver;if(C.major===M.major&&C.minor===M.minor&&C.patch===M.patch)return!0}return!1}return!0};return Pt}var Dt,la;function Yr(){if(la)return Dt;la=1;const e=Symbol("SemVer ANY");class i{static get ANY(){return e}constructor(v,h){if(h=r(h),v instanceof i){if(v.loose===!!h.loose)return v;v=v.value}v=v.trim().split(/\s+/).join(" "),a("comparator",v,h),this.options=h,this.loose=!!h.loose,this.parse(v),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(v){const h=this.options.loose?n[f.COMPARATORLOOSE]:n[f.COMPARATOR],o=v.match(h);if(!o)throw new TypeError(`Invalid comparator: ${v}`);this.operator=o[1]!==void 0?o[1]:"",this.operator==="="&&(this.operator=""),o[2]?this.semver=new l(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(v){if(a("Comparator.test",v,this.options.loose),this.semver===e||v===e)return!0;if(typeof v=="string")try{v=new l(v,this.options)}catch{return!1}return t(v,this.operator,this.semver,this.options)}intersects(v,h){if(!(v instanceof i))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new s(v.value,h).test(this.value):v.operator===""?v.value===""?!0:new s(this.value,h).test(v.semver):(h=r(h),h.includePrerelease&&(this.value==="<0.0.0-0"||v.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||v.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&v.operator.startsWith(">")||this.operator.startsWith("<")&&v.operator.startsWith("<")||this.semver.version===v.semver.version&&this.operator.includes("=")&&v.operator.includes("=")||t(this.semver,"<",v.semver,h)&&this.operator.startsWith(">")&&v.operator.startsWith("<")||t(this.semver,">",v.semver,h)&&this.operator.startsWith("<")&&v.operator.startsWith(">")))}}Dt=i;const r=mi(),{safeRe:n,t:f}=kr(),t=mo(),a=Vr(),l=Ge(),s=rr();return Dt}var Nt,ca;function Kr(){if(ca)return Nt;ca=1;const e=rr();return Nt=(r,n,f)=>{try{n=new e(n,f)}catch{return!1}return n.test(r)},Nt}var jt,ua;function ml(){if(ua)return jt;ua=1;const e=rr();return jt=(r,n)=>new e(r,n).set.map(f=>f.map(t=>t.value).join(" ").trim().split(" ")),jt}var Lt,fa;function gl(){if(fa)return Lt;fa=1;const e=Ge(),i=rr();return Lt=(n,f,t)=>{let a=null,l=null,s=null;try{s=new i(f,t)}catch{return null}return n.forEach(d=>{s.test(d)&&(!a||l.compare(d)===-1)&&(a=d,l=new e(a,t))}),a},Lt}var Mt,ha;function yl(){if(ha)return Mt;ha=1;const e=Ge(),i=rr();return Mt=(n,f,t)=>{let a=null,l=null,s=null;try{s=new i(f,t)}catch{return null}return n.forEach(d=>{s.test(d)&&(!a||l.compare(d)===1)&&(a=d,l=new e(a,t))}),a},Mt}var Ft,da;function _l(){if(da)return Ft;da=1;const e=Ge(),i=rr(),r=Xr();return Ft=(f,t)=>{f=new i(f,t);let a=new e("0.0.0");if(f.test(a)||(a=new e("0.0.0-0"),f.test(a)))return a;a=null;for(let l=0;l<f.set.length;++l){const s=f.set[l];let d=null;s.forEach(v=>{const h=new e(v.semver.version);switch(v.operator){case">":h.prerelease.length===0?h.patch++:h.prerelease.push(0),h.raw=h.format();case"":case">=":(!d||r(h,d))&&(d=h);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${v.operator}`)}}),d&&(!a||r(a,d))&&(a=d)}return a&&f.test(a)?a:null},Ft}var qt,pa;function wl(){if(pa)return qt;pa=1;const e=rr();return qt=(r,n)=>{try{return new e(r,n).range||"*"}catch{return null}},qt}var Bt,va;function bi(){if(va)return Bt;va=1;const e=Ge(),i=Yr(),{ANY:r}=i,n=rr(),f=Kr(),t=Xr(),a=yi(),l=wi(),s=_i();return Bt=(v,h,o,p)=>{v=new e(v,p),h=new n(h,p);let y,_,w,c,m;switch(o){case">":y=t,_=l,w=a,c=">",m=">=";break;case"<":y=a,_=s,w=t,c="<",m="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(f(v,h,p))return!1;for(let S=0;S<h.set.length;++S){const g=h.set[S];let b=null,O=null;if(g.forEach(k=>{k.semver===r&&(k=new i(">=0.0.0")),b=b||k,O=O||k,y(k.semver,b.semver,p)?b=k:w(k.semver,O.semver,p)&&(O=k)}),b.operator===c||b.operator===m||(!O.operator||O.operator===c)&&_(v,O.semver))return!1;if(O.operator===m&&w(v,O.semver))return!1}return!0},Bt}var $t,ma;function bl(){if(ma)return $t;ma=1;const e=bi();return $t=(r,n,f)=>e(r,n,">",f),$t}var zt,ga;function El(){if(ga)return zt;ga=1;const e=bi();return zt=(r,n,f)=>e(r,n,"<",f),zt}var Ut,ya;function Sl(){if(ya)return Ut;ya=1;const e=rr();return Ut=(r,n,f)=>(r=new e(r,f),n=new e(n,f),r.intersects(n,f)),Ut}var Wt,_a;function xl(){if(_a)return Wt;_a=1;const e=Kr(),i=er();return Wt=(r,n,f)=>{const t=[];let a=null,l=null;const s=r.sort((o,p)=>i(o,p,f));for(const o of s)e(o,n,f)?(l=o,a||(a=o)):(l&&t.push([a,l]),l=null,a=null);a&&t.push([a,null]);const d=[];for(const[o,p]of t)o===p?d.push(o):!p&&o===s[0]?d.push("*"):p?o===s[0]?d.push(`<=${p}`):d.push(`${o} - ${p}`):d.push(`>=${o}`);const v=d.join(" || "),h=typeof n.raw=="string"?n.raw:String(n);return v.length<h.length?v:n},Wt}var Gt,wa;function Rl(){if(wa)return Gt;wa=1;const e=rr(),i=Yr(),{ANY:r}=i,n=Kr(),f=er(),t=(h,o,p={})=>{if(h===o)return!0;h=new e(h,p),o=new e(o,p);let y=!1;e:for(const _ of h.set){for(const w of o.set){const c=s(_,w,p);if(y=y||c!==null,c)continue e}if(y)return!1}return!0},a=[new i(">=0.0.0-0")],l=[new i(">=0.0.0")],s=(h,o,p)=>{if(h===o)return!0;if(h.length===1&&h[0].semver===r){if(o.length===1&&o[0].semver===r)return!0;p.includePrerelease?h=a:h=l}if(o.length===1&&o[0].semver===r){if(p.includePrerelease)return!0;o=l}const y=new Set;let _,w;for(const D of h)D.operator===">"||D.operator===">="?_=d(_,D,p):D.operator==="<"||D.operator==="<="?w=v(w,D,p):y.add(D.semver);if(y.size>1)return null;let c;if(_&&w){if(c=f(_.semver,w.semver,p),c>0)return null;if(c===0&&(_.operator!==">="||w.operator!=="<="))return null}for(const D of y){if(_&&!n(D,String(_),p)||w&&!n(D,String(w),p))return null;for(const I of o)if(!n(D,String(I),p))return!1;return!0}let m,S,g,b,O=w&&!p.includePrerelease&&w.semver.prerelease.length?w.semver:!1,k=_&&!p.includePrerelease&&_.semver.prerelease.length?_.semver:!1;O&&O.prerelease.length===1&&w.operator==="<"&&O.prerelease[0]===0&&(O=!1);for(const D of o){if(b=b||D.operator===">"||D.operator===">=",g=g||D.operator==="<"||D.operator==="<=",_){if(k&&D.semver.prerelease&&D.semver.prerelease.length&&D.semver.major===k.major&&D.semver.minor===k.minor&&D.semver.patch===k.patch&&(k=!1),D.operator===">"||D.operator===">="){if(m=d(_,D,p),m===D&&m!==_)return!1}else if(_.operator===">="&&!n(_.semver,String(D),p))return!1}if(w){if(O&&D.semver.prerelease&&D.semver.prerelease.length&&D.semver.major===O.major&&D.semver.minor===O.minor&&D.semver.patch===O.patch&&(O=!1),D.operator==="<"||D.operator==="<="){if(S=v(w,D,p),S===D&&S!==w)return!1}else if(w.operator==="<="&&!n(w.semver,String(D),p))return!1}if(!D.operator&&(w||_)&&c!==0)return!1}return!(_&&g&&!w&&c!==0||w&&b&&!_&&c!==0||k||O)},d=(h,o,p)=>{if(!h)return o;const y=f(h.semver,o.semver,p);return y>0?h:y<0||o.operator===">"&&h.operator===">="?o:h},v=(h,o,p)=>{if(!h)return o;const y=f(h.semver,o.semver,p);return y<0?h:y>0||o.operator==="<"&&h.operator==="<="?o:h};return Gt=t,Gt}var Zt,ba;function kl(){if(ba)return Zt;ba=1;const e=kr(),i=Hr(),r=Ge(),n=ho(),f=br(),t=el(),a=rl(),l=tl(),s=nl(),d=il(),v=al(),h=sl(),o=ol(),p=er(),y=ll(),_=cl(),w=gi(),c=ul(),m=fl(),S=Xr(),g=yi(),b=po(),O=vo(),k=_i(),D=wi(),I=mo(),L=hl(),q=Yr(),$=rr(),N=Kr(),M=ml(),X=gl(),ee=yl(),C=_l(),T=wl(),B=bi(),Y=bl(),K=El(),oe=Sl(),ce=xl(),fe=Rl();return Zt={parse:f,valid:t,clean:a,inc:l,diff:s,major:d,minor:v,patch:h,prerelease:o,compare:p,rcompare:y,compareLoose:_,compareBuild:w,sort:c,rsort:m,gt:S,lt:g,eq:b,neq:O,gte:k,lte:D,cmp:I,coerce:L,Comparator:q,Range:$,satisfies:N,toComparators:M,maxSatisfying:X,minSatisfying:ee,minVersion:C,validRange:T,outside:B,gtr:Y,ltr:K,intersects:oe,simplifyRange:ce,subset:fe,SemVer:r,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},Zt}var Dr={},Nr={},Ea;function Cl(){if(Ea)return Nr;Ea=1;var e=z,i=process.platform==="win32",r=U,n=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function f(){var s;if(n){var d=new Error;s=v}else s=h;return s;function v(o){o&&(d.message=o.message,o=d,h(o))}function h(o){if(o){if(process.throwDeprecation)throw o;if(!process.noDeprecation){var p="fs: missing callback "+(o.stack||o.message);process.traceDeprecation?console.trace(p):console.error(p)}}}}function t(s){return typeof s=="function"?s:f()}if(e.normalize,i)var a=/(.*?)(?:[\/\\]+|$)/g;else var a=/(.*?)(?:[\/]+|$)/g;if(i)var l=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else var l=/^[\/]*/;return Nr.realpathSync=function(d,v){if(d=e.resolve(d),v&&Object.prototype.hasOwnProperty.call(v,d))return v[d];var h=d,o={},p={},y,_,w,c;m();function m(){var D=l.exec(d);y=D[0].length,_=D[0],w=D[0],c="",i&&!p[w]&&(r.lstatSync(w),p[w]=!0)}for(;y<d.length;){a.lastIndex=y;var S=a.exec(d);if(c=_,_+=S[0],w=c+S[1],y=a.lastIndex,!(p[w]||v&&v[w]===w)){var g;if(v&&Object.prototype.hasOwnProperty.call(v,w))g=v[w];else{var b=r.lstatSync(w);if(!b.isSymbolicLink()){p[w]=!0,v&&(v[w]=w);continue}var O=null;if(!i){var k=b.dev.toString(32)+":"+b.ino.toString(32);o.hasOwnProperty(k)&&(O=o[k])}O===null&&(r.statSync(w),O=r.readlinkSync(w)),g=e.resolve(c,O),v&&(v[w]=g),i||(o[k]=O)}d=e.resolve(g,d.slice(y)),m()}}return v&&(v[h]=d),d},Nr.realpath=function(d,v,h){if(typeof h!="function"&&(h=t(v),v=null),d=e.resolve(d),v&&Object.prototype.hasOwnProperty.call(v,d))return process.nextTick(h.bind(null,null,v[d]));var o=d,p={},y={},_,w,c,m;S();function S(){var D=l.exec(d);_=D[0].length,w=D[0],c=D[0],m="",i&&!y[c]?r.lstat(c,function(I){if(I)return h(I);y[c]=!0,g()}):process.nextTick(g)}function g(){if(_>=d.length)return v&&(v[o]=d),h(null,d);a.lastIndex=_;var D=a.exec(d);return m=w,w+=D[0],c=m+D[1],_=a.lastIndex,y[c]||v&&v[c]===c?process.nextTick(g):v&&Object.prototype.hasOwnProperty.call(v,c)?k(v[c]):r.lstat(c,b)}function b(D,I){if(D)return h(D);if(!I.isSymbolicLink())return y[c]=!0,v&&(v[c]=c),process.nextTick(g);if(!i){var L=I.dev.toString(32)+":"+I.ino.toString(32);if(p.hasOwnProperty(L))return O(null,p[L],c)}r.stat(c,function(q){if(q)return h(q);r.readlink(c,function($,N){i||(p[L]=N),O($,N)})})}function O(D,I,L){if(D)return h(D);var q=e.resolve(m,I);v&&(v[L]=q),k(q)}function k(D){d=e.resolve(D,d.slice(_)),S()}},Nr}var Ht,Sa;function go(){if(Sa)return Ht;Sa=1,Ht=l,l.realpath=l,l.sync=s,l.realpathSync=s,l.monkeypatch=d,l.unmonkeypatch=v;var e=U,i=e.realpath,r=e.realpathSync,n=process.version,f=/^v[0-5]\./.test(n),t=Cl();function a(h){return h&&h.syscall==="realpath"&&(h.code==="ELOOP"||h.code==="ENOMEM"||h.code==="ENAMETOOLONG")}function l(h,o,p){if(f)return i(h,o,p);typeof o=="function"&&(p=o,o=null),i(h,o,function(y,_){a(y)?t.realpath(h,o,p):p(y,_)})}function s(h,o){if(f)return r(h,o);try{return r(h,o)}catch(p){if(a(p))return t.realpathSync(h,o);throw p}}function d(){e.realpath=l,e.realpathSync=s}function v(){e.realpath=i,e.realpathSync=r}return Ht}var Vt,xa;function Al(){if(xa)return Vt;xa=1,Vt=function(i,r){for(var n=[],f=0;f<i.length;f++){var t=r(i[f],f);e(t)?n.push.apply(n,t):n.push(t)}return n};var e=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};return Vt}var Xt,Ra;function Ol(){if(Ra)return Xt;Ra=1,Xt=e;function e(n,f,t){n instanceof RegExp&&(n=i(n,t)),f instanceof RegExp&&(f=i(f,t));var a=r(n,f,t);return a&&{start:a[0],end:a[1],pre:t.slice(0,a[0]),body:t.slice(a[0]+n.length,a[1]),post:t.slice(a[1]+f.length)}}function i(n,f){var t=f.match(n);return t?t[0]:null}e.range=r;function r(n,f,t){var a,l,s,d,v,h=t.indexOf(n),o=t.indexOf(f,h+1),p=h;if(h>=0&&o>0){if(n===f)return[h,o];for(a=[],s=t.length;p>=0&&!v;)p==h?(a.push(p),h=t.indexOf(n,p+1)):a.length==1?v=[a.pop(),o]:(l=a.pop(),l<s&&(s=l,d=o),o=t.indexOf(f,p+1)),p=h<o&&h>=0?h:o;a.length&&(v=[s,d])}return v}return Xt}var Yt,ka;function Tl(){if(ka)return Yt;ka=1;var e=Al(),i=Ol();Yt=h;var r="\0SLASH"+Math.random()+"\0",n="\0OPEN"+Math.random()+"\0",f="\0CLOSE"+Math.random()+"\0",t="\0COMMA"+Math.random()+"\0",a="\0PERIOD"+Math.random()+"\0";function l(c){return parseInt(c,10)==c?parseInt(c,10):c.charCodeAt(0)}function s(c){return c.split("\\\\").join(r).split("\\{").join(n).split("\\}").join(f).split("\\,").join(t).split("\\.").join(a)}function d(c){return c.split(r).join("\\").split(n).join("{").split(f).join("}").split(t).join(",").split(a).join(".")}function v(c){if(!c)return[""];var m=[],S=i("{","}",c);if(!S)return c.split(",");var g=S.pre,b=S.body,O=S.post,k=g.split(",");k[k.length-1]+="{"+b+"}";var D=v(O);return O.length&&(k[k.length-1]+=D.shift(),k.push.apply(k,D)),m.push.apply(m,k),m}function h(c){return c?(c.substr(0,2)==="{}"&&(c="\\{\\}"+c.substr(2)),w(s(c),!0).map(d)):[]}function o(c){return"{"+c+"}"}function p(c){return/^-?0\d/.test(c)}function y(c,m){return c<=m}function _(c,m){return c>=m}function w(c,m){var S=[],g=i("{","}",c);if(!g||/\$$/.test(g.pre))return[c];var b=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(g.body),O=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(g.body),k=b||O,D=g.body.indexOf(",")>=0;if(!k&&!D)return g.post.match(/,.*\}/)?(c=g.pre+"{"+g.body+f+g.post,w(c)):[c];var I;if(k)I=g.body.split(/\.\./);else if(I=v(g.body),I.length===1&&(I=w(I[0],!1).map(o),I.length===1)){var q=g.post.length?w(g.post,!1):[""];return q.map(function(P){return g.pre+I[0]+P})}var L=g.pre,q=g.post.length?w(g.post,!1):[""],$;if(k){var N=l(I[0]),M=l(I[1]),X=Math.max(I[0].length,I[1].length),ee=I.length==3?Math.abs(l(I[2])):1,C=y,T=M<N;T&&(ee*=-1,C=_);var B=I.some(p);$=[];for(var Y=N;C(Y,M);Y+=ee){var K;if(O)K=String.fromCharCode(Y),K==="\\"&&(K="");else if(K=String(Y),B){var oe=X-K.length;if(oe>0){var ce=new Array(oe+1).join("0");Y<0?K="-"+ce+K.slice(1):K=ce+K}}$.push(K)}}else $=e(I,function(A){return w(A,!1)});for(var fe=0;fe<$.length;fe++)for(var Ee=0;Ee<q.length;Ee++){var pe=L+$[fe]+q[Ee];(!m||k||pe)&&S.push(pe)}return S}return Yt}var Kt,Ca;function Ei(){if(Ca)return Kt;Ca=1,Kt=p,p.Minimatch=y;var e=(function(){try{return require("path")}catch{}})()||{sep:"/"};p.sep=e.sep;var i=p.GLOBSTAR=y.GLOBSTAR={},r=Tl(),n={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},f="[^/]",t=f+"*?",a="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",l="(?:(?!(?:\\/|^)\\.).)*?",s=d("().*{}+?[]^$\\!");function d(I){return I.split("").reduce(function(L,q){return L[q]=!0,L},{})}var v=/\/+/;p.filter=h;function h(I,L){return L=L||{},function(q,$,N){return p(q,I,L)}}function o(I,L){L=L||{};var q={};return Object.keys(I).forEach(function($){q[$]=I[$]}),Object.keys(L).forEach(function($){q[$]=L[$]}),q}p.defaults=function(I){if(!I||typeof I!="object"||!Object.keys(I).length)return p;var L=p,q=function(N,M,X){return L(N,M,o(I,X))};return q.Minimatch=function(N,M){return new L.Minimatch(N,o(I,M))},q.Minimatch.defaults=function(N){return L.defaults(o(I,N)).Minimatch},q.filter=function(N,M){return L.filter(N,o(I,M))},q.defaults=function(N){return L.defaults(o(I,N))},q.makeRe=function(N,M){return L.makeRe(N,o(I,M))},q.braceExpand=function(N,M){return L.braceExpand(N,o(I,M))},q.match=function($,N,M){return L.match($,N,o(I,M))},q},y.defaults=function(I){return p.defaults(I).Minimatch};function p(I,L,q){return S(L),q||(q={}),!q.nocomment&&L.charAt(0)==="#"?!1:new y(L,q).match(I)}function y(I,L){if(!(this instanceof y))return new y(I,L);S(I),L||(L={}),I=I.trim(),!L.allowWindowsEscape&&e.sep!=="/"&&(I=I.split(e.sep).join("/")),this.options=L,this.set=[],this.pattern=I,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!L.partial,this.make()}y.prototype.debug=function(){},y.prototype.make=_;function _(){var I=this.pattern,L=this.options;if(!L.nocomment&&I.charAt(0)==="#"){this.comment=!0;return}if(!I){this.empty=!0;return}this.parseNegate();var q=this.globSet=this.braceExpand();L.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,q),q=this.globParts=q.map(function($){return $.split(v)}),this.debug(this.pattern,q),q=q.map(function($,N,M){return $.map(this.parse,this)},this),this.debug(this.pattern,q),q=q.filter(function($){return $.indexOf(!1)===-1}),this.debug(this.pattern,q),this.set=q}y.prototype.parseNegate=w;function w(){var I=this.pattern,L=!1,q=this.options,$=0;if(!q.nonegate){for(var N=0,M=I.length;N<M&&I.charAt(N)==="!";N++)L=!L,$++;$&&(this.pattern=I.substr($)),this.negate=L}}p.braceExpand=function(I,L){return c(I,L)},y.prototype.braceExpand=c;function c(I,L){return L||(this instanceof y?L=this.options:L={}),I=typeof I>"u"?this.pattern:I,S(I),L.nobrace||!/\{(?:(?!\{).)*\}/.test(I)?[I]:r(I)}var m=1024*64,S=function(I){if(typeof I!="string")throw new TypeError("invalid pattern");if(I.length>m)throw new TypeError("pattern is too long")};y.prototype.parse=b;var g={};function b(I,L){S(I);var q=this.options;if(I==="**")if(q.noglobstar)I="*";else return i;if(I==="")return"";var $="",N=!!q.nocase,M=!1,X=[],ee=[],C,T=!1,B=-1,Y=-1,K=I.charAt(0)==="."?"":q.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",oe=this;function ce(){if(C){switch(C){case"*":$+=t,N=!0;break;case"?":$+=f,N=!0;break;default:$+="\\"+C;break}oe.debug("clearStateChar %j %j",C,$),C=!1}}for(var fe=0,Ee=I.length,pe;fe<Ee&&(pe=I.charAt(fe));fe++){if(this.debug("%s	%s %s %j",I,fe,$,pe),M&&s[pe]){$+="\\"+pe,M=!1;continue}switch(pe){case"/":return!1;case"\\":ce(),M=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",I,fe,$,pe),T){this.debug("  in class"),pe==="!"&&fe===Y+1&&(pe="^"),$+=pe;continue}oe.debug("call clearStateChar %j",C),ce(),C=pe,q.noext&&ce();continue;case"(":if(T){$+="(";continue}if(!C){$+="\\(";continue}X.push({type:C,start:fe-1,reStart:$.length,open:n[C].open,close:n[C].close}),$+=C==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",C,$),C=!1;continue;case")":if(T||!X.length){$+="\\)";continue}ce(),N=!0;var A=X.pop();$+=A.close,A.type==="!"&&ee.push(A),A.reEnd=$.length;continue;case"|":if(T||!X.length||M){$+="\\|",M=!1;continue}ce(),$+="|";continue;case"[":if(ce(),T){$+="\\"+pe;continue}T=!0,Y=fe,B=$.length,$+=pe;continue;case"]":if(fe===Y+1||!T){$+="\\"+pe,M=!1;continue}var P=I.substring(Y+1,fe);try{RegExp("["+P+"]")}catch{var Q=this.parse(P,g);$=$.substr(0,B)+"\\["+Q[0]+"\\]",N=N||Q[1],T=!1;continue}N=!0,T=!1,$+=pe;continue;default:ce(),M?M=!1:s[pe]&&!(pe==="^"&&T)&&($+="\\"),$+=pe}}for(T&&(P=I.substr(Y+1),Q=this.parse(P,g),$=$.substr(0,B)+"\\["+Q[0],N=N||Q[1]),A=X.pop();A;A=X.pop()){var ae=$.slice(A.reStart+A.open.length);this.debug("setting tail",$,A),ae=ae.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(he,xe,Se){return Se||(Se="\\"),xe+xe+Se+"|"}),this.debug(`tail=%j
   %s`,ae,ae,A,$);var we=A.type==="*"?t:A.type==="?"?f:"\\"+A.type;N=!0,$=$.slice(0,A.reStart)+we+"\\("+ae}ce(),M&&($+="\\\\");var ue=!1;switch($.charAt(0)){case"[":case".":case"(":ue=!0}for(var _e=ee.length-1;_e>-1;_e--){var je=ee[_e],Ie=$.slice(0,je.reStart),Le=$.slice(je.reStart,je.reEnd-8),Ce=$.slice(je.reEnd-8,je.reEnd),ge=$.slice(je.reEnd);Ce+=ge;var Pe=Ie.split("(").length-1,Ue=ge;for(fe=0;fe<Pe;fe++)Ue=Ue.replace(/\)[+*?]?/,"");ge=Ue;var qe="";ge===""&&L!==g&&(qe="$");var G=Ie+Le+ge+qe+Ce;$=G}if($!==""&&N&&($="(?=.)"+$),ue&&($=K+$),L===g)return[$,N];if(!N)return k(I);var J=q.nocase?"i":"";try{var se=new RegExp("^"+$+"$",J)}catch{return new RegExp("$.")}return se._glob=I,se._src=$,se}p.makeRe=function(I,L){return new y(I,L||{}).makeRe()},y.prototype.makeRe=O;function O(){if(this.regexp||this.regexp===!1)return this.regexp;var I=this.set;if(!I.length)return this.regexp=!1,this.regexp;var L=this.options,q=L.noglobstar?t:L.dot?a:l,$=L.nocase?"i":"",N=I.map(function(M){return M.map(function(X){return X===i?q:typeof X=="string"?D(X):X._src}).join("\\/")}).join("|");N="^(?:"+N+")$",this.negate&&(N="^(?!"+N+").*$");try{this.regexp=new RegExp(N,$)}catch{this.regexp=!1}return this.regexp}p.match=function(I,L,q){q=q||{};var $=new y(L,q);return I=I.filter(function(N){return $.match(N)}),$.options.nonull&&!I.length&&I.push(L),I},y.prototype.match=function(L,q){if(typeof q>"u"&&(q=this.partial),this.debug("match",L,this.pattern),this.comment)return!1;if(this.empty)return L==="";if(L==="/"&&q)return!0;var $=this.options;e.sep!=="/"&&(L=L.split(e.sep).join("/")),L=L.split(v),this.debug(this.pattern,"split",L);var N=this.set;this.debug(this.pattern,"set",N);var M,X;for(X=L.length-1;X>=0&&(M=L[X],!M);X--);for(X=0;X<N.length;X++){var ee=N[X],C=L;$.matchBase&&ee.length===1&&(C=[M]);var T=this.matchOne(C,ee,q);if(T)return $.flipNegate?!0:!this.negate}return $.flipNegate?!1:this.negate},y.prototype.matchOne=function(I,L,q){var $=this.options;this.debug("matchOne",{this:this,file:I,pattern:L}),this.debug("matchOne",I.length,L.length);for(var N=0,M=0,X=I.length,ee=L.length;N<X&&M<ee;N++,M++){this.debug("matchOne loop");var C=L[M],T=I[N];if(this.debug(L,C,T),C===!1)return!1;if(C===i){this.debug("GLOBSTAR",[L,C,T]);var B=N,Y=M+1;if(Y===ee){for(this.debug("** at the end");N<X;N++)if(I[N]==="."||I[N]===".."||!$.dot&&I[N].charAt(0)===".")return!1;return!0}for(;B<X;){var K=I[B];if(this.debug(`
globstar while`,I,B,L,Y,K),this.matchOne(I.slice(B),L.slice(Y),q))return this.debug("globstar found match!",B,X,K),!0;if(K==="."||K===".."||!$.dot&&K.charAt(0)==="."){this.debug("dot detected!",I,B,L,Y);break}this.debug("globstar swallow a segment, and continue"),B++}return!!(q&&(this.debug(`
>>> no match, partial?`,I,B,L,Y),B===X))}var oe;if(typeof C=="string"?(oe=T===C,this.debug("string match",C,T,oe)):(oe=T.match(C),this.debug("pattern match",C,T,oe)),!oe)return!1}if(N===X&&M===ee)return!0;if(N===X)return q;if(M===ee)return N===X-1&&I[N]==="";throw new Error("wtf?")};function k(I){return I.replace(/\\(.)/g,"$1")}function D(I){return I.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}return Kt}var jr={exports:{}},Lr={exports:{}},Aa;function Il(){return Aa||(Aa=1,typeof Object.create=="function"?Lr.exports=function(i,r){r&&(i.super_=r,i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:Lr.exports=function(i,r){if(r){i.super_=r;var n=function(){};n.prototype=r.prototype,i.prototype=new n,i.prototype.constructor=i}}),Lr.exports}var Oa;function Er(){if(Oa)return jr.exports;Oa=1;try{var e=require("util");if(typeof e.inherits!="function")throw"";jr.exports=e.inherits}catch{jr.exports=Il()}return jr.exports}var Sr={exports:{}},Ta;function Si(){if(Ta)return Sr.exports;Ta=1;function e(r){return r.charAt(0)==="/"}function i(r){var n=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,f=n.exec(r),t=f[1]||"",a=!!(t&&t.charAt(1)!==":");return!!(f[2]||a)}return Sr.exports=process.platform==="win32"?i:e,Sr.exports.posix=e,Sr.exports.win32=i,Sr.exports}var ar={},Ia;function yo(){if(Ia)return ar;Ia=1,ar.setopts=d,ar.ownProp=e,ar.makeAbs=o,ar.finish=v,ar.mark=h,ar.isIgnored=p,ar.childrenIgnored=y;function e(_,w){return Object.prototype.hasOwnProperty.call(_,w)}var i=U,r=z,n=Ei(),f=Si(),t=n.Minimatch;function a(_,w){return _.localeCompare(w,"en")}function l(_,w){_.ignore=w.ignore||[],Array.isArray(_.ignore)||(_.ignore=[_.ignore]),_.ignore.length&&(_.ignore=_.ignore.map(s))}function s(_){var w=null;if(_.slice(-3)==="/**"){var c=_.replace(/(\/\*\*)+$/,"");w=new t(c,{dot:!0})}return{matcher:new t(_,{dot:!0}),gmatcher:w}}function d(_,w,c){if(c||(c={}),c.matchBase&&w.indexOf("/")===-1){if(c.noglobstar)throw new Error("base matching requires globstar");w="**/"+w}_.silent=!!c.silent,_.pattern=w,_.strict=c.strict!==!1,_.realpath=!!c.realpath,_.realpathCache=c.realpathCache||Object.create(null),_.follow=!!c.follow,_.dot=!!c.dot,_.mark=!!c.mark,_.nodir=!!c.nodir,_.nodir&&(_.mark=!0),_.sync=!!c.sync,_.nounique=!!c.nounique,_.nonull=!!c.nonull,_.nosort=!!c.nosort,_.nocase=!!c.nocase,_.stat=!!c.stat,_.noprocess=!!c.noprocess,_.absolute=!!c.absolute,_.fs=c.fs||i,_.maxLength=c.maxLength||1/0,_.cache=c.cache||Object.create(null),_.statCache=c.statCache||Object.create(null),_.symlinks=c.symlinks||Object.create(null),l(_,c),_.changedCwd=!1;var m=process.cwd();e(c,"cwd")?(_.cwd=r.resolve(c.cwd),_.changedCwd=_.cwd!==m):_.cwd=m,_.root=c.root||r.resolve(_.cwd,"/"),_.root=r.resolve(_.root),process.platform==="win32"&&(_.root=_.root.replace(/\\/g,"/")),_.cwdAbs=f(_.cwd)?_.cwd:o(_,_.cwd),process.platform==="win32"&&(_.cwdAbs=_.cwdAbs.replace(/\\/g,"/")),_.nomount=!!c.nomount,c.nonegate=!0,c.nocomment=!0,c.allowWindowsEscape=!1,_.minimatch=new t(w,c),_.options=_.minimatch.options}function v(_){for(var w=_.nounique,c=w?[]:Object.create(null),m=0,S=_.matches.length;m<S;m++){var g=_.matches[m];if(!g||Object.keys(g).length===0){if(_.nonull){var b=_.minimatch.globSet[m];w?c.push(b):c[b]=!0}}else{var O=Object.keys(g);w?c.push.apply(c,O):O.forEach(function(k){c[k]=!0})}}if(w||(c=Object.keys(c)),_.nosort||(c=c.sort(a)),_.mark){for(var m=0;m<c.length;m++)c[m]=_._mark(c[m]);_.nodir&&(c=c.filter(function(k){var D=!/\/$/.test(k),I=_.cache[k]||_.cache[o(_,k)];return D&&I&&(D=I!=="DIR"&&!Array.isArray(I)),D}))}_.ignore.length&&(c=c.filter(function(k){return!p(_,k)})),_.found=c}function h(_,w){var c=o(_,w),m=_.cache[c],S=w;if(m){var g=m==="DIR"||Array.isArray(m),b=w.slice(-1)==="/";if(g&&!b?S+="/":!g&&b&&(S=S.slice(0,-1)),S!==w){var O=o(_,S);_.statCache[O]=_.statCache[c],_.cache[O]=_.cache[c]}}return S}function o(_,w){var c=w;return w.charAt(0)==="/"?c=r.join(_.root,w):f(w)||w===""?c=w:_.changedCwd?c=r.resolve(_.cwd,w):c=r.resolve(w),process.platform==="win32"&&(c=c.replace(/\\/g,"/")),c}function p(_,w){return _.ignore.length?_.ignore.some(function(c){return c.matcher.match(w)||!!(c.gmatcher&&c.gmatcher.match(w))}):!1}function y(_,w){return _.ignore.length?_.ignore.some(function(c){return!!(c.gmatcher&&c.gmatcher.match(w))}):!1}return ar}var Jt,Pa;function Pl(){if(Pa)return Jt;Pa=1,Jt=v,v.GlobSync=h;var e=go(),i=Ei();i.Minimatch,bo().Glob;var r=z,n=vi,f=Si(),t=yo(),a=t.setopts,l=t.ownProp,s=t.childrenIgnored,d=t.isIgnored;function v(o,p){if(typeof p=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new h(o,p).found}function h(o,p){if(!o)throw new Error("must provide pattern");if(typeof p=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof h))return new h(o,p);if(a(this,o,p),this.noprocess)return this;var y=this.minimatch.set.length;this.matches=new Array(y);for(var _=0;_<y;_++)this._process(this.minimatch.set[_],_,!1);this._finish()}return h.prototype._finish=function(){if(n.ok(this instanceof h),this.realpath){var o=this;this.matches.forEach(function(p,y){var _=o.matches[y]=Object.create(null);for(var w in p)try{w=o._makeAbs(w);var c=e.realpathSync(w,o.realpathCache);_[c]=!0}catch(m){if(m.syscall==="stat")_[o._makeAbs(w)]=!0;else throw m}})}t.finish(this)},h.prototype._process=function(o,p,y){n.ok(this instanceof h);for(var _=0;typeof o[_]=="string";)_++;var w;switch(_){case o.length:this._processSimple(o.join("/"),p);return;case 0:w=null;break;default:w=o.slice(0,_).join("/");break}var c=o.slice(_),m;w===null?m=".":((f(w)||f(o.map(function(b){return typeof b=="string"?b:"[*]"}).join("/")))&&(!w||!f(w))&&(w="/"+w),m=w);var S=this._makeAbs(m);if(!s(this,m)){var g=c[0]===i.GLOBSTAR;g?this._processGlobStar(w,m,S,c,p,y):this._processReaddir(w,m,S,c,p,y)}},h.prototype._processReaddir=function(o,p,y,_,w,c){var m=this._readdir(y,c);if(m){for(var S=_[0],g=!!this.minimatch.negate,b=S._glob,O=this.dot||b.charAt(0)===".",k=[],D=0;D<m.length;D++){var I=m[D];if(I.charAt(0)!=="."||O){var L;g&&!o?L=!I.match(S):L=I.match(S),L&&k.push(I)}}var q=k.length;if(q!==0){if(_.length===1&&!this.mark&&!this.stat){this.matches[w]||(this.matches[w]=Object.create(null));for(var D=0;D<q;D++){var I=k[D];o&&(o.slice(-1)!=="/"?I=o+"/"+I:I=o+I),I.charAt(0)==="/"&&!this.nomount&&(I=r.join(this.root,I)),this._emitMatch(w,I)}return}_.shift();for(var D=0;D<q;D++){var I=k[D],$;o?$=[o,I]:$=[I],this._process($.concat(_),w,c)}}}},h.prototype._emitMatch=function(o,p){if(!d(this,p)){var y=this._makeAbs(p);if(this.mark&&(p=this._mark(p)),this.absolute&&(p=y),!this.matches[o][p]){if(this.nodir){var _=this.cache[y];if(_==="DIR"||Array.isArray(_))return}this.matches[o][p]=!0,this.stat&&this._stat(p)}}},h.prototype._readdirInGlobStar=function(o){if(this.follow)return this._readdir(o,!1);var p,y;try{y=this.fs.lstatSync(o)}catch(w){if(w.code==="ENOENT")return null}var _=y&&y.isSymbolicLink();return this.symlinks[o]=_,!_&&y&&!y.isDirectory()?this.cache[o]="FILE":p=this._readdir(o,!1),p},h.prototype._readdir=function(o,p){if(p&&!l(this.symlinks,o))return this._readdirInGlobStar(o);if(l(this.cache,o)){var y=this.cache[o];if(!y||y==="FILE")return null;if(Array.isArray(y))return y}try{return this._readdirEntries(o,this.fs.readdirSync(o))}catch(_){return this._readdirError(o,_),null}},h.prototype._readdirEntries=function(o,p){if(!this.mark&&!this.stat)for(var y=0;y<p.length;y++){var _=p[y];o==="/"?_=o+_:_=o+"/"+_,this.cache[_]=!0}return this.cache[o]=p,p},h.prototype._readdirError=function(o,p){switch(p.code){case"ENOTSUP":case"ENOTDIR":var y=this._makeAbs(o);if(this.cache[y]="FILE",y===this.cwdAbs){var _=new Error(p.code+" invalid cwd "+this.cwd);throw _.path=this.cwd,_.code=p.code,_}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(o)]=!1;break;default:if(this.cache[this._makeAbs(o)]=!1,this.strict)throw p;this.silent||console.error("glob error",p);break}},h.prototype._processGlobStar=function(o,p,y,_,w,c){var m=this._readdir(y,c);if(m){var S=_.slice(1),g=o?[o]:[],b=g.concat(S);this._process(b,w,!1);var O=m.length,k=this.symlinks[y];if(!(k&&c))for(var D=0;D<O;D++){var I=m[D];if(!(I.charAt(0)==="."&&!this.dot)){var L=g.concat(m[D],S);this._process(L,w,!0);var q=g.concat(m[D],_);this._process(q,w,!0)}}}},h.prototype._processSimple=function(o,p){var y=this._stat(o);if(this.matches[p]||(this.matches[p]=Object.create(null)),!!y){if(o&&f(o)&&!this.nomount){var _=/[\/\\]$/.test(o);o.charAt(0)==="/"?o=r.join(this.root,o):(o=r.resolve(this.root,o),_&&(o+="/"))}process.platform==="win32"&&(o=o.replace(/\\/g,"/")),this._emitMatch(p,o)}},h.prototype._stat=function(o){var p=this._makeAbs(o),y=o.slice(-1)==="/";if(o.length>this.maxLength)return!1;if(!this.stat&&l(this.cache,p)){var c=this.cache[p];if(Array.isArray(c)&&(c="DIR"),!y||c==="DIR")return c;if(y&&c==="FILE")return!1}var _=this.statCache[p];if(!_){var w;try{w=this.fs.lstatSync(p)}catch(m){if(m&&(m.code==="ENOENT"||m.code==="ENOTDIR"))return this.statCache[p]=!1,!1}if(w&&w.isSymbolicLink())try{_=this.fs.statSync(p)}catch{_=w}else _=w}this.statCache[p]=_;var c=!0;return _&&(c=_.isDirectory()?"DIR":"FILE"),this.cache[p]=this.cache[p]||c,y&&c==="FILE"?!1:c},h.prototype._mark=function(o){return t.mark(this,o)},h.prototype._makeAbs=function(o){return t.makeAbs(this,o)},Jt}var Qt,Da;function _o(){if(Da)return Qt;Da=1,Qt=e;function e(i,r){if(i&&r)return e(i)(r);if(typeof i!="function")throw new TypeError("need wrapper function");return Object.keys(i).forEach(function(f){n[f]=i[f]}),n;function n(){for(var f=new Array(arguments.length),t=0;t<f.length;t++)f[t]=arguments[t];var a=i.apply(this,f),l=f[f.length-1];return typeof a=="function"&&a!==l&&Object.keys(l).forEach(function(s){a[s]=l[s]}),a}}return Qt}var Mr={exports:{}},Na;function wo(){if(Na)return Mr.exports;Na=1;var e=_o();Mr.exports=e(i),Mr.exports.strict=e(r),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return r(this)},configurable:!0})});function i(n){var f=function(){return f.called?f.value:(f.called=!0,f.value=n.apply(this,arguments))};return f.called=!1,f}function r(n){var f=function(){if(f.called)throw new Error(f.onceError);return f.called=!0,f.value=n.apply(this,arguments)},t=n.name||"Function wrapped with `once`";return f.onceError=t+" shouldn't be called more than once",f.called=!1,f}return Mr.exports}var en,ja;function Dl(){if(ja)return en;ja=1;var e=_o(),i=Object.create(null),r=wo();en=e(n);function n(a,l){return i[a]?(i[a].push(l),null):(i[a]=[l],f(a))}function f(a){return r(function l(){var s=i[a],d=s.length,v=t(arguments);try{for(var h=0;h<d;h++)s[h].apply(null,v)}finally{s.length>d?(s.splice(0,d),process.nextTick(function(){l.apply(null,v)})):delete i[a]}})}function t(a){for(var l=a.length,s=[],d=0;d<l;d++)s[d]=a[d];return s}return en}var rn,La;function bo(){if(La)return rn;La=1,rn=_;var e=go(),i=Ei();i.Minimatch;var r=Er(),n=co.EventEmitter,f=z,t=vi,a=Si(),l=Pl(),s=yo(),d=s.setopts,v=s.ownProp,h=Dl(),o=s.childrenIgnored,p=s.isIgnored,y=wo();function _(g,b,O){if(typeof b=="function"&&(O=b,b={}),b||(b={}),b.sync){if(O)throw new TypeError("callback provided to sync glob");return l(g,b)}return new m(g,b,O)}_.sync=l;var w=_.GlobSync=l.GlobSync;_.glob=_;function c(g,b){if(b===null||typeof b!="object")return g;for(var O=Object.keys(b),k=O.length;k--;)g[O[k]]=b[O[k]];return g}_.hasMagic=function(g,b){var O=c({},b);O.noprocess=!0;var k=new m(g,O),D=k.minimatch.set;if(!g)return!1;if(D.length>1)return!0;for(var I=0;I<D[0].length;I++)if(typeof D[0][I]!="string")return!0;return!1},_.Glob=m,r(m,n);function m(g,b,O){if(typeof b=="function"&&(O=b,b=null),b&&b.sync){if(O)throw new TypeError("callback provided to sync glob");return new w(g,b)}if(!(this instanceof m))return new m(g,b,O);d(this,g,b),this._didRealPath=!1;var k=this.minimatch.set.length;this.matches=new Array(k),typeof O=="function"&&(O=y(O),this.on("error",O),this.on("end",function($){O(null,$)}));var D=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(k===0)return q();for(var I=!0,L=0;L<k;L++)this._process(this.minimatch.set[L],L,!1,q);I=!1;function q(){--D._processing,D._processing<=0&&(I?process.nextTick(function(){D._finish()}):D._finish())}}m.prototype._finish=function(){if(t(this instanceof m),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();s.finish(this),this.emit("end",this.found)}},m.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var g=this.matches.length;if(g===0)return this._finish();for(var b=this,O=0;O<this.matches.length;O++)this._realpathSet(O,k);function k(){--g===0&&b._finish()}},m.prototype._realpathSet=function(g,b){var O=this.matches[g];if(!O)return b();var k=Object.keys(O),D=this,I=k.length;if(I===0)return b();var L=this.matches[g]=Object.create(null);k.forEach(function(q,$){q=D._makeAbs(q),e.realpath(q,D.realpathCache,function(N,M){N?N.syscall==="stat"?L[q]=!0:D.emit("error",N):L[M]=!0,--I===0&&(D.matches[g]=L,b())})})},m.prototype._mark=function(g){return s.mark(this,g)},m.prototype._makeAbs=function(g){return s.makeAbs(this,g)},m.prototype.abort=function(){this.aborted=!0,this.emit("abort")},m.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},m.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var g=this._emitQueue.slice(0);this._emitQueue.length=0;for(var b=0;b<g.length;b++){var O=g[b];this._emitMatch(O[0],O[1])}}if(this._processQueue.length){var k=this._processQueue.slice(0);this._processQueue.length=0;for(var b=0;b<k.length;b++){var D=k[b];this._processing--,this._process(D[0],D[1],D[2],D[3])}}}},m.prototype._process=function(g,b,O,k){if(t(this instanceof m),t(typeof k=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([g,b,O,k]);return}for(var D=0;typeof g[D]=="string";)D++;var I;switch(D){case g.length:this._processSimple(g.join("/"),b,k);return;case 0:I=null;break;default:I=g.slice(0,D).join("/");break}var L=g.slice(D),q;I===null?q=".":((a(I)||a(g.map(function(M){return typeof M=="string"?M:"[*]"}).join("/")))&&(!I||!a(I))&&(I="/"+I),q=I);var $=this._makeAbs(q);if(o(this,q))return k();var N=L[0]===i.GLOBSTAR;N?this._processGlobStar(I,q,$,L,b,O,k):this._processReaddir(I,q,$,L,b,O,k)}},m.prototype._processReaddir=function(g,b,O,k,D,I,L){var q=this;this._readdir(O,I,function($,N){return q._processReaddir2(g,b,O,k,D,I,N,L)})},m.prototype._processReaddir2=function(g,b,O,k,D,I,L,q){if(!L)return q();for(var $=k[0],N=!!this.minimatch.negate,M=$._glob,X=this.dot||M.charAt(0)===".",ee=[],C=0;C<L.length;C++){var T=L[C];if(T.charAt(0)!=="."||X){var B;N&&!g?B=!T.match($):B=T.match($),B&&ee.push(T)}}var Y=ee.length;if(Y===0)return q();if(k.length===1&&!this.mark&&!this.stat){this.matches[D]||(this.matches[D]=Object.create(null));for(var C=0;C<Y;C++){var T=ee[C];g&&(g!=="/"?T=g+"/"+T:T=g+T),T.charAt(0)==="/"&&!this.nomount&&(T=f.join(this.root,T)),this._emitMatch(D,T)}return q()}k.shift();for(var C=0;C<Y;C++){var T=ee[C];g&&(g!=="/"?T=g+"/"+T:T=g+T),this._process([T].concat(k),D,I,q)}q()},m.prototype._emitMatch=function(g,b){if(!this.aborted&&!p(this,b)){if(this.paused){this._emitQueue.push([g,b]);return}var O=a(b)?b:this._makeAbs(b);if(this.mark&&(b=this._mark(b)),this.absolute&&(b=O),!this.matches[g][b]){if(this.nodir){var k=this.cache[O];if(k==="DIR"||Array.isArray(k))return}this.matches[g][b]=!0;var D=this.statCache[O];D&&this.emit("stat",b,D),this.emit("match",b)}}},m.prototype._readdirInGlobStar=function(g,b){if(this.aborted)return;if(this.follow)return this._readdir(g,!1,b);var O="lstat\0"+g,k=this,D=h(O,I);D&&k.fs.lstat(g,D);function I(L,q){if(L&&L.code==="ENOENT")return b();var $=q&&q.isSymbolicLink();k.symlinks[g]=$,!$&&q&&!q.isDirectory()?(k.cache[g]="FILE",b()):k._readdir(g,!1,b)}},m.prototype._readdir=function(g,b,O){if(!this.aborted&&(O=h("readdir\0"+g+"\0"+b,O),!!O)){if(b&&!v(this.symlinks,g))return this._readdirInGlobStar(g,O);if(v(this.cache,g)){var k=this.cache[g];if(!k||k==="FILE")return O();if(Array.isArray(k))return O(null,k)}var D=this;D.fs.readdir(g,S(this,g,O))}};function S(g,b,O){return function(k,D){k?g._readdirError(b,k,O):g._readdirEntries(b,D,O)}}return m.prototype._readdirEntries=function(g,b,O){if(!this.aborted){if(!this.mark&&!this.stat)for(var k=0;k<b.length;k++){var D=b[k];g==="/"?D=g+D:D=g+"/"+D,this.cache[D]=!0}return this.cache[g]=b,O(null,b)}},m.prototype._readdirError=function(g,b,O){if(!this.aborted){switch(b.code){case"ENOTSUP":case"ENOTDIR":var k=this._makeAbs(g);if(this.cache[k]="FILE",k===this.cwdAbs){var D=new Error(b.code+" invalid cwd "+this.cwd);D.path=this.cwd,D.code=b.code,this.emit("error",D),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(g)]=!1;break;default:this.cache[this._makeAbs(g)]=!1,this.strict&&(this.emit("error",b),this.abort()),this.silent||console.error("glob error",b);break}return O()}},m.prototype._processGlobStar=function(g,b,O,k,D,I,L){var q=this;this._readdir(O,I,function($,N){q._processGlobStar2(g,b,O,k,D,I,N,L)})},m.prototype._processGlobStar2=function(g,b,O,k,D,I,L,q){if(!L)return q();var $=k.slice(1),N=g?[g]:[],M=N.concat($);this._process(M,D,!1,q);var X=this.symlinks[O],ee=L.length;if(X&&I)return q();for(var C=0;C<ee;C++){var T=L[C];if(!(T.charAt(0)==="."&&!this.dot)){var B=N.concat(L[C],$);this._process(B,D,!0,q);var Y=N.concat(L[C],k);this._process(Y,D,!0,q)}}q()},m.prototype._processSimple=function(g,b,O){var k=this;this._stat(g,function(D,I){k._processSimple2(g,b,D,I,O)})},m.prototype._processSimple2=function(g,b,O,k,D){if(this.matches[b]||(this.matches[b]=Object.create(null)),!k)return D();if(g&&a(g)&&!this.nomount){var I=/[\/\\]$/.test(g);g.charAt(0)==="/"?g=f.join(this.root,g):(g=f.resolve(this.root,g),I&&(g+="/"))}process.platform==="win32"&&(g=g.replace(/\\/g,"/")),this._emitMatch(b,g),D()},m.prototype._stat=function(g,b){var O=this._makeAbs(g),k=g.slice(-1)==="/";if(g.length>this.maxLength)return b();if(!this.stat&&v(this.cache,O)){var D=this.cache[O];if(Array.isArray(D)&&(D="DIR"),!k||D==="DIR")return b(null,D);if(k&&D==="FILE")return b()}var I=this.statCache[O];if(I!==void 0){if(I===!1)return b(null,I);var L=I.isDirectory()?"DIR":"FILE";return k&&L==="FILE"?b():b(null,L,I)}var q=this,$=h("stat\0"+O,N);$&&q.fs.lstat(O,$);function N(M,X){if(X&&X.isSymbolicLink())return q.fs.stat(O,function(ee,C){ee?q._stat2(g,O,null,X,b):q._stat2(g,O,ee,C,b)});q._stat2(g,O,M,X,b)}},m.prototype._stat2=function(g,b,O,k,D){if(O&&(O.code==="ENOENT"||O.code==="ENOTDIR"))return this.statCache[b]=!1,D();var I=g.slice(-1)==="/";if(this.statCache[b]=k,b.slice(-1)==="/"&&k&&!k.isDirectory())return D(null,!1,k);var L=!0;return k&&(L=k.isDirectory()?"DIR":"FILE"),this.cache[b]=this.cache[b]||L,I&&L==="FILE"?D():D(null,L,k)},rn}var tn,Ma;function Nl(){if(Ma)return tn;Ma=1;const e=vi,i=z,r=U;let n;try{n=bo()}catch{}const f={nosort:!0,silent:!0};let t=0;const a=process.platform==="win32",l=c=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(S=>{c[S]=c[S]||r[S],S=S+"Sync",c[S]=c[S]||r[S]}),c.maxBusyTries=c.maxBusyTries||3,c.emfileWait=c.emfileWait||1e3,c.glob===!1&&(c.disableGlob=!0),c.disableGlob!==!0&&n===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");c.disableGlob=c.disableGlob||!1,c.glob=c.glob||f},s=(c,m,S)=>{typeof m=="function"&&(S=m,m={}),e(c,"rimraf: missing path"),e.equal(typeof c,"string","rimraf: path should be a string"),e.equal(typeof S,"function","rimraf: callback function required"),e(m,"rimraf: invalid options argument provided"),e.equal(typeof m,"object","rimraf: options should be object"),l(m);let g=0,b=null,O=0;const k=I=>{b=b||I,--O===0&&S(b)},D=(I,L)=>{if(I)return S(I);if(O=L.length,O===0)return S();L.forEach(q=>{const $=N=>{if(N){if((N.code==="EBUSY"||N.code==="ENOTEMPTY"||N.code==="EPERM")&&g<m.maxBusyTries)return g++,setTimeout(()=>d(q,m,$),g*100);if(N.code==="EMFILE"&&t<m.emfileWait)return setTimeout(()=>d(q,m,$),t++);N.code==="ENOENT"&&(N=null)}t=0,k(N)};d(q,m,$)})};if(m.disableGlob||!n.hasMagic(c))return D(null,[c]);m.lstat(c,(I,L)=>{if(!I)return D(null,[c]);n(c,m.glob,D)})},d=(c,m,S)=>{e(c),e(m),e(typeof S=="function"),m.lstat(c,(g,b)=>{if(g&&g.code==="ENOENT")return S(null);if(g&&g.code==="EPERM"&&a&&v(c,m,g,S),b&&b.isDirectory())return o(c,m,g,S);m.unlink(c,O=>{if(O){if(O.code==="ENOENT")return S(null);if(O.code==="EPERM")return a?v(c,m,O,S):o(c,m,O,S);if(O.code==="EISDIR")return o(c,m,O,S)}return S(O)})})},v=(c,m,S,g)=>{e(c),e(m),e(typeof g=="function"),m.chmod(c,438,b=>{b?g(b.code==="ENOENT"?null:S):m.stat(c,(O,k)=>{O?g(O.code==="ENOENT"?null:S):k.isDirectory()?o(c,m,S,g):m.unlink(c,g)})})},h=(c,m,S)=>{e(c),e(m);try{m.chmodSync(c,438)}catch(b){if(b.code==="ENOENT")return;throw S}let g;try{g=m.statSync(c)}catch(b){if(b.code==="ENOENT")return;throw S}g.isDirectory()?_(c,m,S):m.unlinkSync(c)},o=(c,m,S,g)=>{e(c),e(m),e(typeof g=="function"),m.rmdir(c,b=>{b&&(b.code==="ENOTEMPTY"||b.code==="EEXIST"||b.code==="EPERM")?p(c,m,g):b&&b.code==="ENOTDIR"?g(S):g(b)})},p=(c,m,S)=>{e(c),e(m),e(typeof S=="function"),m.readdir(c,(g,b)=>{if(g)return S(g);let O=b.length;if(O===0)return m.rmdir(c,S);let k;b.forEach(D=>{s(i.join(c,D),m,I=>{if(!k){if(I)return S(k=I);--O===0&&m.rmdir(c,S)}})})})},y=(c,m)=>{m=m||{},l(m),e(c,"rimraf: missing path"),e.equal(typeof c,"string","rimraf: path should be a string"),e(m,"rimraf: missing options"),e.equal(typeof m,"object","rimraf: options should be object");let S;if(m.disableGlob||!n.hasMagic(c))S=[c];else try{m.lstatSync(c),S=[c]}catch{S=n.sync(c,m.glob)}if(S.length)for(let g=0;g<S.length;g++){const b=S[g];let O;try{O=m.lstatSync(b)}catch(k){if(k.code==="ENOENT")return;k.code==="EPERM"&&a&&h(b,m,k)}try{O&&O.isDirectory()?_(b,m,null):m.unlinkSync(b)}catch(k){if(k.code==="ENOENT")return;if(k.code==="EPERM")return a?h(b,m,k):_(b,m,k);if(k.code!=="EISDIR")throw k;_(b,m,k)}}},_=(c,m,S)=>{e(c),e(m);try{m.rmdirSync(c)}catch(g){if(g.code==="ENOENT")return;if(g.code==="ENOTDIR")throw S;(g.code==="ENOTEMPTY"||g.code==="EEXIST"||g.code==="EPERM")&&w(c,m)}},w=(c,m)=>{e(c),e(m),m.readdirSync(c).forEach(b=>y(i.join(c,b),m));const S=a?100:1;let g=0;do{let b=!0;try{const O=m.rmdirSync(c,m);return b=!1,O}finally{if(++g<S&&b)continue}}while(!0)};return tn=s,s.sync=y,tn}var nn={},Fa;function Eo(){return Fa||(Fa=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.changePermissions=e.downloadFile=e.getPath=void 0;const i=ne,r=U,n=z,f=Ko,t=()=>{const d=i.app.getPath("userData");return n.resolve(`${d}/extensions`)};e.getPath=t;const a=i.net?i.net.request:f.get,l=(d,v)=>new Promise((h,o)=>{const p=a(d);p.on("response",y=>{if(y.statusCode&&y.statusCode>=300&&y.statusCode<400&&y.headers.location)return e.downloadFile(y.headers.location,v).then(h).catch(o);y.pipe(r.createWriteStream(v)).on("close",h),y.on("error",o)}),p.on("error",o),p.end()});e.downloadFile=l;const s=(d,v)=>{r.readdirSync(d).forEach(o=>{const p=n.join(d,o);r.chmodSync(p,parseInt(`${v}`,8)),r.statSync(p).isDirectory()&&e.changePermissions(p,v)})};e.changePermissions=s})(nn)),nn}var an={},sn={},He={},Fr={exports:{}},qr={exports:{}},qa;function Jr(){if(qa)return qr.exports;qa=1,typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?qr.exports={nextTick:e}:qr.exports=process;function e(i,r,n,f){if(typeof i!="function")throw new TypeError('"callback" argument must be a function');var t=arguments.length,a,l;switch(t){case 0:case 1:return process.nextTick(i);case 2:return process.nextTick(function(){i.call(null,r)});case 3:return process.nextTick(function(){i.call(null,r,n)});case 4:return process.nextTick(function(){i.call(null,r,n,f)});default:for(a=new Array(t-1),l=0;l<a.length;)a[l++]=arguments[l];return process.nextTick(function(){i.apply(null,a)})}}return qr.exports}var on,Ba;function jl(){if(Ba)return on;Ba=1;var e={}.toString;return on=Array.isArray||function(i){return e.call(i)=="[object Array]"},on}var ln,$a;function So(){return $a||($a=1,ln=uo),ln}var Br={exports:{}},za;function Qr(){return za||(za=1,(function(e,i){var r=fo,n=r.Buffer;function f(a,l){for(var s in a)l[s]=a[s]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(f(r,i),i.Buffer=t);function t(a,l,s){return n(a,l,s)}f(n,t),t.from=function(a,l,s){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,l,s)},t.alloc=function(a,l,s){if(typeof a!="number")throw new TypeError("Argument must be a number");var d=n(a);return l!==void 0?typeof s=="string"?d.fill(l,s):d.fill(l):d.fill(0),d},t.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},t.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(Br,Br.exports)),Br.exports}var $e={},Ua;function Cr(){if(Ua)return $e;Ua=1;function e(_){return Array.isArray?Array.isArray(_):y(_)==="[object Array]"}$e.isArray=e;function i(_){return typeof _=="boolean"}$e.isBoolean=i;function r(_){return _===null}$e.isNull=r;function n(_){return _==null}$e.isNullOrUndefined=n;function f(_){return typeof _=="number"}$e.isNumber=f;function t(_){return typeof _=="string"}$e.isString=t;function a(_){return typeof _=="symbol"}$e.isSymbol=a;function l(_){return _===void 0}$e.isUndefined=l;function s(_){return y(_)==="[object RegExp]"}$e.isRegExp=s;function d(_){return typeof _=="object"&&_!==null}$e.isObject=d;function v(_){return y(_)==="[object Date]"}$e.isDate=v;function h(_){return y(_)==="[object Error]"||_ instanceof Error}$e.isError=h;function o(_){return typeof _=="function"}$e.isFunction=o;function p(_){return _===null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||typeof _=="symbol"||typeof _>"u"}$e.isPrimitive=p,$e.isBuffer=fo.Buffer.isBuffer;function y(_){return Object.prototype.toString.call(_)}return $e}var cn={exports:{}},Wa;function Ll(){return Wa||(Wa=1,(function(e){function i(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var r=Qr().Buffer,n=Zr;function f(t,a,l){t.copy(a,l)}e.exports=(function(){function t(){i(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(l){var s={data:l,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length},t.prototype.unshift=function(l){var s={data:l,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length},t.prototype.shift=function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(l){if(this.length===0)return"";for(var s=this.head,d=""+s.data;s=s.next;)d+=l+s.data;return d},t.prototype.concat=function(l){if(this.length===0)return r.alloc(0);for(var s=r.allocUnsafe(l>>>0),d=this.head,v=0;d;)f(d.data,s,v),v+=d.data.length,d=d.next;return s},t})(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})})(cn)),cn.exports}var un,Ga;function xo(){if(Ga)return un;Ga=1;var e=Jr();function i(f,t){var a=this,l=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return l||s?(t?t(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(n,this,f)):e.nextTick(n,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(d){!t&&d?a._writableState?a._writableState.errorEmitted||(a._writableState.errorEmitted=!0,e.nextTick(n,a,d)):e.nextTick(n,a,d):t&&t(d)}),this)}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function n(f,t){f.emit("error",t)}return un={destroy:i,undestroy:r},un}var fn,Za;function Ml(){return Za||(Za=1,fn=Zr.deprecate),fn}var hn,Ha;function Ro(){if(Ha)return hn;Ha=1;var e=Jr();hn=_;function i(C){var T=this;this.next=null,this.entry=null,this.finish=function(){ee(T,C)}}var r=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:e.nextTick,n;_.WritableState=p;var f=Object.create(Cr());f.inherits=Er();var t={deprecate:Ml()},a=So(),l=Qr().Buffer,s=(typeof ze<"u"?ze:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d(C){return l.from(C)}function v(C){return l.isBuffer(C)||C instanceof s}var h=xo();f.inherits(_,a);function o(){}function p(C,T){n=n||_r(),C=C||{};var B=T instanceof n;this.objectMode=!!C.objectMode,B&&(this.objectMode=this.objectMode||!!C.writableObjectMode);var Y=C.highWaterMark,K=C.writableHighWaterMark,oe=this.objectMode?16:16*1024;Y||Y===0?this.highWaterMark=Y:B&&(K||K===0)?this.highWaterMark=K:this.highWaterMark=oe,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ce=C.decodeStrings===!1;this.decodeStrings=!ce,this.defaultEncoding=C.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(fe){k(T,fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}p.prototype.getBuffer=function(){for(var T=this.bufferedRequest,B=[];T;)B.push(T),T=T.next;return B},(function(){try{Object.defineProperty(p.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var y;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(y=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(C){return y.call(this,C)?!0:this!==_?!1:C&&C._writableState instanceof p}})):y=function(C){return C instanceof this};function _(C){if(n=n||_r(),!y.call(_,this)&&!(this instanceof n))return new _(C);this._writableState=new p(C,this),this.writable=!0,C&&(typeof C.write=="function"&&(this._write=C.write),typeof C.writev=="function"&&(this._writev=C.writev),typeof C.destroy=="function"&&(this._destroy=C.destroy),typeof C.final=="function"&&(this._final=C.final)),a.call(this)}_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function w(C,T){var B=new Error("write after end");C.emit("error",B),e.nextTick(T,B)}function c(C,T,B,Y){var K=!0,oe=!1;return B===null?oe=new TypeError("May not write null values to stream"):typeof B!="string"&&B!==void 0&&!T.objectMode&&(oe=new TypeError("Invalid non-string/buffer chunk")),oe&&(C.emit("error",oe),e.nextTick(Y,oe),K=!1),K}_.prototype.write=function(C,T,B){var Y=this._writableState,K=!1,oe=!Y.objectMode&&v(C);return oe&&!l.isBuffer(C)&&(C=d(C)),typeof T=="function"&&(B=T,T=null),oe?T="buffer":T||(T=Y.defaultEncoding),typeof B!="function"&&(B=o),Y.ended?w(this,B):(oe||c(this,Y,C,B))&&(Y.pendingcb++,K=S(this,Y,oe,C,T,B)),K},_.prototype.cork=function(){var C=this._writableState;C.corked++},_.prototype.uncork=function(){var C=this._writableState;C.corked&&(C.corked--,!C.writing&&!C.corked&&!C.bufferProcessing&&C.bufferedRequest&&L(this,C))},_.prototype.setDefaultEncoding=function(T){if(typeof T=="string"&&(T=T.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((T+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+T);return this._writableState.defaultEncoding=T,this};function m(C,T,B){return!C.objectMode&&C.decodeStrings!==!1&&typeof T=="string"&&(T=l.from(T,B)),T}Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function S(C,T,B,Y,K,oe){if(!B){var ce=m(T,Y,K);Y!==ce&&(B=!0,K="buffer",Y=ce)}var fe=T.objectMode?1:Y.length;T.length+=fe;var Ee=T.length<T.highWaterMark;if(Ee||(T.needDrain=!0),T.writing||T.corked){var pe=T.lastBufferedRequest;T.lastBufferedRequest={chunk:Y,encoding:K,isBuf:B,callback:oe,next:null},pe?pe.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else g(C,T,!1,fe,Y,K,oe);return Ee}function g(C,T,B,Y,K,oe,ce){T.writelen=Y,T.writecb=ce,T.writing=!0,T.sync=!0,B?C._writev(K,T.onwrite):C._write(K,oe,T.onwrite),T.sync=!1}function b(C,T,B,Y,K){--T.pendingcb,B?(e.nextTick(K,Y),e.nextTick(M,C,T),C._writableState.errorEmitted=!0,C.emit("error",Y)):(K(Y),C._writableState.errorEmitted=!0,C.emit("error",Y),M(C,T))}function O(C){C.writing=!1,C.writecb=null,C.length-=C.writelen,C.writelen=0}function k(C,T){var B=C._writableState,Y=B.sync,K=B.writecb;if(O(B),T)b(C,B,Y,T,K);else{var oe=q(B);!oe&&!B.corked&&!B.bufferProcessing&&B.bufferedRequest&&L(C,B),Y?r(D,C,B,oe,K):D(C,B,oe,K)}}function D(C,T,B,Y){B||I(C,T),T.pendingcb--,Y(),M(C,T)}function I(C,T){T.length===0&&T.needDrain&&(T.needDrain=!1,C.emit("drain"))}function L(C,T){T.bufferProcessing=!0;var B=T.bufferedRequest;if(C._writev&&B&&B.next){var Y=T.bufferedRequestCount,K=new Array(Y),oe=T.corkedRequestsFree;oe.entry=B;for(var ce=0,fe=!0;B;)K[ce]=B,B.isBuf||(fe=!1),B=B.next,ce+=1;K.allBuffers=fe,g(C,T,!0,T.length,K,"",oe.finish),T.pendingcb++,T.lastBufferedRequest=null,oe.next?(T.corkedRequestsFree=oe.next,oe.next=null):T.corkedRequestsFree=new i(T),T.bufferedRequestCount=0}else{for(;B;){var Ee=B.chunk,pe=B.encoding,A=B.callback,P=T.objectMode?1:Ee.length;if(g(C,T,!1,P,Ee,pe,A),B=B.next,T.bufferedRequestCount--,T.writing)break}B===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=B,T.bufferProcessing=!1}_.prototype._write=function(C,T,B){B(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(C,T,B){var Y=this._writableState;typeof C=="function"?(B=C,C=null,T=null):typeof T=="function"&&(B=T,T=null),C!=null&&this.write(C,T),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||X(this,Y,B)};function q(C){return C.ending&&C.length===0&&C.bufferedRequest===null&&!C.finished&&!C.writing}function $(C,T){C._final(function(B){T.pendingcb--,B&&C.emit("error",B),T.prefinished=!0,C.emit("prefinish"),M(C,T)})}function N(C,T){!T.prefinished&&!T.finalCalled&&(typeof C._final=="function"?(T.pendingcb++,T.finalCalled=!0,e.nextTick($,C,T)):(T.prefinished=!0,C.emit("prefinish")))}function M(C,T){var B=q(T);return B&&(N(C,T),T.pendingcb===0&&(T.finished=!0,C.emit("finish"))),B}function X(C,T,B){T.ending=!0,M(C,T),B&&(T.finished?e.nextTick(B):C.once("finish",B)),T.ended=!0,C.writable=!1}function ee(C,T,B){var Y=C.entry;for(C.entry=null;Y;){var K=Y.callback;T.pendingcb--,K(B),Y=Y.next}T.corkedRequestsFree.next=C}return Object.defineProperty(_.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(C){this._writableState&&(this._writableState.destroyed=C)}}),_.prototype.destroy=h.destroy,_.prototype._undestroy=h.undestroy,_.prototype._destroy=function(C,T){this.end(),T(C)},hn}var dn,Va;function _r(){if(Va)return dn;Va=1;var e=Jr(),i=Object.keys||function(h){var o=[];for(var p in h)o.push(p);return o};dn=s;var r=Object.create(Cr());r.inherits=Er();var n=ko(),f=Ro();r.inherits(s,n);for(var t=i(f.prototype),a=0;a<t.length;a++){var l=t[a];s.prototype[l]||(s.prototype[l]=f.prototype[l])}function s(h){if(!(this instanceof s))return new s(h);n.call(this,h),f.call(this,h),h&&h.readable===!1&&(this.readable=!1),h&&h.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,h&&h.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",d)}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function d(){this.allowHalfOpen||this._writableState.ended||e.nextTick(v,this)}function v(h){h.end()}return Object.defineProperty(s.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}}),s.prototype._destroy=function(h,o){this.push(null),this.end(),e.nextTick(o,h)},dn}var pn={},Xa;function Ya(){if(Xa)return pn;Xa=1;var e=Qr().Buffer,i=e.isEncoding||function(c){switch(c=""+c,c&&c.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(c){if(!c)return"utf8";for(var m;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(m)return;c=(""+c).toLowerCase(),m=!0}}function n(c){var m=r(c);if(typeof m!="string"&&(e.isEncoding===i||!i(c)))throw new Error("Unknown encoding: "+c);return m||c}pn.StringDecoder=f;function f(c){this.encoding=n(c);var m;switch(this.encoding){case"utf16le":this.text=h,this.end=o,m=4;break;case"utf8":this.fillLast=s,m=4;break;case"base64":this.text=p,this.end=y,m=3;break;default:this.write=_,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(m)}f.prototype.write=function(c){if(c.length===0)return"";var m,S;if(this.lastNeed){if(m=this.fillLast(c),m===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<c.length?m?m+this.text(c,S):this.text(c,S):m||""},f.prototype.end=v,f.prototype.text=d,f.prototype.fillLast=function(c){if(this.lastNeed<=c.length)return c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,c.length),this.lastNeed-=c.length};function t(c){return c<=127?0:c>>5===6?2:c>>4===14?3:c>>3===30?4:c>>6===2?-1:-2}function a(c,m,S){var g=m.length-1;if(g<S)return 0;var b=t(m[g]);return b>=0?(b>0&&(c.lastNeed=b-1),b):--g<S||b===-2?0:(b=t(m[g]),b>=0?(b>0&&(c.lastNeed=b-2),b):--g<S||b===-2?0:(b=t(m[g]),b>=0?(b>0&&(b===2?b=0:c.lastNeed=b-3),b):0))}function l(c,m,S){if((m[0]&192)!==128)return c.lastNeed=0,"";if(c.lastNeed>1&&m.length>1){if((m[1]&192)!==128)return c.lastNeed=1,"";if(c.lastNeed>2&&m.length>2&&(m[2]&192)!==128)return c.lastNeed=2,""}}function s(c){var m=this.lastTotal-this.lastNeed,S=l(this,c);if(S!==void 0)return S;if(this.lastNeed<=c.length)return c.copy(this.lastChar,m,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,m,0,c.length),this.lastNeed-=c.length}function d(c,m){var S=a(this,c,m);if(!this.lastNeed)return c.toString("utf8",m);this.lastTotal=S;var g=c.length-(S-this.lastNeed);return c.copy(this.lastChar,0,g),c.toString("utf8",m,g)}function v(c){var m=c&&c.length?this.write(c):"";return this.lastNeed?m+"":m}function h(c,m){if((c.length-m)%2===0){var S=c.toString("utf16le",m);if(S){var g=S.charCodeAt(S.length-1);if(g>=55296&&g<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=c[c.length-1],c.toString("utf16le",m,c.length-1)}function o(c){var m=c&&c.length?this.write(c):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return m+this.lastChar.toString("utf16le",0,S)}return m}function p(c,m){var S=(c.length-m)%3;return S===0?c.toString("base64",m):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=c[c.length-1]:(this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1]),c.toString("base64",m,c.length-S))}function y(c){var m=c&&c.length?this.write(c):"";return this.lastNeed?m+this.lastChar.toString("base64",0,3-this.lastNeed):m}function _(c){return c.toString(this.encoding)}function w(c){return c&&c.length?this.write(c):""}return pn}var vn,Ka;function ko(){if(Ka)return vn;Ka=1;var e=Jr();vn=m;var i=jl(),r;m.ReadableState=c,co.EventEmitter;var n=function(A,P){return A.listeners(P).length},f=So(),t=Qr().Buffer,a=(typeof ze<"u"?ze:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(A){return t.from(A)}function s(A){return t.isBuffer(A)||A instanceof a}var d=Object.create(Cr());d.inherits=Er();var v=Zr,h=void 0;v&&v.debuglog?h=v.debuglog("stream"):h=function(){};var o=Ll(),p=xo(),y;d.inherits(m,f);var _=["error","close","destroy","pause","resume"];function w(A,P,Q){if(typeof A.prependListener=="function")return A.prependListener(P,Q);!A._events||!A._events[P]?A.on(P,Q):i(A._events[P])?A._events[P].unshift(Q):A._events[P]=[Q,A._events[P]]}function c(A,P){r=r||_r(),A=A||{};var Q=P instanceof r;this.objectMode=!!A.objectMode,Q&&(this.objectMode=this.objectMode||!!A.readableObjectMode);var ae=A.highWaterMark,we=A.readableHighWaterMark,ue=this.objectMode?16:16*1024;ae||ae===0?this.highWaterMark=ae:Q&&(we||we===0)?this.highWaterMark=we:this.highWaterMark=ue,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(y||(y=Ya().StringDecoder),this.decoder=new y(A.encoding),this.encoding=A.encoding)}function m(A){if(r=r||_r(),!(this instanceof m))return new m(A);this._readableState=new c(A,this),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),f.call(this)}Object.defineProperty(m.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),m.prototype.destroy=p.destroy,m.prototype._undestroy=p.undestroy,m.prototype._destroy=function(A,P){this.push(null),P(A)},m.prototype.push=function(A,P){var Q=this._readableState,ae;return Q.objectMode?ae=!0:typeof A=="string"&&(P=P||Q.defaultEncoding,P!==Q.encoding&&(A=t.from(A,P),P=""),ae=!0),S(this,A,P,!1,ae)},m.prototype.unshift=function(A){return S(this,A,null,!0,!1)};function S(A,P,Q,ae,we){var ue=A._readableState;if(P===null)ue.reading=!1,L(A,ue);else{var _e;we||(_e=b(ue,P)),_e?A.emit("error",_e):ue.objectMode||P&&P.length>0?(typeof P!="string"&&!ue.objectMode&&Object.getPrototypeOf(P)!==t.prototype&&(P=l(P)),ae?ue.endEmitted?A.emit("error",new Error("stream.unshift() after end event")):g(A,ue,P,!0):ue.ended?A.emit("error",new Error("stream.push() after EOF")):(ue.reading=!1,ue.decoder&&!Q?(P=ue.decoder.write(P),ue.objectMode||P.length!==0?g(A,ue,P,!1):N(A,ue)):g(A,ue,P,!1))):ae||(ue.reading=!1)}return O(ue)}function g(A,P,Q,ae){P.flowing&&P.length===0&&!P.sync?(A.emit("data",Q),A.read(0)):(P.length+=P.objectMode?1:Q.length,ae?P.buffer.unshift(Q):P.buffer.push(Q),P.needReadable&&q(A)),N(A,P)}function b(A,P){var Q;return!s(P)&&typeof P!="string"&&P!==void 0&&!A.objectMode&&(Q=new TypeError("Invalid non-string/buffer chunk")),Q}function O(A){return!A.ended&&(A.needReadable||A.length<A.highWaterMark||A.length===0)}m.prototype.isPaused=function(){return this._readableState.flowing===!1},m.prototype.setEncoding=function(A){return y||(y=Ya().StringDecoder),this._readableState.decoder=new y(A),this._readableState.encoding=A,this};var k=8388608;function D(A){return A>=k?A=k:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),A}function I(A,P){return A<=0||P.length===0&&P.ended?0:P.objectMode?1:A!==A?P.flowing&&P.length?P.buffer.head.data.length:P.length:(A>P.highWaterMark&&(P.highWaterMark=D(A)),A<=P.length?A:P.ended?P.length:(P.needReadable=!0,0))}m.prototype.read=function(A){h("read",A),A=parseInt(A,10);var P=this._readableState,Q=A;if(A!==0&&(P.emittedReadable=!1),A===0&&P.needReadable&&(P.length>=P.highWaterMark||P.ended))return h("read: emitReadable",P.length,P.ended),P.length===0&&P.ended?fe(this):q(this),null;if(A=I(A,P),A===0&&P.ended)return P.length===0&&fe(this),null;var ae=P.needReadable;h("need readable",ae),(P.length===0||P.length-A<P.highWaterMark)&&(ae=!0,h("length less than watermark",ae)),P.ended||P.reading?(ae=!1,h("reading or ended",ae)):ae&&(h("do read"),P.reading=!0,P.sync=!0,P.length===0&&(P.needReadable=!0),this._read(P.highWaterMark),P.sync=!1,P.reading||(A=I(Q,P)));var we;return A>0?we=Y(A,P):we=null,we===null?(P.needReadable=!0,A=0):P.length-=A,P.length===0&&(P.ended||(P.needReadable=!0),Q!==A&&P.ended&&fe(this)),we!==null&&this.emit("data",we),we};function L(A,P){if(!P.ended){if(P.decoder){var Q=P.decoder.end();Q&&Q.length&&(P.buffer.push(Q),P.length+=P.objectMode?1:Q.length)}P.ended=!0,q(A)}}function q(A){var P=A._readableState;P.needReadable=!1,P.emittedReadable||(h("emitReadable",P.flowing),P.emittedReadable=!0,P.sync?e.nextTick($,A):$(A))}function $(A){h("emit readable"),A.emit("readable"),B(A)}function N(A,P){P.readingMore||(P.readingMore=!0,e.nextTick(M,A,P))}function M(A,P){for(var Q=P.length;!P.reading&&!P.flowing&&!P.ended&&P.length<P.highWaterMark&&(h("maybeReadMore read 0"),A.read(0),Q!==P.length);)Q=P.length;P.readingMore=!1}m.prototype._read=function(A){this.emit("error",new Error("_read() is not implemented"))},m.prototype.pipe=function(A,P){var Q=this,ae=this._readableState;switch(ae.pipesCount){case 0:ae.pipes=A;break;case 1:ae.pipes=[ae.pipes,A];break;default:ae.pipes.push(A);break}ae.pipesCount+=1,h("pipe count=%d opts=%j",ae.pipesCount,P);var we=(!P||P.end!==!1)&&A!==process.stdout&&A!==process.stderr,ue=we?je:J;ae.endEmitted?e.nextTick(ue):Q.once("end",ue),A.on("unpipe",_e);function _e(se,he){h("onunpipe"),se===Q&&he&&he.hasUnpiped===!1&&(he.hasUnpiped=!0,Ce())}function je(){h("onend"),A.end()}var Ie=X(Q);A.on("drain",Ie);var Le=!1;function Ce(){h("cleanup"),A.removeListener("close",qe),A.removeListener("finish",G),A.removeListener("drain",Ie),A.removeListener("error",Ue),A.removeListener("unpipe",_e),Q.removeListener("end",je),Q.removeListener("end",J),Q.removeListener("data",Pe),Le=!0,ae.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&Ie()}var ge=!1;Q.on("data",Pe);function Pe(se){h("ondata"),ge=!1;var he=A.write(se);he===!1&&!ge&&((ae.pipesCount===1&&ae.pipes===A||ae.pipesCount>1&&pe(ae.pipes,A)!==-1)&&!Le&&(h("false write response, pause",ae.awaitDrain),ae.awaitDrain++,ge=!0),Q.pause())}function Ue(se){h("onerror",se),J(),A.removeListener("error",Ue),n(A,"error")===0&&A.emit("error",se)}w(A,"error",Ue);function qe(){A.removeListener("finish",G),J()}A.once("close",qe);function G(){h("onfinish"),A.removeListener("close",qe),J()}A.once("finish",G);function J(){h("unpipe"),Q.unpipe(A)}return A.emit("pipe",Q),ae.flowing||(h("pipe resume"),Q.resume()),A};function X(A){return function(){var P=A._readableState;h("pipeOnDrain",P.awaitDrain),P.awaitDrain&&P.awaitDrain--,P.awaitDrain===0&&n(A,"data")&&(P.flowing=!0,B(A))}}m.prototype.unpipe=function(A){var P=this._readableState,Q={hasUnpiped:!1};if(P.pipesCount===0)return this;if(P.pipesCount===1)return A&&A!==P.pipes?this:(A||(A=P.pipes),P.pipes=null,P.pipesCount=0,P.flowing=!1,A&&A.emit("unpipe",this,Q),this);if(!A){var ae=P.pipes,we=P.pipesCount;P.pipes=null,P.pipesCount=0,P.flowing=!1;for(var ue=0;ue<we;ue++)ae[ue].emit("unpipe",this,{hasUnpiped:!1});return this}var _e=pe(P.pipes,A);return _e===-1?this:(P.pipes.splice(_e,1),P.pipesCount-=1,P.pipesCount===1&&(P.pipes=P.pipes[0]),A.emit("unpipe",this,Q),this)},m.prototype.on=function(A,P){var Q=f.prototype.on.call(this,A,P);if(A==="data")this._readableState.flowing!==!1&&this.resume();else if(A==="readable"){var ae=this._readableState;!ae.endEmitted&&!ae.readableListening&&(ae.readableListening=ae.needReadable=!0,ae.emittedReadable=!1,ae.reading?ae.length&&q(this):e.nextTick(ee,this))}return Q},m.prototype.addListener=m.prototype.on;function ee(A){h("readable nexttick read 0"),A.read(0)}m.prototype.resume=function(){var A=this._readableState;return A.flowing||(h("resume"),A.flowing=!0,C(this,A)),this};function C(A,P){P.resumeScheduled||(P.resumeScheduled=!0,e.nextTick(T,A,P))}function T(A,P){P.reading||(h("resume read 0"),A.read(0)),P.resumeScheduled=!1,P.awaitDrain=0,A.emit("resume"),B(A),P.flowing&&!P.reading&&A.read(0)}m.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function B(A){var P=A._readableState;for(h("flow",P.flowing);P.flowing&&A.read()!==null;);}m.prototype.wrap=function(A){var P=this,Q=this._readableState,ae=!1;A.on("end",function(){if(h("wrapped end"),Q.decoder&&!Q.ended){var _e=Q.decoder.end();_e&&_e.length&&P.push(_e)}P.push(null)}),A.on("data",function(_e){if(h("wrapped data"),Q.decoder&&(_e=Q.decoder.write(_e)),!(Q.objectMode&&_e==null)&&!(!Q.objectMode&&(!_e||!_e.length))){var je=P.push(_e);je||(ae=!0,A.pause())}});for(var we in A)this[we]===void 0&&typeof A[we]=="function"&&(this[we]=(function(_e){return function(){return A[_e].apply(A,arguments)}})(we));for(var ue=0;ue<_.length;ue++)A.on(_[ue],this.emit.bind(this,_[ue]));return this._read=function(_e){h("wrapped _read",_e),ae&&(ae=!1,A.resume())},this},Object.defineProperty(m.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),m._fromList=Y;function Y(A,P){if(P.length===0)return null;var Q;return P.objectMode?Q=P.buffer.shift():!A||A>=P.length?(P.decoder?Q=P.buffer.join(""):P.buffer.length===1?Q=P.buffer.head.data:Q=P.buffer.concat(P.length),P.buffer.clear()):Q=K(A,P.buffer,P.decoder),Q}function K(A,P,Q){var ae;return A<P.head.data.length?(ae=P.head.data.slice(0,A),P.head.data=P.head.data.slice(A)):A===P.head.data.length?ae=P.shift():ae=Q?oe(A,P):ce(A,P),ae}function oe(A,P){var Q=P.head,ae=1,we=Q.data;for(A-=we.length;Q=Q.next;){var ue=Q.data,_e=A>ue.length?ue.length:A;if(_e===ue.length?we+=ue:we+=ue.slice(0,A),A-=_e,A===0){_e===ue.length?(++ae,Q.next?P.head=Q.next:P.head=P.tail=null):(P.head=Q,Q.data=ue.slice(_e));break}++ae}return P.length-=ae,we}function ce(A,P){var Q=t.allocUnsafe(A),ae=P.head,we=1;for(ae.data.copy(Q),A-=ae.data.length;ae=ae.next;){var ue=ae.data,_e=A>ue.length?ue.length:A;if(ue.copy(Q,Q.length-A,0,_e),A-=_e,A===0){_e===ue.length?(++we,ae.next?P.head=ae.next:P.head=P.tail=null):(P.head=ae,ae.data=ue.slice(_e));break}++we}return P.length-=we,Q}function fe(A){var P=A._readableState;if(P.length>0)throw new Error('"endReadable()" called on non-empty stream');P.endEmitted||(P.ended=!0,e.nextTick(Ee,P,A))}function Ee(A,P){!A.endEmitted&&A.length===0&&(A.endEmitted=!0,P.readable=!1,P.emit("end"))}function pe(A,P){for(var Q=0,ae=A.length;Q<ae;Q++)if(A[Q]===P)return Q;return-1}return vn}var mn,Ja;function Co(){if(Ja)return mn;Ja=1,mn=n;var e=_r(),i=Object.create(Cr());i.inherits=Er(),i.inherits(n,e);function r(a,l){var s=this._transformState;s.transforming=!1;var d=s.writecb;if(!d)return this.emit("error",new Error("write callback called multiple times"));s.writechunk=null,s.writecb=null,l!=null&&this.push(l),d(a);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function n(a){if(!(this instanceof n))return new n(a);e.call(this,a),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&(typeof a.transform=="function"&&(this._transform=a.transform),typeof a.flush=="function"&&(this._flush=a.flush)),this.on("prefinish",f)}function f(){var a=this;typeof this._flush=="function"?this._flush(function(l,s){t(a,l,s)}):t(this,null,null)}n.prototype.push=function(a,l){return this._transformState.needTransform=!1,e.prototype.push.call(this,a,l)},n.prototype._transform=function(a,l,s){throw new Error("_transform() is not implemented")},n.prototype._write=function(a,l,s){var d=this._transformState;if(d.writecb=s,d.writechunk=a,d.writeencoding=l,!d.transforming){var v=this._readableState;(d.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},n.prototype._read=function(a){var l=this._transformState;l.writechunk!==null&&l.writecb&&!l.transforming?(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform)):l.needTransform=!0},n.prototype._destroy=function(a,l){var s=this;e.prototype._destroy.call(this,a,function(d){l(d),s.emit("close")})};function t(a,l,s){if(l)return a.emit("error",l);if(s!=null&&a.push(s),a._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(a._transformState.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}return mn}var gn,Qa;function Fl(){if(Qa)return gn;Qa=1,gn=r;var e=Co(),i=Object.create(Cr());i.inherits=Er(),i.inherits(r,e);function r(n){if(!(this instanceof r))return new r(n);e.call(this,n)}return r.prototype._transform=function(n,f,t){t(null,n)},gn}var es;function Ao(){return es||(es=1,(function(e,i){var r=uo;process.env.READABLE_STREAM==="disable"&&r?(e.exports=r,i=e.exports=r.Readable,i.Readable=r.Readable,i.Writable=r.Writable,i.Duplex=r.Duplex,i.Transform=r.Transform,i.PassThrough=r.PassThrough,i.Stream=r):(i=e.exports=ko(),i.Stream=r||i,i.Readable=i,i.Writable=Ro(),i.Duplex=_r(),i.Transform=Co(),i.PassThrough=Fl())})(Fr,Fr.exports)),Fr.exports}var rs;function fr(){if(rs)return He;if(rs=1,He.base64=!0,He.array=!0,He.string=!0,He.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",He.nodebuffer=typeof Buffer<"u",He.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")He.blob=!1;else{var e=new ArrayBuffer(0);try{He.blob=new Blob([e],{type:"application/zip"}).size===0}catch{try{var i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,r=new i;r.append(e),He.blob=r.getBlob("application/zip").size===0}catch{He.blob=!1}}}try{He.nodestream=!!Ao().Readable}catch{He.nodestream=!1}return He}var $r={},ts;function Oo(){if(ts)return $r;ts=1;var e=Ne(),i=fr(),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return $r.encode=function(n){for(var f=[],t,a,l,s,d,v,h,o=0,p=n.length,y=p,_=e.getTypeOf(n)!=="string";o<n.length;)y=p-o,_?(t=n[o++],a=o<p?n[o++]:0,l=o<p?n[o++]:0):(t=n.charCodeAt(o++),a=o<p?n.charCodeAt(o++):0,l=o<p?n.charCodeAt(o++):0),s=t>>2,d=(t&3)<<4|a>>4,v=y>1?(a&15)<<2|l>>6:64,h=y>2?l&63:64,f.push(r.charAt(s)+r.charAt(d)+r.charAt(v)+r.charAt(h));return f.join("")},$r.decode=function(n){var f,t,a,l,s,d,v,h=0,o=0,p="data:";if(n.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");n=n.replace(/[^A-Za-z0-9+/=]/g,"");var y=n.length*3/4;if(n.charAt(n.length-1)===r.charAt(64)&&y--,n.charAt(n.length-2)===r.charAt(64)&&y--,y%1!==0)throw new Error("Invalid base64 input, bad content length.");var _;for(i.uint8array?_=new Uint8Array(y|0):_=new Array(y|0);h<n.length;)l=r.indexOf(n.charAt(h++)),s=r.indexOf(n.charAt(h++)),d=r.indexOf(n.charAt(h++)),v=r.indexOf(n.charAt(h++)),f=l<<2|s>>4,t=(s&15)<<4|d>>2,a=(d&3)<<6|v,_[o++]=f,d!==64&&(_[o++]=t),v!==64&&(_[o++]=a);return _},$r}var yn,ns;function et(){return ns||(ns=1,yn={isNode:typeof Buffer<"u",newBufferFrom:function(e,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,i);if(typeof e=="number")throw new Error('The "data" argument must not be a number');return new Buffer(e,i)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var i=new Buffer(e);return i.fill(0),i},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&typeof e.on=="function"&&typeof e.pause=="function"&&typeof e.resume=="function"}}),yn}var _n,is;function ql(){if(is)return _n;is=1;var e=ze.MutationObserver||ze.WebKitMutationObserver,i;if(process.browser)if(e){var r=0,n=new e(s),f=ze.document.createTextNode("");n.observe(f,{characterData:!0}),i=function(){f.data=r=++r%2}}else if(!ze.setImmediate&&typeof ze.MessageChannel<"u"){var t=new ze.MessageChannel;t.port1.onmessage=s,i=function(){t.port2.postMessage(0)}}else"document"in ze&&"onreadystatechange"in ze.document.createElement("script")?i=function(){var v=ze.document.createElement("script");v.onreadystatechange=function(){s(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},ze.document.documentElement.appendChild(v)}:i=function(){setTimeout(s,0)};else i=function(){process.nextTick(s)};var a,l=[];function s(){a=!0;for(var v,h,o=l.length;o;){for(h=l,l=[],v=-1;++v<o;)h[v]();o=l.length}a=!1}_n=d;function d(v){l.push(v)===1&&!a&&i()}return _n}var wn,as;function Bl(){if(as)return wn;as=1;var e=ql();function i(){}var r={},n=["REJECTED"],f=["FULFILLED"],t=["PENDING"];if(!process.browser)var a=["UNHANDLED"];wn=l;function l(c){if(typeof c!="function")throw new TypeError("resolver must be a function");this.state=t,this.queue=[],this.outcome=void 0,process.browser||(this.handled=a),c!==i&&h(this,c)}l.prototype.finally=function(c){if(typeof c!="function")return this;var m=this.constructor;return this.then(S,g);function S(b){function O(){return b}return m.resolve(c()).then(O)}function g(b){function O(){throw b}return m.resolve(c()).then(O)}},l.prototype.catch=function(c){return this.then(null,c)},l.prototype.then=function(c,m){if(typeof c!="function"&&this.state===f||typeof m!="function"&&this.state===n)return this;var S=new this.constructor(i);if(process.browser||this.handled===a&&(this.handled=null),this.state!==t){var g=this.state===f?c:m;d(S,g,this.outcome)}else this.queue.push(new s(S,c,m));return S};function s(c,m,S){this.promise=c,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}s.prototype.callFulfilled=function(c){r.resolve(this.promise,c)},s.prototype.otherCallFulfilled=function(c){d(this.promise,this.onFulfilled,c)},s.prototype.callRejected=function(c){r.reject(this.promise,c)},s.prototype.otherCallRejected=function(c){d(this.promise,this.onRejected,c)};function d(c,m,S){e(function(){var g;try{g=m(S)}catch(b){return r.reject(c,b)}g===c?r.reject(c,new TypeError("Cannot resolve promise with itself")):r.resolve(c,g)})}r.resolve=function(c,m){var S=o(v,m);if(S.status==="error")return r.reject(c,S.value);var g=S.value;if(g)h(c,g);else{c.state=f,c.outcome=m;for(var b=-1,O=c.queue.length;++b<O;)c.queue[b].callFulfilled(m)}return c},r.reject=function(c,m){c.state=n,c.outcome=m,process.browser||c.handled===a&&e(function(){c.handled===a&&process.emit("unhandledRejection",m,c)});for(var S=-1,g=c.queue.length;++S<g;)c.queue[S].callRejected(m);return c};function v(c){var m=c&&c.then;if(c&&(typeof c=="object"||typeof c=="function")&&typeof m=="function")return function(){m.apply(c,arguments)}}function h(c,m){var S=!1;function g(D){S||(S=!0,r.reject(c,D))}function b(D){S||(S=!0,r.resolve(c,D))}function O(){m(b,g)}var k=o(O);k.status==="error"&&g(k.value)}function o(c,m){var S={};try{S.value=c(m),S.status="success"}catch(g){S.status="error",S.value=g}return S}l.resolve=p;function p(c){return c instanceof this?c:r.resolve(new this(i),c)}l.reject=y;function y(c){var m=new this(i);return r.reject(m,c)}l.all=_;function _(c){var m=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=c.length,g=!1;if(!S)return this.resolve([]);for(var b=new Array(S),O=0,k=-1,D=new this(i);++k<S;)I(c[k],k);return D;function I(L,q){m.resolve(L).then($,function(N){g||(g=!0,r.reject(D,N))});function $(N){b[q]=N,++O===S&&!g&&(g=!0,r.resolve(D,b))}}}l.race=w;function w(c){var m=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=c.length,g=!1;if(!S)return this.resolve([]);for(var b=-1,O=new this(i);++b<S;)k(c[b]);return O;function k(D){m.resolve(D).then(function(I){g||(g=!0,r.resolve(O,I))},function(I){g||(g=!0,r.reject(O,I))})}}return wn}var bn,ss;function Ar(){if(ss)return bn;ss=1;var e=null;return typeof Promise<"u"?e=Promise:e=Bl(),bn={Promise:e},bn}var En={},os;function $l(){return os||(os=1,(function(e,i){if(e.setImmediate)return;var r=1,n={},f=!1,t=e.document,a;function l(m){typeof m!="function"&&(m=new Function(""+m));for(var S=new Array(arguments.length-1),g=0;g<S.length;g++)S[g]=arguments[g+1];var b={callback:m,args:S};return n[r]=b,a(r),r++}function s(m){delete n[m]}function d(m){var S=m.callback,g=m.args;switch(g.length){case 0:S();break;case 1:S(g[0]);break;case 2:S(g[0],g[1]);break;case 3:S(g[0],g[1],g[2]);break;default:S.apply(i,g);break}}function v(m){if(f)setTimeout(v,0,m);else{var S=n[m];if(S){f=!0;try{d(S)}finally{s(m),f=!1}}}}function h(){a=function(m){process.nextTick(function(){v(m)})}}function o(){if(e.postMessage&&!e.importScripts){var m=!0,S=e.onmessage;return e.onmessage=function(){m=!1},e.postMessage("","*"),e.onmessage=S,m}}function p(){var m="setImmediate$"+Math.random()+"$",S=function(g){g.source===e&&typeof g.data=="string"&&g.data.indexOf(m)===0&&v(+g.data.slice(m.length))};e.addEventListener?e.addEventListener("message",S,!1):e.attachEvent("onmessage",S),a=function(g){e.postMessage(m+g,"*")}}function y(){var m=new MessageChannel;m.port1.onmessage=function(S){var g=S.data;v(g)},a=function(S){m.port2.postMessage(S)}}function _(){var m=t.documentElement;a=function(S){var g=t.createElement("script");g.onreadystatechange=function(){v(S),g.onreadystatechange=null,m.removeChild(g),g=null},m.appendChild(g)}}function w(){a=function(m){setTimeout(v,0,m)}}var c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,{}.toString.call(e.process)==="[object process]"?h():o()?p():e.MessageChannel?y():t&&"onreadystatechange"in t.createElement("script")?_():w(),c.setImmediate=l,c.clearImmediate=s})(typeof self>"u"?typeof ze>"u"?En:ze:self)),En}var ls;function Ne(){return ls||(ls=1,(function(e){var i=fr(),r=Oo(),n=et(),f=Ar();$l();function t(o){var p=null;return i.uint8array?p=new Uint8Array(o.length):p=new Array(o.length),l(o,p)}e.newBlob=function(o,p){e.checkSupport("blob");try{return new Blob([o],{type:p})}catch{try{var y=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,_=new y;return _.append(o),_.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};function a(o){return o}function l(o,p){for(var y=0;y<o.length;++y)p[y]=o.charCodeAt(y)&255;return p}var s={stringifyByChunk:function(o,p,y){var _=[],w=0,c=o.length;if(c<=y)return String.fromCharCode.apply(null,o);for(;w<c;)p==="array"||p==="nodebuffer"?_.push(String.fromCharCode.apply(null,o.slice(w,Math.min(w+y,c)))):_.push(String.fromCharCode.apply(null,o.subarray(w,Math.min(w+y,c)))),w+=y;return _.join("")},stringifyByChar:function(o){for(var p="",y=0;y<o.length;y++)p+=String.fromCharCode(o[y]);return p},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}})()}};function d(o){var p=65536,y=e.getTypeOf(o),_=!0;if(y==="uint8array"?_=s.applyCanBeUsed.uint8array:y==="nodebuffer"&&(_=s.applyCanBeUsed.nodebuffer),_)for(;p>1;)try{return s.stringifyByChunk(o,y,p)}catch{p=Math.floor(p/2)}return s.stringifyByChar(o)}e.applyFromCharCode=d;function v(o,p){for(var y=0;y<o.length;y++)p[y]=o[y];return p}var h={};h.string={string:a,array:function(o){return l(o,new Array(o.length))},arraybuffer:function(o){return h.string.uint8array(o).buffer},uint8array:function(o){return l(o,new Uint8Array(o.length))},nodebuffer:function(o){return l(o,n.allocBuffer(o.length))}},h.array={string:d,array:a,arraybuffer:function(o){return new Uint8Array(o).buffer},uint8array:function(o){return new Uint8Array(o)},nodebuffer:function(o){return n.newBufferFrom(o)}},h.arraybuffer={string:function(o){return d(new Uint8Array(o))},array:function(o){return v(new Uint8Array(o),new Array(o.byteLength))},arraybuffer:a,uint8array:function(o){return new Uint8Array(o)},nodebuffer:function(o){return n.newBufferFrom(new Uint8Array(o))}},h.uint8array={string:d,array:function(o){return v(o,new Array(o.length))},arraybuffer:function(o){return o.buffer},uint8array:a,nodebuffer:function(o){return n.newBufferFrom(o)}},h.nodebuffer={string:d,array:function(o){return v(o,new Array(o.length))},arraybuffer:function(o){return h.nodebuffer.uint8array(o).buffer},uint8array:function(o){return v(o,new Uint8Array(o.length))},nodebuffer:a},e.transformTo=function(o,p){if(p||(p=""),!o)return p;e.checkSupport(o);var y=e.getTypeOf(p),_=h[y][o](p);return _},e.resolve=function(o){for(var p=o.split("/"),y=[],_=0;_<p.length;_++){var w=p[_];w==="."||w===""&&_!==0&&_!==p.length-1||(w===".."?y.pop():y.push(w))}return y.join("/")},e.getTypeOf=function(o){if(typeof o=="string")return"string";if(Object.prototype.toString.call(o)==="[object Array]")return"array";if(i.nodebuffer&&n.isBuffer(o))return"nodebuffer";if(i.uint8array&&o instanceof Uint8Array)return"uint8array";if(i.arraybuffer&&o instanceof ArrayBuffer)return"arraybuffer"},e.checkSupport=function(o){var p=i[o.toLowerCase()];if(!p)throw new Error(o+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(o){var p="",y,_;for(_=0;_<(o||"").length;_++)y=o.charCodeAt(_),p+="\\x"+(y<16?"0":"")+y.toString(16).toUpperCase();return p},e.delay=function(o,p,y){setImmediate(function(){o.apply(y||null,p||[])})},e.inherits=function(o,p){var y=function(){};y.prototype=p.prototype,o.prototype=new y},e.extend=function(){var o={},p,y;for(p=0;p<arguments.length;p++)for(y in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],y)&&typeof o[y]>"u"&&(o[y]=arguments[p][y]);return o},e.prepareContent=function(o,p,y,_,w){var c=f.Promise.resolve(p).then(function(m){var S=i.blob&&(m instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(m))!==-1);return S&&typeof FileReader<"u"?new f.Promise(function(g,b){var O=new FileReader;O.onload=function(k){g(k.target.result)},O.onerror=function(k){b(k.target.error)},O.readAsArrayBuffer(m)}):m});return c.then(function(m){var S=e.getTypeOf(m);return S?(S==="arraybuffer"?m=e.transformTo("uint8array",m):S==="string"&&(w?m=r.decode(m):y&&_!==!0&&(m=t(m))),m):f.Promise.reject(new Error("Can't read the data of '"+o+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}})(sn)),sn}var Sn,cs;function Je(){if(cs)return Sn;cs=1;function e(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}return e.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return this.isFinished?!1:(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,r){return this._listeners[i].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,r){if(this._listeners[i])for(var n=0;n<this._listeners[i].length;n++)this._listeners[i][n].call(this,r)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var r=this;return i.on("data",function(n){r.processChunk(n)}),i.on("end",function(){r.end()}),i.on("error",function(n){r.error(n)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var i=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,r){return this.extraStreamInfo[i]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},Sn=e,Sn}var us;function Or(){return us||(us=1,(function(e){for(var i=Ne(),r=fr(),n=et(),f=Je(),t=new Array(256),a=0;a<256;a++)t[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;t[254]=t[254]=1;var l=function(o){var p,y,_,w,c,m=o.length,S=0;for(w=0;w<m;w++)y=o.charCodeAt(w),(y&64512)===55296&&w+1<m&&(_=o.charCodeAt(w+1),(_&64512)===56320&&(y=65536+(y-55296<<10)+(_-56320),w++)),S+=y<128?1:y<2048?2:y<65536?3:4;for(r.uint8array?p=new Uint8Array(S):p=new Array(S),c=0,w=0;c<S;w++)y=o.charCodeAt(w),(y&64512)===55296&&w+1<m&&(_=o.charCodeAt(w+1),(_&64512)===56320&&(y=65536+(y-55296<<10)+(_-56320),w++)),y<128?p[c++]=y:y<2048?(p[c++]=192|y>>>6,p[c++]=128|y&63):y<65536?(p[c++]=224|y>>>12,p[c++]=128|y>>>6&63,p[c++]=128|y&63):(p[c++]=240|y>>>18,p[c++]=128|y>>>12&63,p[c++]=128|y>>>6&63,p[c++]=128|y&63);return p},s=function(o,p){var y;for(p=p||o.length,p>o.length&&(p=o.length),y=p-1;y>=0&&(o[y]&192)===128;)y--;return y<0||y===0?p:y+t[o[y]]>p?y:p},d=function(o){var p,y,_,w,c=o.length,m=new Array(c*2);for(y=0,p=0;p<c;){if(_=o[p++],_<128){m[y++]=_;continue}if(w=t[_],w>4){m[y++]=65533,p+=w-1;continue}for(_&=w===2?31:w===3?15:7;w>1&&p<c;)_=_<<6|o[p++]&63,w--;if(w>1){m[y++]=65533;continue}_<65536?m[y++]=_:(_-=65536,m[y++]=55296|_>>10&1023,m[y++]=56320|_&1023)}return m.length!==y&&(m.subarray?m=m.subarray(0,y):m.length=y),i.applyFromCharCode(m)};e.utf8encode=function(p){return r.nodebuffer?n.newBufferFrom(p,"utf-8"):l(p)},e.utf8decode=function(p){return r.nodebuffer?i.transformTo("nodebuffer",p).toString("utf-8"):(p=i.transformTo(r.uint8array?"uint8array":"array",p),d(p))};function v(){f.call(this,"utf-8 decode"),this.leftOver=null}i.inherits(v,f),v.prototype.processChunk=function(o){var p=i.transformTo(r.uint8array?"uint8array":"array",o.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var y=p;p=new Uint8Array(y.length+this.leftOver.length),p.set(this.leftOver,0),p.set(y,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var _=s(p),w=p;_!==p.length&&(r.uint8array?(w=p.subarray(0,_),this.leftOver=p.subarray(_,p.length)):(w=p.slice(0,_),this.leftOver=p.slice(_,p.length))),this.push({data:e.utf8decode(w),meta:o.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=v;function h(){f.call(this,"utf-8 encode")}i.inherits(h,f),h.prototype.processChunk=function(o){this.push({data:e.utf8encode(o.data),meta:o.meta})},e.Utf8EncodeWorker=h})(an)),an}var xn,fs;function zl(){if(fs)return xn;fs=1;var e=Je(),i=Ne();function r(n){e.call(this,"ConvertWorker to "+n),this.destType=n}return i.inherits(r,e),r.prototype.processChunk=function(n){this.push({data:i.transformTo(this.destType,n.data),meta:n.meta})},xn=r,xn}var Rn,hs;function Ul(){if(hs)return Rn;hs=1;var e=Ao().Readable,i=Ne();i.inherits(r,e);function r(n,f,t){e.call(this,f),this._helper=n;var a=this;n.on("data",function(l,s){a.push(l)||a._helper.pause(),t&&t(s)}).on("error",function(l){a.emit("error",l)}).on("end",function(){a.push(null)})}return r.prototype._read=function(){this._helper.resume()},Rn=r,Rn}var kn,ds;function To(){if(ds)return kn;ds=1;var e=Ne(),i=zl(),r=Je(),n=Oo(),f=fr(),t=Ar(),a=null;if(f.nodestream)try{a=Ul()}catch{}function l(h,o,p){switch(h){case"blob":return e.newBlob(e.transformTo("arraybuffer",o),p);case"base64":return n.encode(o);default:return e.transformTo(h,o)}}function s(h,o){var p,y=0,_=null,w=0;for(p=0;p<o.length;p++)w+=o[p].length;switch(h){case"string":return o.join("");case"array":return Array.prototype.concat.apply([],o);case"uint8array":for(_=new Uint8Array(w),p=0;p<o.length;p++)_.set(o[p],y),y+=o[p].length;return _;case"nodebuffer":return Buffer.concat(o);default:throw new Error("concat : unsupported type '"+h+"'")}}function d(h,o){return new t.Promise(function(p,y){var _=[],w=h._internalType,c=h._outputType,m=h._mimeType;h.on("data",function(S,g){_.push(S),o&&o(g)}).on("error",function(S){_=[],y(S)}).on("end",function(){try{var S=l(c,s(w,_),m);p(S)}catch(g){y(g)}_=[]}).resume()})}function v(h,o,p){var y=o;switch(o){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string";break}try{this._internalType=y,this._outputType=o,this._mimeType=p,e.checkSupport(y),this._worker=h.pipe(new i(y)),h.lock()}catch(_){this._worker=new r("error"),this._worker.error(_)}}return v.prototype={accumulate:function(h){return d(this,h)},on:function(h,o){var p=this;return h==="data"?this._worker.on(h,function(y){o.call(p,y.data,y.meta)}):this._worker.on(h,function(){e.delay(o,arguments,p)}),this},resume:function(){return e.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(h){if(e.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new a(this,{objectMode:this._outputType!=="nodebuffer"},h)}},kn=v,kn}var Xe={},ps;function Io(){return ps||(ps=1,Xe.base64=!1,Xe.binary=!1,Xe.dir=!1,Xe.createFolders=!0,Xe.date=null,Xe.compression=null,Xe.compressionOptions=null,Xe.comment=null,Xe.unixPermissions=null,Xe.dosPermissions=null),Xe}var Cn,vs;function Po(){if(vs)return Cn;vs=1;var e=Ne(),i=Je(),r=16*1024;function n(f){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(a){t.dataIsReady=!0,t.data=a,t.max=a&&a.length||0,t.type=e.getTypeOf(a),t.isPaused||t._tickAndRepeat()},function(a){t.error(a)})}return e.inherits(n,i),n.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return i.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,e.delay(this._tickAndRepeat,[],this)),!0):!1},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(e.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=r,t=null,a=Math.min(this.max,this.index+f);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,a);break;case"uint8array":t=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":t=this.data.slice(this.index,a);break}return this.index=a,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},Cn=n,Cn}var An,ms;function xi(){if(ms)return An;ms=1;var e=Ne();function i(){for(var t,a=[],l=0;l<256;l++){t=l;for(var s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;a[l]=t}return a}var r=i();function n(t,a,l,s){var d=r,v=s+l;t=t^-1;for(var h=s;h<v;h++)t=t>>>8^d[(t^a[h])&255];return t^-1}function f(t,a,l,s){var d=r,v=s+l;t=t^-1;for(var h=s;h<v;h++)t=t>>>8^d[(t^a.charCodeAt(h))&255];return t^-1}return An=function(a,l){if(typeof a>"u"||!a.length)return 0;var s=e.getTypeOf(a)!=="string";return s?n(l|0,a,a.length,0):f(l|0,a,a.length,0)},An}var On,gs;function Do(){if(gs)return On;gs=1;var e=Je(),i=xi(),r=Ne();function n(){e.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}return r.inherits(n,e),n.prototype.processChunk=function(f){this.streamInfo.crc32=i(f.data,this.streamInfo.crc32||0),this.push(f)},On=n,On}var Tn,ys;function Wl(){if(ys)return Tn;ys=1;var e=Ne(),i=Je();function r(n){i.call(this,"DataLengthProbe for "+n),this.propName=n,this.withStreamInfo(n,0)}return e.inherits(r,i),r.prototype.processChunk=function(n){if(n){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+n.data.length}i.prototype.processChunk.call(this,n)},Tn=r,Tn}var In,_s;function Ri(){if(_s)return In;_s=1;var e=Ar(),i=Po(),r=Do(),n=Wl();function f(t,a,l,s,d){this.compressedSize=t,this.uncompressedSize=a,this.crc32=l,this.compression=s,this.compressedContent=d}return f.prototype={getContentWorker:function(){var t=new i(e.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new n("data_length")),a=this;return t.on("end",function(){if(this.streamInfo.data_length!==a.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new i(e.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(t,a,l){return t.pipe(new r).pipe(new n("uncompressedSize")).pipe(a.compressWorker(l)).pipe(new n("compressedSize")).withStreamInfo("compression",a)},In=f,In}var Pn,ws;function Gl(){if(ws)return Pn;ws=1;var e=To(),i=Po(),r=Or(),n=Ri(),f=Je(),t=function(d,v,h){this.name=d,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=v,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}};t.prototype={internalStream:function(d){var v=null,h="string";try{if(!d)throw new Error("No output type specified.");h=d.toLowerCase();var o=h==="string"||h==="text";(h==="binarystring"||h==="text")&&(h="string"),v=this._decompressWorker();var p=!this._dataBinary;p&&!o&&(v=v.pipe(new r.Utf8EncodeWorker)),!p&&o&&(v=v.pipe(new r.Utf8DecodeWorker))}catch(y){v=new f("error"),v.error(y)}return new e(v,h,"")},async:function(d,v){return this.internalStream(d).accumulate(v)},nodeStream:function(d,v){return this.internalStream(d||"nodebuffer").toNodejsStream(v)},_compressWorker:function(d,v){if(this._data instanceof n&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new r.Utf8EncodeWorker)),n.createWorkerFrom(h,d,v)},_decompressWorker:function(){return this._data instanceof n?this._data.getContentWorker():this._data instanceof f?this._data:new i(this._data)}};for(var a=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<a.length;s++)t.prototype[a[s]]=l;return Pn=t,Pn}var Dn={},zr={},xr={},Nn={},bs;function hr(){return bs||(bs=1,(function(e){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(t,a){return Object.prototype.hasOwnProperty.call(t,a)}e.assign=function(t){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var s in l)r(l,s)&&(t[s]=l[s])}}return t},e.shrinkBuf=function(t,a){return t.length===a?t:t.subarray?t.subarray(0,a):(t.length=a,t)};var n={arraySet:function(t,a,l,s,d){if(a.subarray&&t.subarray){t.set(a.subarray(l,l+s),d);return}for(var v=0;v<s;v++)t[d+v]=a[l+v]},flattenChunks:function(t){var a,l,s,d,v,h;for(s=0,a=0,l=t.length;a<l;a++)s+=t[a].length;for(h=new Uint8Array(s),d=0,a=0,l=t.length;a<l;a++)v=t[a],h.set(v,d),d+=v.length;return h}},f={arraySet:function(t,a,l,s,d){for(var v=0;v<s;v++)t[d+v]=a[l+v]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,f))},e.setTyped(i)})(Nn)),Nn}var mr={},Qe={},dr={},Es;function Zl(){if(Es)return dr;Es=1;var e=hr(),i=4,r=0,n=1,f=2;function t(R){for(var re=R.length;--re>=0;)R[re]=0}var a=0,l=1,s=2,d=3,v=258,h=29,o=256,p=o+1+h,y=30,_=19,w=2*p+1,c=15,m=16,S=7,g=256,b=16,O=17,k=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=512,N=new Array((p+2)*2);t(N);var M=new Array(y*2);t(M);var X=new Array($);t(X);var ee=new Array(v-d+1);t(ee);var C=new Array(h);t(C);var T=new Array(y);t(T);function B(R,re,le,me,F){this.static_tree=R,this.extra_bits=re,this.extra_base=le,this.elems=me,this.max_length=F,this.has_stree=R&&R.length}var Y,K,oe;function ce(R,re){this.dyn_tree=R,this.max_code=0,this.stat_desc=re}function fe(R){return R<256?X[R]:X[256+(R>>>7)]}function Ee(R,re){R.pending_buf[R.pending++]=re&255,R.pending_buf[R.pending++]=re>>>8&255}function pe(R,re,le){R.bi_valid>m-le?(R.bi_buf|=re<<R.bi_valid&65535,Ee(R,R.bi_buf),R.bi_buf=re>>m-R.bi_valid,R.bi_valid+=le-m):(R.bi_buf|=re<<R.bi_valid&65535,R.bi_valid+=le)}function A(R,re,le){pe(R,le[re*2],le[re*2+1])}function P(R,re){var le=0;do le|=R&1,R>>>=1,le<<=1;while(--re>0);return le>>>1}function Q(R){R.bi_valid===16?(Ee(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):R.bi_valid>=8&&(R.pending_buf[R.pending++]=R.bi_buf&255,R.bi_buf>>=8,R.bi_valid-=8)}function ae(R,re){var le=re.dyn_tree,me=re.max_code,F=re.stat_desc.static_tree,V=re.stat_desc.has_stree,E=re.stat_desc.extra_bits,te=re.stat_desc.extra_base,be=re.stat_desc.max_length,u,Z,H,x,j,W,ye=0;for(x=0;x<=c;x++)R.bl_count[x]=0;for(le[R.heap[R.heap_max]*2+1]=0,u=R.heap_max+1;u<w;u++)Z=R.heap[u],x=le[le[Z*2+1]*2+1]+1,x>be&&(x=be,ye++),le[Z*2+1]=x,!(Z>me)&&(R.bl_count[x]++,j=0,Z>=te&&(j=E[Z-te]),W=le[Z*2],R.opt_len+=W*(x+j),V&&(R.static_len+=W*(F[Z*2+1]+j)));if(ye!==0){do{for(x=be-1;R.bl_count[x]===0;)x--;R.bl_count[x]--,R.bl_count[x+1]+=2,R.bl_count[be]--,ye-=2}while(ye>0);for(x=be;x!==0;x--)for(Z=R.bl_count[x];Z!==0;)H=R.heap[--u],!(H>me)&&(le[H*2+1]!==x&&(R.opt_len+=(x-le[H*2+1])*le[H*2],le[H*2+1]=x),Z--)}}function we(R,re,le){var me=new Array(c+1),F=0,V,E;for(V=1;V<=c;V++)me[V]=F=F+le[V-1]<<1;for(E=0;E<=re;E++){var te=R[E*2+1];te!==0&&(R[E*2]=P(me[te]++,te))}}function ue(){var R,re,le,me,F,V=new Array(c+1);for(le=0,me=0;me<h-1;me++)for(C[me]=le,R=0;R<1<<D[me];R++)ee[le++]=me;for(ee[le-1]=me,F=0,me=0;me<16;me++)for(T[me]=F,R=0;R<1<<I[me];R++)X[F++]=me;for(F>>=7;me<y;me++)for(T[me]=F<<7,R=0;R<1<<I[me]-7;R++)X[256+F++]=me;for(re=0;re<=c;re++)V[re]=0;for(R=0;R<=143;)N[R*2+1]=8,R++,V[8]++;for(;R<=255;)N[R*2+1]=9,R++,V[9]++;for(;R<=279;)N[R*2+1]=7,R++,V[7]++;for(;R<=287;)N[R*2+1]=8,R++,V[8]++;for(we(N,p+1,V),R=0;R<y;R++)M[R*2+1]=5,M[R*2]=P(R,5);Y=new B(N,D,o+1,p,c),K=new B(M,I,0,y,c),oe=new B(new Array(0),L,0,_,S)}function _e(R){var re;for(re=0;re<p;re++)R.dyn_ltree[re*2]=0;for(re=0;re<y;re++)R.dyn_dtree[re*2]=0;for(re=0;re<_;re++)R.bl_tree[re*2]=0;R.dyn_ltree[g*2]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function je(R){R.bi_valid>8?Ee(R,R.bi_buf):R.bi_valid>0&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function Ie(R,re,le,me){je(R),Ee(R,le),Ee(R,~le),e.arraySet(R.pending_buf,R.window,re,le,R.pending),R.pending+=le}function Le(R,re,le,me){var F=re*2,V=le*2;return R[F]<R[V]||R[F]===R[V]&&me[re]<=me[le]}function Ce(R,re,le){for(var me=R.heap[le],F=le<<1;F<=R.heap_len&&(F<R.heap_len&&Le(re,R.heap[F+1],R.heap[F],R.depth)&&F++,!Le(re,me,R.heap[F],R.depth));)R.heap[le]=R.heap[F],le=F,F<<=1;R.heap[le]=me}function ge(R,re,le){var me,F,V=0,E,te;if(R.last_lit!==0)do me=R.pending_buf[R.d_buf+V*2]<<8|R.pending_buf[R.d_buf+V*2+1],F=R.pending_buf[R.l_buf+V],V++,me===0?A(R,F,re):(E=ee[F],A(R,E+o+1,re),te=D[E],te!==0&&(F-=C[E],pe(R,F,te)),me--,E=fe(me),A(R,E,le),te=I[E],te!==0&&(me-=T[E],pe(R,me,te)));while(V<R.last_lit);A(R,g,re)}function Pe(R,re){var le=re.dyn_tree,me=re.stat_desc.static_tree,F=re.stat_desc.has_stree,V=re.stat_desc.elems,E,te,be=-1,u;for(R.heap_len=0,R.heap_max=w,E=0;E<V;E++)le[E*2]!==0?(R.heap[++R.heap_len]=be=E,R.depth[E]=0):le[E*2+1]=0;for(;R.heap_len<2;)u=R.heap[++R.heap_len]=be<2?++be:0,le[u*2]=1,R.depth[u]=0,R.opt_len--,F&&(R.static_len-=me[u*2+1]);for(re.max_code=be,E=R.heap_len>>1;E>=1;E--)Ce(R,le,E);u=V;do E=R.heap[1],R.heap[1]=R.heap[R.heap_len--],Ce(R,le,1),te=R.heap[1],R.heap[--R.heap_max]=E,R.heap[--R.heap_max]=te,le[u*2]=le[E*2]+le[te*2],R.depth[u]=(R.depth[E]>=R.depth[te]?R.depth[E]:R.depth[te])+1,le[E*2+1]=le[te*2+1]=u,R.heap[1]=u++,Ce(R,le,1);while(R.heap_len>=2);R.heap[--R.heap_max]=R.heap[1],ae(R,re),we(le,be,R.bl_count)}function Ue(R,re,le){var me,F=-1,V,E=re[1],te=0,be=7,u=4;for(E===0&&(be=138,u=3),re[(le+1)*2+1]=65535,me=0;me<=le;me++)V=E,E=re[(me+1)*2+1],!(++te<be&&V===E)&&(te<u?R.bl_tree[V*2]+=te:V!==0?(V!==F&&R.bl_tree[V*2]++,R.bl_tree[b*2]++):te<=10?R.bl_tree[O*2]++:R.bl_tree[k*2]++,te=0,F=V,E===0?(be=138,u=3):V===E?(be=6,u=3):(be=7,u=4))}function qe(R,re,le){var me,F=-1,V,E=re[1],te=0,be=7,u=4;for(E===0&&(be=138,u=3),me=0;me<=le;me++)if(V=E,E=re[(me+1)*2+1],!(++te<be&&V===E)){if(te<u)do A(R,V,R.bl_tree);while(--te!==0);else V!==0?(V!==F&&(A(R,V,R.bl_tree),te--),A(R,b,R.bl_tree),pe(R,te-3,2)):te<=10?(A(R,O,R.bl_tree),pe(R,te-3,3)):(A(R,k,R.bl_tree),pe(R,te-11,7));te=0,F=V,E===0?(be=138,u=3):V===E?(be=6,u=3):(be=7,u=4)}}function G(R){var re;for(Ue(R,R.dyn_ltree,R.l_desc.max_code),Ue(R,R.dyn_dtree,R.d_desc.max_code),Pe(R,R.bl_desc),re=_-1;re>=3&&R.bl_tree[q[re]*2+1]===0;re--);return R.opt_len+=3*(re+1)+5+5+4,re}function J(R,re,le,me){var F;for(pe(R,re-257,5),pe(R,le-1,5),pe(R,me-4,4),F=0;F<me;F++)pe(R,R.bl_tree[q[F]*2+1],3);qe(R,R.dyn_ltree,re-1),qe(R,R.dyn_dtree,le-1)}function se(R){var re=4093624447,le;for(le=0;le<=31;le++,re>>>=1)if(re&1&&R.dyn_ltree[le*2]!==0)return r;if(R.dyn_ltree[18]!==0||R.dyn_ltree[20]!==0||R.dyn_ltree[26]!==0)return n;for(le=32;le<o;le++)if(R.dyn_ltree[le*2]!==0)return n;return r}var he=!1;function xe(R){he||(ue(),he=!0),R.l_desc=new ce(R.dyn_ltree,Y),R.d_desc=new ce(R.dyn_dtree,K),R.bl_desc=new ce(R.bl_tree,oe),R.bi_buf=0,R.bi_valid=0,_e(R)}function Se(R,re,le,me){pe(R,(a<<1)+(me?1:0),3),Ie(R,re,le)}function Ae(R){pe(R,l<<1,3),A(R,g,N),Q(R)}function Te(R,re,le,me){var F,V,E=0;R.level>0?(R.strm.data_type===f&&(R.strm.data_type=se(R)),Pe(R,R.l_desc),Pe(R,R.d_desc),E=G(R),F=R.opt_len+3+7>>>3,V=R.static_len+3+7>>>3,V<=F&&(F=V)):F=V=le+5,le+4<=F&&re!==-1?Se(R,re,le,me):R.strategy===i||V===F?(pe(R,(l<<1)+(me?1:0),3),ge(R,N,M)):(pe(R,(s<<1)+(me?1:0),3),J(R,R.l_desc.max_code+1,R.d_desc.max_code+1,E+1),ge(R,R.dyn_ltree,R.dyn_dtree)),_e(R),me&&je(R)}function lr(R,re,le){return R.pending_buf[R.d_buf+R.last_lit*2]=re>>>8&255,R.pending_buf[R.d_buf+R.last_lit*2+1]=re&255,R.pending_buf[R.l_buf+R.last_lit]=le&255,R.last_lit++,re===0?R.dyn_ltree[le*2]++:(R.matches++,re--,R.dyn_ltree[(ee[le]+o+1)*2]++,R.dyn_dtree[fe(re)*2]++),R.last_lit===R.lit_bufsize-1}return dr._tr_init=xe,dr._tr_stored_block=Se,dr._tr_flush_block=Te,dr._tr_tally=lr,dr._tr_align=Ae,dr}var jn,Ss;function No(){if(Ss)return jn;Ss=1;function e(i,r,n,f){for(var t=i&65535|0,a=i>>>16&65535|0,l=0;n!==0;){l=n>2e3?2e3:n,n-=l;do t=t+r[f++]|0,a=a+t|0;while(--l);t%=65521,a%=65521}return t|a<<16|0}return jn=e,jn}var Ln,xs;function jo(){if(xs)return Ln;xs=1;function e(){for(var n,f=[],t=0;t<256;t++){n=t;for(var a=0;a<8;a++)n=n&1?3988292384^n>>>1:n>>>1;f[t]=n}return f}var i=e();function r(n,f,t,a){var l=i,s=a+t;n^=-1;for(var d=a;d<s;d++)n=n>>>8^l[(n^f[d])&255];return n^-1}return Ln=r,Ln}var Mn,Rs;function ki(){return Rs||(Rs=1,Mn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),Mn}var ks;function Hl(){if(ks)return Qe;ks=1;var e=hr(),i=Zl(),r=No(),n=jo(),f=ki(),t=0,a=1,l=3,s=4,d=5,v=0,h=1,o=-2,p=-3,y=-5,_=-1,w=1,c=2,m=3,S=4,g=0,b=2,O=8,k=9,D=15,I=8,L=29,q=256,$=q+1+L,N=30,M=19,X=2*$+1,ee=15,C=3,T=258,B=T+C+1,Y=32,K=42,oe=69,ce=73,fe=91,Ee=103,pe=113,A=666,P=1,Q=2,ae=3,we=4,ue=3;function _e(u,Z){return u.msg=f[Z],Z}function je(u){return(u<<1)-(u>4?9:0)}function Ie(u){for(var Z=u.length;--Z>=0;)u[Z]=0}function Le(u){var Z=u.state,H=Z.pending;H>u.avail_out&&(H=u.avail_out),H!==0&&(e.arraySet(u.output,Z.pending_buf,Z.pending_out,H,u.next_out),u.next_out+=H,Z.pending_out+=H,u.total_out+=H,u.avail_out-=H,Z.pending-=H,Z.pending===0&&(Z.pending_out=0))}function Ce(u,Z){i._tr_flush_block(u,u.block_start>=0?u.block_start:-1,u.strstart-u.block_start,Z),u.block_start=u.strstart,Le(u.strm)}function ge(u,Z){u.pending_buf[u.pending++]=Z}function Pe(u,Z){u.pending_buf[u.pending++]=Z>>>8&255,u.pending_buf[u.pending++]=Z&255}function Ue(u,Z,H,x){var j=u.avail_in;return j>x&&(j=x),j===0?0:(u.avail_in-=j,e.arraySet(Z,u.input,u.next_in,j,H),u.state.wrap===1?u.adler=r(u.adler,Z,j,H):u.state.wrap===2&&(u.adler=n(u.adler,Z,j,H)),u.next_in+=j,u.total_in+=j,j)}function qe(u,Z){var H=u.max_chain_length,x=u.strstart,j,W,ye=u.prev_length,de=u.nice_match,ve=u.strstart>u.w_size-B?u.strstart-(u.w_size-B):0,Re=u.window,nr=u.w_mask,De=u.prev,ke=u.strstart+T,Fe=Re[x+ye-1],We=Re[x+ye];u.prev_length>=u.good_match&&(H>>=2),de>u.lookahead&&(de=u.lookahead);do if(j=Z,!(Re[j+ye]!==We||Re[j+ye-1]!==Fe||Re[j]!==Re[x]||Re[++j]!==Re[x+1])){x+=2,j++;do;while(Re[++x]===Re[++j]&&Re[++x]===Re[++j]&&Re[++x]===Re[++j]&&Re[++x]===Re[++j]&&Re[++x]===Re[++j]&&Re[++x]===Re[++j]&&Re[++x]===Re[++j]&&Re[++x]===Re[++j]&&x<ke);if(W=T-(ke-x),x=ke-T,W>ye){if(u.match_start=Z,ye=W,W>=de)break;Fe=Re[x+ye-1],We=Re[x+ye]}}while((Z=De[Z&nr])>ve&&--H!==0);return ye<=u.lookahead?ye:u.lookahead}function G(u){var Z=u.w_size,H,x,j,W,ye;do{if(W=u.window_size-u.lookahead-u.strstart,u.strstart>=Z+(Z-B)){e.arraySet(u.window,u.window,Z,Z,0),u.match_start-=Z,u.strstart-=Z,u.block_start-=Z,x=u.hash_size,H=x;do j=u.head[--H],u.head[H]=j>=Z?j-Z:0;while(--x);x=Z,H=x;do j=u.prev[--H],u.prev[H]=j>=Z?j-Z:0;while(--x);W+=Z}if(u.strm.avail_in===0)break;if(x=Ue(u.strm,u.window,u.strstart+u.lookahead,W),u.lookahead+=x,u.lookahead+u.insert>=C)for(ye=u.strstart-u.insert,u.ins_h=u.window[ye],u.ins_h=(u.ins_h<<u.hash_shift^u.window[ye+1])&u.hash_mask;u.insert&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[ye+C-1])&u.hash_mask,u.prev[ye&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=ye,ye++,u.insert--,!(u.lookahead+u.insert<C)););}while(u.lookahead<B&&u.strm.avail_in!==0)}function J(u,Z){var H=65535;for(H>u.pending_buf_size-5&&(H=u.pending_buf_size-5);;){if(u.lookahead<=1){if(G(u),u.lookahead===0&&Z===t)return P;if(u.lookahead===0)break}u.strstart+=u.lookahead,u.lookahead=0;var x=u.block_start+H;if((u.strstart===0||u.strstart>=x)&&(u.lookahead=u.strstart-x,u.strstart=x,Ce(u,!1),u.strm.avail_out===0)||u.strstart-u.block_start>=u.w_size-B&&(Ce(u,!1),u.strm.avail_out===0))return P}return u.insert=0,Z===s?(Ce(u,!0),u.strm.avail_out===0?ae:we):(u.strstart>u.block_start&&(Ce(u,!1),u.strm.avail_out===0),P)}function se(u,Z){for(var H,x;;){if(u.lookahead<B){if(G(u),u.lookahead<B&&Z===t)return P;if(u.lookahead===0)break}if(H=0,u.lookahead>=C&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+C-1])&u.hash_mask,H=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),H!==0&&u.strstart-H<=u.w_size-B&&(u.match_length=qe(u,H)),u.match_length>=C)if(x=i._tr_tally(u,u.strstart-u.match_start,u.match_length-C),u.lookahead-=u.match_length,u.match_length<=u.max_lazy_match&&u.lookahead>=C){u.match_length--;do u.strstart++,u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+C-1])&u.hash_mask,H=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart;while(--u.match_length!==0);u.strstart++}else u.strstart+=u.match_length,u.match_length=0,u.ins_h=u.window[u.strstart],u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+1])&u.hash_mask;else x=i._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++;if(x&&(Ce(u,!1),u.strm.avail_out===0))return P}return u.insert=u.strstart<C-1?u.strstart:C-1,Z===s?(Ce(u,!0),u.strm.avail_out===0?ae:we):u.last_lit&&(Ce(u,!1),u.strm.avail_out===0)?P:Q}function he(u,Z){for(var H,x,j;;){if(u.lookahead<B){if(G(u),u.lookahead<B&&Z===t)return P;if(u.lookahead===0)break}if(H=0,u.lookahead>=C&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+C-1])&u.hash_mask,H=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart),u.prev_length=u.match_length,u.prev_match=u.match_start,u.match_length=C-1,H!==0&&u.prev_length<u.max_lazy_match&&u.strstart-H<=u.w_size-B&&(u.match_length=qe(u,H),u.match_length<=5&&(u.strategy===w||u.match_length===C&&u.strstart-u.match_start>4096)&&(u.match_length=C-1)),u.prev_length>=C&&u.match_length<=u.prev_length){j=u.strstart+u.lookahead-C,x=i._tr_tally(u,u.strstart-1-u.prev_match,u.prev_length-C),u.lookahead-=u.prev_length-1,u.prev_length-=2;do++u.strstart<=j&&(u.ins_h=(u.ins_h<<u.hash_shift^u.window[u.strstart+C-1])&u.hash_mask,H=u.prev[u.strstart&u.w_mask]=u.head[u.ins_h],u.head[u.ins_h]=u.strstart);while(--u.prev_length!==0);if(u.match_available=0,u.match_length=C-1,u.strstart++,x&&(Ce(u,!1),u.strm.avail_out===0))return P}else if(u.match_available){if(x=i._tr_tally(u,0,u.window[u.strstart-1]),x&&Ce(u,!1),u.strstart++,u.lookahead--,u.strm.avail_out===0)return P}else u.match_available=1,u.strstart++,u.lookahead--}return u.match_available&&(x=i._tr_tally(u,0,u.window[u.strstart-1]),u.match_available=0),u.insert=u.strstart<C-1?u.strstart:C-1,Z===s?(Ce(u,!0),u.strm.avail_out===0?ae:we):u.last_lit&&(Ce(u,!1),u.strm.avail_out===0)?P:Q}function xe(u,Z){for(var H,x,j,W,ye=u.window;;){if(u.lookahead<=T){if(G(u),u.lookahead<=T&&Z===t)return P;if(u.lookahead===0)break}if(u.match_length=0,u.lookahead>=C&&u.strstart>0&&(j=u.strstart-1,x=ye[j],x===ye[++j]&&x===ye[++j]&&x===ye[++j])){W=u.strstart+T;do;while(x===ye[++j]&&x===ye[++j]&&x===ye[++j]&&x===ye[++j]&&x===ye[++j]&&x===ye[++j]&&x===ye[++j]&&x===ye[++j]&&j<W);u.match_length=T-(W-j),u.match_length>u.lookahead&&(u.match_length=u.lookahead)}if(u.match_length>=C?(H=i._tr_tally(u,1,u.match_length-C),u.lookahead-=u.match_length,u.strstart+=u.match_length,u.match_length=0):(H=i._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++),H&&(Ce(u,!1),u.strm.avail_out===0))return P}return u.insert=0,Z===s?(Ce(u,!0),u.strm.avail_out===0?ae:we):u.last_lit&&(Ce(u,!1),u.strm.avail_out===0)?P:Q}function Se(u,Z){for(var H;;){if(u.lookahead===0&&(G(u),u.lookahead===0)){if(Z===t)return P;break}if(u.match_length=0,H=i._tr_tally(u,0,u.window[u.strstart]),u.lookahead--,u.strstart++,H&&(Ce(u,!1),u.strm.avail_out===0))return P}return u.insert=0,Z===s?(Ce(u,!0),u.strm.avail_out===0?ae:we):u.last_lit&&(Ce(u,!1),u.strm.avail_out===0)?P:Q}function Ae(u,Z,H,x,j){this.good_length=u,this.max_lazy=Z,this.nice_length=H,this.max_chain=x,this.func=j}var Te;Te=[new Ae(0,0,0,0,J),new Ae(4,4,8,4,se),new Ae(4,5,16,8,se),new Ae(4,6,32,32,se),new Ae(4,4,16,16,he),new Ae(8,16,32,32,he),new Ae(8,16,128,128,he),new Ae(8,32,128,256,he),new Ae(32,128,258,1024,he),new Ae(32,258,258,4096,he)];function lr(u){u.window_size=2*u.w_size,Ie(u.head),u.max_lazy_match=Te[u.level].max_lazy,u.good_match=Te[u.level].good_length,u.nice_match=Te[u.level].nice_length,u.max_chain_length=Te[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=C-1,u.match_available=0,u.ins_h=0}function R(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(X*2),this.dyn_dtree=new e.Buf16((2*N+1)*2),this.bl_tree=new e.Buf16((2*M+1)*2),Ie(this.dyn_ltree),Ie(this.dyn_dtree),Ie(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ee+1),this.heap=new e.Buf16(2*$+1),Ie(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*$+1),Ie(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function re(u){var Z;return!u||!u.state?_e(u,o):(u.total_in=u.total_out=0,u.data_type=b,Z=u.state,Z.pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap?K:pe,u.adler=Z.wrap===2?0:1,Z.last_flush=t,i._tr_init(Z),v)}function le(u){var Z=re(u);return Z===v&&lr(u.state),Z}function me(u,Z){return!u||!u.state||u.state.wrap!==2?o:(u.state.gzhead=Z,v)}function F(u,Z,H,x,j,W){if(!u)return o;var ye=1;if(Z===_&&(Z=6),x<0?(ye=0,x=-x):x>15&&(ye=2,x-=16),j<1||j>k||H!==O||x<8||x>15||Z<0||Z>9||W<0||W>S)return _e(u,o);x===8&&(x=9);var de=new R;return u.state=de,de.strm=u,de.wrap=ye,de.gzhead=null,de.w_bits=x,de.w_size=1<<de.w_bits,de.w_mask=de.w_size-1,de.hash_bits=j+7,de.hash_size=1<<de.hash_bits,de.hash_mask=de.hash_size-1,de.hash_shift=~~((de.hash_bits+C-1)/C),de.window=new e.Buf8(de.w_size*2),de.head=new e.Buf16(de.hash_size),de.prev=new e.Buf16(de.w_size),de.lit_bufsize=1<<j+6,de.pending_buf_size=de.lit_bufsize*4,de.pending_buf=new e.Buf8(de.pending_buf_size),de.d_buf=1*de.lit_bufsize,de.l_buf=3*de.lit_bufsize,de.level=Z,de.strategy=W,de.method=H,le(u)}function V(u,Z){return F(u,Z,O,D,I,g)}function E(u,Z){var H,x,j,W;if(!u||!u.state||Z>d||Z<0)return u?_e(u,o):o;if(x=u.state,!u.output||!u.input&&u.avail_in!==0||x.status===A&&Z!==s)return _e(u,u.avail_out===0?y:o);if(x.strm=u,H=x.last_flush,x.last_flush=Z,x.status===K)if(x.wrap===2)u.adler=0,ge(x,31),ge(x,139),ge(x,8),x.gzhead?(ge(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),ge(x,x.gzhead.time&255),ge(x,x.gzhead.time>>8&255),ge(x,x.gzhead.time>>16&255),ge(x,x.gzhead.time>>24&255),ge(x,x.level===9?2:x.strategy>=c||x.level<2?4:0),ge(x,x.gzhead.os&255),x.gzhead.extra&&x.gzhead.extra.length&&(ge(x,x.gzhead.extra.length&255),ge(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(u.adler=n(u.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=oe):(ge(x,0),ge(x,0),ge(x,0),ge(x,0),ge(x,0),ge(x,x.level===9?2:x.strategy>=c||x.level<2?4:0),ge(x,ue),x.status=pe);else{var ye=O+(x.w_bits-8<<4)<<8,de=-1;x.strategy>=c||x.level<2?de=0:x.level<6?de=1:x.level===6?de=2:de=3,ye|=de<<6,x.strstart!==0&&(ye|=Y),ye+=31-ye%31,x.status=pe,Pe(x,ye),x.strstart!==0&&(Pe(x,u.adler>>>16),Pe(x,u.adler&65535)),u.adler=1}if(x.status===oe)if(x.gzhead.extra){for(j=x.pending;x.gzindex<(x.gzhead.extra.length&65535)&&!(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>j&&(u.adler=n(u.adler,x.pending_buf,x.pending-j,j)),Le(u),j=x.pending,x.pending===x.pending_buf_size));)ge(x,x.gzhead.extra[x.gzindex]&255),x.gzindex++;x.gzhead.hcrc&&x.pending>j&&(u.adler=n(u.adler,x.pending_buf,x.pending-j,j)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=ce)}else x.status=ce;if(x.status===ce)if(x.gzhead.name){j=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>j&&(u.adler=n(u.adler,x.pending_buf,x.pending-j,j)),Le(u),j=x.pending,x.pending===x.pending_buf_size)){W=1;break}x.gzindex<x.gzhead.name.length?W=x.gzhead.name.charCodeAt(x.gzindex++)&255:W=0,ge(x,W)}while(W!==0);x.gzhead.hcrc&&x.pending>j&&(u.adler=n(u.adler,x.pending_buf,x.pending-j,j)),W===0&&(x.gzindex=0,x.status=fe)}else x.status=fe;if(x.status===fe)if(x.gzhead.comment){j=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>j&&(u.adler=n(u.adler,x.pending_buf,x.pending-j,j)),Le(u),j=x.pending,x.pending===x.pending_buf_size)){W=1;break}x.gzindex<x.gzhead.comment.length?W=x.gzhead.comment.charCodeAt(x.gzindex++)&255:W=0,ge(x,W)}while(W!==0);x.gzhead.hcrc&&x.pending>j&&(u.adler=n(u.adler,x.pending_buf,x.pending-j,j)),W===0&&(x.status=Ee)}else x.status=Ee;if(x.status===Ee&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&Le(u),x.pending+2<=x.pending_buf_size&&(ge(x,u.adler&255),ge(x,u.adler>>8&255),u.adler=0,x.status=pe)):x.status=pe),x.pending!==0){if(Le(u),u.avail_out===0)return x.last_flush=-1,v}else if(u.avail_in===0&&je(Z)<=je(H)&&Z!==s)return _e(u,y);if(x.status===A&&u.avail_in!==0)return _e(u,y);if(u.avail_in!==0||x.lookahead!==0||Z!==t&&x.status!==A){var ve=x.strategy===c?Se(x,Z):x.strategy===m?xe(x,Z):Te[x.level].func(x,Z);if((ve===ae||ve===we)&&(x.status=A),ve===P||ve===ae)return u.avail_out===0&&(x.last_flush=-1),v;if(ve===Q&&(Z===a?i._tr_align(x):Z!==d&&(i._tr_stored_block(x,0,0,!1),Z===l&&(Ie(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),Le(u),u.avail_out===0))return x.last_flush=-1,v}return Z!==s?v:x.wrap<=0?h:(x.wrap===2?(ge(x,u.adler&255),ge(x,u.adler>>8&255),ge(x,u.adler>>16&255),ge(x,u.adler>>24&255),ge(x,u.total_in&255),ge(x,u.total_in>>8&255),ge(x,u.total_in>>16&255),ge(x,u.total_in>>24&255)):(Pe(x,u.adler>>>16),Pe(x,u.adler&65535)),Le(u),x.wrap>0&&(x.wrap=-x.wrap),x.pending!==0?v:h)}function te(u){var Z;return!u||!u.state?o:(Z=u.state.status,Z!==K&&Z!==oe&&Z!==ce&&Z!==fe&&Z!==Ee&&Z!==pe&&Z!==A?_e(u,o):(u.state=null,Z===pe?_e(u,p):v))}function be(u,Z){var H=Z.length,x,j,W,ye,de,ve,Re,nr;if(!u||!u.state||(x=u.state,ye=x.wrap,ye===2||ye===1&&x.status!==K||x.lookahead))return o;for(ye===1&&(u.adler=r(u.adler,Z,H,0)),x.wrap=0,H>=x.w_size&&(ye===0&&(Ie(x.head),x.strstart=0,x.block_start=0,x.insert=0),nr=new e.Buf8(x.w_size),e.arraySet(nr,Z,H-x.w_size,x.w_size,0),Z=nr,H=x.w_size),de=u.avail_in,ve=u.next_in,Re=u.input,u.avail_in=H,u.next_in=0,u.input=Z,G(x);x.lookahead>=C;){j=x.strstart,W=x.lookahead-(C-1);do x.ins_h=(x.ins_h<<x.hash_shift^x.window[j+C-1])&x.hash_mask,x.prev[j&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=j,j++;while(--W);x.strstart=j,x.lookahead=C-1,G(x)}return x.strstart+=x.lookahead,x.block_start=x.strstart,x.insert=x.lookahead,x.lookahead=0,x.match_length=x.prev_length=C-1,x.match_available=0,u.next_in=ve,u.input=Re,u.avail_in=de,x.wrap=ye,v}return Qe.deflateInit=V,Qe.deflateInit2=F,Qe.deflateReset=le,Qe.deflateResetKeep=re,Qe.deflateSetHeader=me,Qe.deflate=E,Qe.deflateEnd=te,Qe.deflateSetDictionary=be,Qe.deflateInfo="pako deflate (from Nodeca project)",Qe}var pr={},Cs;function Lo(){if(Cs)return pr;Cs=1;var e=hr(),i=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var n=new e.Buf8(256),f=0;f<256;f++)n[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;n[254]=n[254]=1,pr.string2buf=function(a){var l,s,d,v,h,o=a.length,p=0;for(v=0;v<o;v++)s=a.charCodeAt(v),(s&64512)===55296&&v+1<o&&(d=a.charCodeAt(v+1),(d&64512)===56320&&(s=65536+(s-55296<<10)+(d-56320),v++)),p+=s<128?1:s<2048?2:s<65536?3:4;for(l=new e.Buf8(p),h=0,v=0;h<p;v++)s=a.charCodeAt(v),(s&64512)===55296&&v+1<o&&(d=a.charCodeAt(v+1),(d&64512)===56320&&(s=65536+(s-55296<<10)+(d-56320),v++)),s<128?l[h++]=s:s<2048?(l[h++]=192|s>>>6,l[h++]=128|s&63):s<65536?(l[h++]=224|s>>>12,l[h++]=128|s>>>6&63,l[h++]=128|s&63):(l[h++]=240|s>>>18,l[h++]=128|s>>>12&63,l[h++]=128|s>>>6&63,l[h++]=128|s&63);return l};function t(a,l){if(l<65534&&(a.subarray&&r||!a.subarray&&i))return String.fromCharCode.apply(null,e.shrinkBuf(a,l));for(var s="",d=0;d<l;d++)s+=String.fromCharCode(a[d]);return s}return pr.buf2binstring=function(a){return t(a,a.length)},pr.binstring2buf=function(a){for(var l=new e.Buf8(a.length),s=0,d=l.length;s<d;s++)l[s]=a.charCodeAt(s);return l},pr.buf2string=function(a,l){var s,d,v,h,o=l||a.length,p=new Array(o*2);for(d=0,s=0;s<o;){if(v=a[s++],v<128){p[d++]=v;continue}if(h=n[v],h>4){p[d++]=65533,s+=h-1;continue}for(v&=h===2?31:h===3?15:7;h>1&&s<o;)v=v<<6|a[s++]&63,h--;if(h>1){p[d++]=65533;continue}v<65536?p[d++]=v:(v-=65536,p[d++]=55296|v>>10&1023,p[d++]=56320|v&1023)}return t(p,d)},pr.utf8border=function(a,l){var s;for(l=l||a.length,l>a.length&&(l=a.length),s=l-1;s>=0&&(a[s]&192)===128;)s--;return s<0||s===0?l:s+n[a[s]]>l?s:l},pr}var Fn,As;function Mo(){if(As)return Fn;As=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return Fn=e,Fn}var Os;function Vl(){if(Os)return mr;Os=1;var e=Hl(),i=hr(),r=Lo(),n=ki(),f=Mo(),t=Object.prototype.toString,a=0,l=4,s=0,d=1,v=2,h=-1,o=0,p=8;function y(m){if(!(this instanceof y))return new y(m);this.options=i.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:o,to:""},m||{});var S=this.options;S.raw&&S.windowBits>0?S.windowBits=-S.windowBits:S.gzip&&S.windowBits>0&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var g=e.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(g!==s)throw new Error(n[g]);if(S.header&&e.deflateSetHeader(this.strm,S.header),S.dictionary){var b;if(typeof S.dictionary=="string"?b=r.string2buf(S.dictionary):t.call(S.dictionary)==="[object ArrayBuffer]"?b=new Uint8Array(S.dictionary):b=S.dictionary,g=e.deflateSetDictionary(this.strm,b),g!==s)throw new Error(n[g]);this._dict_set=!0}}y.prototype.push=function(m,S){var g=this.strm,b=this.options.chunkSize,O,k;if(this.ended)return!1;k=S===~~S?S:S===!0?l:a,typeof m=="string"?g.input=r.string2buf(m):t.call(m)==="[object ArrayBuffer]"?g.input=new Uint8Array(m):g.input=m,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new i.Buf8(b),g.next_out=0,g.avail_out=b),O=e.deflate(g,k),O!==d&&O!==s)return this.onEnd(O),this.ended=!0,!1;(g.avail_out===0||g.avail_in===0&&(k===l||k===v))&&(this.options.to==="string"?this.onData(r.buf2binstring(i.shrinkBuf(g.output,g.next_out))):this.onData(i.shrinkBuf(g.output,g.next_out)))}while((g.avail_in>0||g.avail_out===0)&&O!==d);return k===l?(O=e.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===s):(k===v&&(this.onEnd(s),g.avail_out=0),!0)},y.prototype.onData=function(m){this.chunks.push(m)},y.prototype.onEnd=function(m){m===s&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};function _(m,S){var g=new y(S);if(g.push(m,!0),g.err)throw g.msg||n[g.err];return g.result}function w(m,S){return S=S||{},S.raw=!0,_(m,S)}function c(m,S){return S=S||{},S.gzip=!0,_(m,S)}return mr.Deflate=y,mr.deflate=_,mr.deflateRaw=w,mr.gzip=c,mr}var gr={},Ye={},qn,Ts;function Xl(){if(Ts)return qn;Ts=1;var e=30,i=12;return qn=function(n,f){var t,a,l,s,d,v,h,o,p,y,_,w,c,m,S,g,b,O,k,D,I,L,q,$,N;t=n.state,a=n.next_in,$=n.input,l=a+(n.avail_in-5),s=n.next_out,N=n.output,d=s-(f-n.avail_out),v=s+(n.avail_out-257),h=t.dmax,o=t.wsize,p=t.whave,y=t.wnext,_=t.window,w=t.hold,c=t.bits,m=t.lencode,S=t.distcode,g=(1<<t.lenbits)-1,b=(1<<t.distbits)-1;e:do{c<15&&(w+=$[a++]<<c,c+=8,w+=$[a++]<<c,c+=8),O=m[w&g];r:for(;;){if(k=O>>>24,w>>>=k,c-=k,k=O>>>16&255,k===0)N[s++]=O&65535;else if(k&16){D=O&65535,k&=15,k&&(c<k&&(w+=$[a++]<<c,c+=8),D+=w&(1<<k)-1,w>>>=k,c-=k),c<15&&(w+=$[a++]<<c,c+=8,w+=$[a++]<<c,c+=8),O=S[w&b];t:for(;;){if(k=O>>>24,w>>>=k,c-=k,k=O>>>16&255,k&16){if(I=O&65535,k&=15,c<k&&(w+=$[a++]<<c,c+=8,c<k&&(w+=$[a++]<<c,c+=8)),I+=w&(1<<k)-1,I>h){n.msg="invalid distance too far back",t.mode=e;break e}if(w>>>=k,c-=k,k=s-d,I>k){if(k=I-k,k>p&&t.sane){n.msg="invalid distance too far back",t.mode=e;break e}if(L=0,q=_,y===0){if(L+=o-k,k<D){D-=k;do N[s++]=_[L++];while(--k);L=s-I,q=N}}else if(y<k){if(L+=o+y-k,k-=y,k<D){D-=k;do N[s++]=_[L++];while(--k);if(L=0,y<D){k=y,D-=k;do N[s++]=_[L++];while(--k);L=s-I,q=N}}}else if(L+=y-k,k<D){D-=k;do N[s++]=_[L++];while(--k);L=s-I,q=N}for(;D>2;)N[s++]=q[L++],N[s++]=q[L++],N[s++]=q[L++],D-=3;D&&(N[s++]=q[L++],D>1&&(N[s++]=q[L++]))}else{L=s-I;do N[s++]=N[L++],N[s++]=N[L++],N[s++]=N[L++],D-=3;while(D>2);D&&(N[s++]=N[L++],D>1&&(N[s++]=N[L++]))}}else if((k&64)===0){O=S[(O&65535)+(w&(1<<k)-1)];continue t}else{n.msg="invalid distance code",t.mode=e;break e}break}}else if((k&64)===0){O=m[(O&65535)+(w&(1<<k)-1)];continue r}else if(k&32){t.mode=i;break e}else{n.msg="invalid literal/length code",t.mode=e;break e}break}}while(a<l&&s<v);D=c>>3,a-=D,c-=D<<3,w&=(1<<c)-1,n.next_in=a,n.next_out=s,n.avail_in=a<l?5+(l-a):5-(a-l),n.avail_out=s<v?257+(v-s):257-(s-v),t.hold=w,t.bits=c},qn}var Bn,Is;function Yl(){if(Is)return Bn;Is=1;var e=hr(),i=15,r=852,n=592,f=0,t=1,a=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return Bn=function(o,p,y,_,w,c,m,S){var g=S.bits,b=0,O=0,k=0,D=0,I=0,L=0,q=0,$=0,N=0,M=0,X,ee,C,T,B,Y=null,K=0,oe,ce=new e.Buf16(i+1),fe=new e.Buf16(i+1),Ee=null,pe=0,A,P,Q;for(b=0;b<=i;b++)ce[b]=0;for(O=0;O<_;O++)ce[p[y+O]]++;for(I=g,D=i;D>=1&&ce[D]===0;D--);if(I>D&&(I=D),D===0)return w[c++]=1<<24|64<<16|0,w[c++]=1<<24|64<<16|0,S.bits=1,0;for(k=1;k<D&&ce[k]===0;k++);for(I<k&&(I=k),$=1,b=1;b<=i;b++)if($<<=1,$-=ce[b],$<0)return-1;if($>0&&(o===f||D!==1))return-1;for(fe[1]=0,b=1;b<i;b++)fe[b+1]=fe[b]+ce[b];for(O=0;O<_;O++)p[y+O]!==0&&(m[fe[p[y+O]]++]=O);if(o===f?(Y=Ee=m,oe=19):o===t?(Y=l,K-=257,Ee=s,pe-=257,oe=256):(Y=d,Ee=v,oe=-1),M=0,O=0,b=k,B=c,L=I,q=0,C=-1,N=1<<I,T=N-1,o===t&&N>r||o===a&&N>n)return 1;for(;;){A=b-q,m[O]<oe?(P=0,Q=m[O]):m[O]>oe?(P=Ee[pe+m[O]],Q=Y[K+m[O]]):(P=96,Q=0),X=1<<b-q,ee=1<<L,k=ee;do ee-=X,w[B+(M>>q)+ee]=A<<24|P<<16|Q|0;while(ee!==0);for(X=1<<b-1;M&X;)X>>=1;if(X!==0?(M&=X-1,M+=X):M=0,O++,--ce[b]===0){if(b===D)break;b=p[y+m[O]]}if(b>I&&(M&T)!==C){for(q===0&&(q=I),B+=k,L=b-q,$=1<<L;L+q<D&&($-=ce[L+q],!($<=0));)L++,$<<=1;if(N+=1<<L,o===t&&N>r||o===a&&N>n)return 1;C=M&T,w[C]=I<<24|L<<16|B-c|0}}return M!==0&&(w[B+M]=b-q<<24|64<<16|0),S.bits=I,0},Bn}var Ps;function Kl(){if(Ps)return Ye;Ps=1;var e=hr(),i=No(),r=jo(),n=Xl(),f=Yl(),t=0,a=1,l=2,s=4,d=5,v=6,h=0,o=1,p=2,y=-2,_=-3,w=-4,c=-5,m=8,S=1,g=2,b=3,O=4,k=5,D=6,I=7,L=8,q=9,$=10,N=11,M=12,X=13,ee=14,C=15,T=16,B=17,Y=18,K=19,oe=20,ce=21,fe=22,Ee=23,pe=24,A=25,P=26,Q=27,ae=28,we=29,ue=30,_e=31,je=32,Ie=852,Le=592,Ce=15,ge=Ce;function Pe(F){return(F>>>24&255)+(F>>>8&65280)+((F&65280)<<8)+((F&255)<<24)}function Ue(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function qe(F){var V;return!F||!F.state?y:(V=F.state,F.total_in=F.total_out=V.total=0,F.msg="",V.wrap&&(F.adler=V.wrap&1),V.mode=S,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new e.Buf32(Ie),V.distcode=V.distdyn=new e.Buf32(Le),V.sane=1,V.back=-1,h)}function G(F){var V;return!F||!F.state?y:(V=F.state,V.wsize=0,V.whave=0,V.wnext=0,qe(F))}function J(F,V){var E,te;return!F||!F.state||(te=F.state,V<0?(E=0,V=-V):(E=(V>>4)+1,V<48&&(V&=15)),V&&(V<8||V>15))?y:(te.window!==null&&te.wbits!==V&&(te.window=null),te.wrap=E,te.wbits=V,G(F))}function se(F,V){var E,te;return F?(te=new Ue,F.state=te,te.window=null,E=J(F,V),E!==h&&(F.state=null),E):y}function he(F){return se(F,ge)}var xe=!0,Se,Ae;function Te(F){if(xe){var V;for(Se=new e.Buf32(512),Ae=new e.Buf32(32),V=0;V<144;)F.lens[V++]=8;for(;V<256;)F.lens[V++]=9;for(;V<280;)F.lens[V++]=7;for(;V<288;)F.lens[V++]=8;for(f(a,F.lens,0,288,Se,0,F.work,{bits:9}),V=0;V<32;)F.lens[V++]=5;f(l,F.lens,0,32,Ae,0,F.work,{bits:5}),xe=!1}F.lencode=Se,F.lenbits=9,F.distcode=Ae,F.distbits=5}function lr(F,V,E,te){var be,u=F.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new e.Buf8(u.wsize)),te>=u.wsize?(e.arraySet(u.window,V,E-u.wsize,u.wsize,0),u.wnext=0,u.whave=u.wsize):(be=u.wsize-u.wnext,be>te&&(be=te),e.arraySet(u.window,V,E-te,be,u.wnext),te-=be,te?(e.arraySet(u.window,V,E-te,te,0),u.wnext=te,u.whave=u.wsize):(u.wnext+=be,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=be))),0}function R(F,V){var E,te,be,u,Z,H,x,j,W,ye,de,ve,Re,nr,De=0,ke,Fe,We,Ze,Tr,Ir,Me,Ve,Be=new e.Buf8(4),ir,tr,Ai=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return y;E=F.state,E.mode===M&&(E.mode=X),Z=F.next_out,be=F.output,x=F.avail_out,u=F.next_in,te=F.input,H=F.avail_in,j=E.hold,W=E.bits,ye=H,de=x,Ve=h;e:for(;;)switch(E.mode){case S:if(E.wrap===0){E.mode=X;break}for(;W<16;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}if(E.wrap&2&&j===35615){E.check=0,Be[0]=j&255,Be[1]=j>>>8&255,E.check=r(E.check,Be,2,0),j=0,W=0,E.mode=g;break}if(E.flags=0,E.head&&(E.head.done=!1),!(E.wrap&1)||(((j&255)<<8)+(j>>8))%31){F.msg="incorrect header check",E.mode=ue;break}if((j&15)!==m){F.msg="unknown compression method",E.mode=ue;break}if(j>>>=4,W-=4,Me=(j&15)+8,E.wbits===0)E.wbits=Me;else if(Me>E.wbits){F.msg="invalid window size",E.mode=ue;break}E.dmax=1<<Me,F.adler=E.check=1,E.mode=j&512?$:M,j=0,W=0;break;case g:for(;W<16;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}if(E.flags=j,(E.flags&255)!==m){F.msg="unknown compression method",E.mode=ue;break}if(E.flags&57344){F.msg="unknown header flags set",E.mode=ue;break}E.head&&(E.head.text=j>>8&1),E.flags&512&&(Be[0]=j&255,Be[1]=j>>>8&255,E.check=r(E.check,Be,2,0)),j=0,W=0,E.mode=b;case b:for(;W<32;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}E.head&&(E.head.time=j),E.flags&512&&(Be[0]=j&255,Be[1]=j>>>8&255,Be[2]=j>>>16&255,Be[3]=j>>>24&255,E.check=r(E.check,Be,4,0)),j=0,W=0,E.mode=O;case O:for(;W<16;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}E.head&&(E.head.xflags=j&255,E.head.os=j>>8),E.flags&512&&(Be[0]=j&255,Be[1]=j>>>8&255,E.check=r(E.check,Be,2,0)),j=0,W=0,E.mode=k;case k:if(E.flags&1024){for(;W<16;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}E.length=j,E.head&&(E.head.extra_len=j),E.flags&512&&(Be[0]=j&255,Be[1]=j>>>8&255,E.check=r(E.check,Be,2,0)),j=0,W=0}else E.head&&(E.head.extra=null);E.mode=D;case D:if(E.flags&1024&&(ve=E.length,ve>H&&(ve=H),ve&&(E.head&&(Me=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),e.arraySet(E.head.extra,te,u,ve,Me)),E.flags&512&&(E.check=r(E.check,te,ve,u)),H-=ve,u+=ve,E.length-=ve),E.length))break e;E.length=0,E.mode=I;case I:if(E.flags&2048){if(H===0)break e;ve=0;do Me=te[u+ve++],E.head&&Me&&E.length<65536&&(E.head.name+=String.fromCharCode(Me));while(Me&&ve<H);if(E.flags&512&&(E.check=r(E.check,te,ve,u)),H-=ve,u+=ve,Me)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=L;case L:if(E.flags&4096){if(H===0)break e;ve=0;do Me=te[u+ve++],E.head&&Me&&E.length<65536&&(E.head.comment+=String.fromCharCode(Me));while(Me&&ve<H);if(E.flags&512&&(E.check=r(E.check,te,ve,u)),H-=ve,u+=ve,Me)break e}else E.head&&(E.head.comment=null);E.mode=q;case q:if(E.flags&512){for(;W<16;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}if(j!==(E.check&65535)){F.msg="header crc mismatch",E.mode=ue;break}j=0,W=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),F.adler=E.check=0,E.mode=M;break;case $:for(;W<32;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}F.adler=E.check=Pe(j),j=0,W=0,E.mode=N;case N:if(E.havedict===0)return F.next_out=Z,F.avail_out=x,F.next_in=u,F.avail_in=H,E.hold=j,E.bits=W,p;F.adler=E.check=1,E.mode=M;case M:if(V===d||V===v)break e;case X:if(E.last){j>>>=W&7,W-=W&7,E.mode=Q;break}for(;W<3;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}switch(E.last=j&1,j>>>=1,W-=1,j&3){case 0:E.mode=ee;break;case 1:if(Te(E),E.mode=oe,V===v){j>>>=2,W-=2;break e}break;case 2:E.mode=B;break;case 3:F.msg="invalid block type",E.mode=ue}j>>>=2,W-=2;break;case ee:for(j>>>=W&7,W-=W&7;W<32;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}if((j&65535)!==(j>>>16^65535)){F.msg="invalid stored block lengths",E.mode=ue;break}if(E.length=j&65535,j=0,W=0,E.mode=C,V===v)break e;case C:E.mode=T;case T:if(ve=E.length,ve){if(ve>H&&(ve=H),ve>x&&(ve=x),ve===0)break e;e.arraySet(be,te,u,ve,Z),H-=ve,u+=ve,x-=ve,Z+=ve,E.length-=ve;break}E.mode=M;break;case B:for(;W<14;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}if(E.nlen=(j&31)+257,j>>>=5,W-=5,E.ndist=(j&31)+1,j>>>=5,W-=5,E.ncode=(j&15)+4,j>>>=4,W-=4,E.nlen>286||E.ndist>30){F.msg="too many length or distance symbols",E.mode=ue;break}E.have=0,E.mode=Y;case Y:for(;E.have<E.ncode;){for(;W<3;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}E.lens[Ai[E.have++]]=j&7,j>>>=3,W-=3}for(;E.have<19;)E.lens[Ai[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,ir={bits:E.lenbits},Ve=f(t,E.lens,0,19,E.lencode,0,E.work,ir),E.lenbits=ir.bits,Ve){F.msg="invalid code lengths set",E.mode=ue;break}E.have=0,E.mode=K;case K:for(;E.have<E.nlen+E.ndist;){for(;De=E.lencode[j&(1<<E.lenbits)-1],ke=De>>>24,Fe=De>>>16&255,We=De&65535,!(ke<=W);){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}if(We<16)j>>>=ke,W-=ke,E.lens[E.have++]=We;else{if(We===16){for(tr=ke+2;W<tr;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}if(j>>>=ke,W-=ke,E.have===0){F.msg="invalid bit length repeat",E.mode=ue;break}Me=E.lens[E.have-1],ve=3+(j&3),j>>>=2,W-=2}else if(We===17){for(tr=ke+3;W<tr;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}j>>>=ke,W-=ke,Me=0,ve=3+(j&7),j>>>=3,W-=3}else{for(tr=ke+7;W<tr;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}j>>>=ke,W-=ke,Me=0,ve=11+(j&127),j>>>=7,W-=7}if(E.have+ve>E.nlen+E.ndist){F.msg="invalid bit length repeat",E.mode=ue;break}for(;ve--;)E.lens[E.have++]=Me}}if(E.mode===ue)break;if(E.lens[256]===0){F.msg="invalid code -- missing end-of-block",E.mode=ue;break}if(E.lenbits=9,ir={bits:E.lenbits},Ve=f(a,E.lens,0,E.nlen,E.lencode,0,E.work,ir),E.lenbits=ir.bits,Ve){F.msg="invalid literal/lengths set",E.mode=ue;break}if(E.distbits=6,E.distcode=E.distdyn,ir={bits:E.distbits},Ve=f(l,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,ir),E.distbits=ir.bits,Ve){F.msg="invalid distances set",E.mode=ue;break}if(E.mode=oe,V===v)break e;case oe:E.mode=ce;case ce:if(H>=6&&x>=258){F.next_out=Z,F.avail_out=x,F.next_in=u,F.avail_in=H,E.hold=j,E.bits=W,n(F,de),Z=F.next_out,be=F.output,x=F.avail_out,u=F.next_in,te=F.input,H=F.avail_in,j=E.hold,W=E.bits,E.mode===M&&(E.back=-1);break}for(E.back=0;De=E.lencode[j&(1<<E.lenbits)-1],ke=De>>>24,Fe=De>>>16&255,We=De&65535,!(ke<=W);){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}if(Fe&&(Fe&240)===0){for(Ze=ke,Tr=Fe,Ir=We;De=E.lencode[Ir+((j&(1<<Ze+Tr)-1)>>Ze)],ke=De>>>24,Fe=De>>>16&255,We=De&65535,!(Ze+ke<=W);){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}j>>>=Ze,W-=Ze,E.back+=Ze}if(j>>>=ke,W-=ke,E.back+=ke,E.length=We,Fe===0){E.mode=P;break}if(Fe&32){E.back=-1,E.mode=M;break}if(Fe&64){F.msg="invalid literal/length code",E.mode=ue;break}E.extra=Fe&15,E.mode=fe;case fe:if(E.extra){for(tr=E.extra;W<tr;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}E.length+=j&(1<<E.extra)-1,j>>>=E.extra,W-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=Ee;case Ee:for(;De=E.distcode[j&(1<<E.distbits)-1],ke=De>>>24,Fe=De>>>16&255,We=De&65535,!(ke<=W);){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}if((Fe&240)===0){for(Ze=ke,Tr=Fe,Ir=We;De=E.distcode[Ir+((j&(1<<Ze+Tr)-1)>>Ze)],ke=De>>>24,Fe=De>>>16&255,We=De&65535,!(Ze+ke<=W);){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}j>>>=Ze,W-=Ze,E.back+=Ze}if(j>>>=ke,W-=ke,E.back+=ke,Fe&64){F.msg="invalid distance code",E.mode=ue;break}E.offset=We,E.extra=Fe&15,E.mode=pe;case pe:if(E.extra){for(tr=E.extra;W<tr;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}E.offset+=j&(1<<E.extra)-1,j>>>=E.extra,W-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){F.msg="invalid distance too far back",E.mode=ue;break}E.mode=A;case A:if(x===0)break e;if(ve=de-x,E.offset>ve){if(ve=E.offset-ve,ve>E.whave&&E.sane){F.msg="invalid distance too far back",E.mode=ue;break}ve>E.wnext?(ve-=E.wnext,Re=E.wsize-ve):Re=E.wnext-ve,ve>E.length&&(ve=E.length),nr=E.window}else nr=be,Re=Z-E.offset,ve=E.length;ve>x&&(ve=x),x-=ve,E.length-=ve;do be[Z++]=nr[Re++];while(--ve);E.length===0&&(E.mode=ce);break;case P:if(x===0)break e;be[Z++]=E.length,x--,E.mode=ce;break;case Q:if(E.wrap){for(;W<32;){if(H===0)break e;H--,j|=te[u++]<<W,W+=8}if(de-=x,F.total_out+=de,E.total+=de,de&&(F.adler=E.check=E.flags?r(E.check,be,de,Z-de):i(E.check,be,de,Z-de)),de=x,(E.flags?j:Pe(j))!==E.check){F.msg="incorrect data check",E.mode=ue;break}j=0,W=0}E.mode=ae;case ae:if(E.wrap&&E.flags){for(;W<32;){if(H===0)break e;H--,j+=te[u++]<<W,W+=8}if(j!==(E.total&4294967295)){F.msg="incorrect length check",E.mode=ue;break}j=0,W=0}E.mode=we;case we:Ve=o;break e;case ue:Ve=_;break e;case _e:return w;case je:default:return y}return F.next_out=Z,F.avail_out=x,F.next_in=u,F.avail_in=H,E.hold=j,E.bits=W,(E.wsize||de!==F.avail_out&&E.mode<ue&&(E.mode<Q||V!==s))&&lr(F,F.output,F.next_out,de-F.avail_out),ye-=F.avail_in,de-=F.avail_out,F.total_in+=ye,F.total_out+=de,E.total+=de,E.wrap&&de&&(F.adler=E.check=E.flags?r(E.check,be,de,F.next_out-de):i(E.check,be,de,F.next_out-de)),F.data_type=E.bits+(E.last?64:0)+(E.mode===M?128:0)+(E.mode===oe||E.mode===C?256:0),(ye===0&&de===0||V===s)&&Ve===h&&(Ve=c),Ve}function re(F){if(!F||!F.state)return y;var V=F.state;return V.window&&(V.window=null),F.state=null,h}function le(F,V){var E;return!F||!F.state||(E=F.state,(E.wrap&2)===0)?y:(E.head=V,V.done=!1,h)}function me(F,V){var E=V.length,te,be,u;return!F||!F.state||(te=F.state,te.wrap!==0&&te.mode!==N)?y:te.mode===N&&(be=1,be=i(be,V,E,0),be!==te.check)?_:(u=lr(F,V,E,E),u?(te.mode=_e,w):(te.havedict=1,h))}return Ye.inflateReset=G,Ye.inflateReset2=J,Ye.inflateResetKeep=qe,Ye.inflateInit=he,Ye.inflateInit2=se,Ye.inflate=R,Ye.inflateEnd=re,Ye.inflateGetHeader=le,Ye.inflateSetDictionary=me,Ye.inflateInfo="pako inflate (from Nodeca project)",Ye}var $n,Ds;function Fo(){return Ds||(Ds=1,$n={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),$n}var zn,Ns;function Jl(){if(Ns)return zn;Ns=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return zn=e,zn}var js;function Ql(){if(js)return gr;js=1;var e=Kl(),i=hr(),r=Lo(),n=Fo(),f=ki(),t=Mo(),a=Jl(),l=Object.prototype.toString;function s(h){if(!(this instanceof s))return new s(h);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},h||{});var o=this.options;o.raw&&o.windowBits>=0&&o.windowBits<16&&(o.windowBits=-o.windowBits,o.windowBits===0&&(o.windowBits=-15)),o.windowBits>=0&&o.windowBits<16&&!(h&&h.windowBits)&&(o.windowBits+=32),o.windowBits>15&&o.windowBits<48&&(o.windowBits&15)===0&&(o.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new t,this.strm.avail_out=0;var p=e.inflateInit2(this.strm,o.windowBits);if(p!==n.Z_OK)throw new Error(f[p]);if(this.header=new a,e.inflateGetHeader(this.strm,this.header),o.dictionary&&(typeof o.dictionary=="string"?o.dictionary=r.string2buf(o.dictionary):l.call(o.dictionary)==="[object ArrayBuffer]"&&(o.dictionary=new Uint8Array(o.dictionary)),o.raw&&(p=e.inflateSetDictionary(this.strm,o.dictionary),p!==n.Z_OK)))throw new Error(f[p])}s.prototype.push=function(h,o){var p=this.strm,y=this.options.chunkSize,_=this.options.dictionary,w,c,m,S,g,b=!1;if(this.ended)return!1;c=o===~~o?o:o===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof h=="string"?p.input=r.binstring2buf(h):l.call(h)==="[object ArrayBuffer]"?p.input=new Uint8Array(h):p.input=h,p.next_in=0,p.avail_in=p.input.length;do{if(p.avail_out===0&&(p.output=new i.Buf8(y),p.next_out=0,p.avail_out=y),w=e.inflate(p,n.Z_NO_FLUSH),w===n.Z_NEED_DICT&&_&&(w=e.inflateSetDictionary(this.strm,_)),w===n.Z_BUF_ERROR&&b===!0&&(w=n.Z_OK,b=!1),w!==n.Z_STREAM_END&&w!==n.Z_OK)return this.onEnd(w),this.ended=!0,!1;p.next_out&&(p.avail_out===0||w===n.Z_STREAM_END||p.avail_in===0&&(c===n.Z_FINISH||c===n.Z_SYNC_FLUSH))&&(this.options.to==="string"?(m=r.utf8border(p.output,p.next_out),S=p.next_out-m,g=r.buf2string(p.output,m),p.next_out=S,p.avail_out=y-S,S&&i.arraySet(p.output,p.output,m,S,0),this.onData(g)):this.onData(i.shrinkBuf(p.output,p.next_out))),p.avail_in===0&&p.avail_out===0&&(b=!0)}while((p.avail_in>0||p.avail_out===0)&&w!==n.Z_STREAM_END);return w===n.Z_STREAM_END&&(c=n.Z_FINISH),c===n.Z_FINISH?(w=e.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===n.Z_OK):(c===n.Z_SYNC_FLUSH&&(this.onEnd(n.Z_OK),p.avail_out=0),!0)},s.prototype.onData=function(h){this.chunks.push(h)},s.prototype.onEnd=function(h){h===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function d(h,o){var p=new s(o);if(p.push(h,!0),p.err)throw p.msg||f[p.err];return p.result}function v(h,o){return o=o||{},o.raw=!0,d(h,o)}return gr.Inflate=s,gr.inflate=d,gr.inflateRaw=v,gr.ungzip=d,gr}var Un,Ls;function ec(){if(Ls)return Un;Ls=1;var e=hr().assign,i=Vl(),r=Ql(),n=Fo(),f={};return e(f,i,r,n),Un=f,Un}var Ms;function rc(){if(Ms)return xr;Ms=1;var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=ec(),r=Ne(),n=Je(),f=e?"uint8array":"array";xr.magic="\b\0";function t(a,l){n.call(this,"FlateWorker/"+a),this._pako=null,this._pakoAction=a,this._pakoOptions=l,this.meta={}}return r.inherits(t,n),t.prototype.processChunk=function(a){this.meta=a.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(f,a.data),!1)},t.prototype.flush=function(){n.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},t.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this._pako=null},t.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var a=this;this._pako.onData=function(l){a.push({data:l,meta:a.meta})}},xr.compressWorker=function(a){return new t("Deflate",a)},xr.uncompressWorker=function(){return new t("Inflate",{})},xr}var Fs;function qo(){if(Fs)return zr;Fs=1;var e=Je();return zr.STORE={magic:"\0\0",compressWorker:function(){return new e("STORE compression")},uncompressWorker:function(){return new e("STORE decompression")}},zr.DEFLATE=rc(),zr}var cr={},qs;function Bo(){return qs||(qs=1,cr.LOCAL_FILE_HEADER="PK",cr.CENTRAL_FILE_HEADER="PK",cr.CENTRAL_DIRECTORY_END="PK",cr.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",cr.ZIP64_CENTRAL_DIRECTORY_END="PK",cr.DATA_DESCRIPTOR="PK\x07\b"),cr}var Wn,Bs;function tc(){if(Bs)return Wn;Bs=1;var e=Ne(),i=Je(),r=Or(),n=xi(),f=Bo(),t=function(o,p){var y="",_;for(_=0;_<p;_++)y+=String.fromCharCode(o&255),o=o>>>8;return y},a=function(o,p){var y=o;return o||(y=p?16893:33204),(y&65535)<<16},l=function(o){return(o||0)&63},s=function(o,p,y,_,w,c){var m=o.file,S=o.compression,g=c!==r.utf8encode,b=e.transformTo("string",c(m.name)),O=e.transformTo("string",r.utf8encode(m.name)),k=m.comment,D=e.transformTo("string",c(k)),I=e.transformTo("string",r.utf8encode(k)),L=O.length!==m.name.length,q=I.length!==k.length,$,N,M="",X="",ee="",C=m.dir,T=m.date,B={crc32:0,compressedSize:0,uncompressedSize:0};(!p||y)&&(B.crc32=o.crc32,B.compressedSize=o.compressedSize,B.uncompressedSize=o.uncompressedSize);var Y=0;p&&(Y|=8),!g&&(L||q)&&(Y|=2048);var K=0,oe=0;C&&(K|=16),w==="UNIX"?(oe=798,K|=a(m.unixPermissions,C)):(oe=20,K|=l(m.dosPermissions)),$=T.getUTCHours(),$=$<<6,$=$|T.getUTCMinutes(),$=$<<5,$=$|T.getUTCSeconds()/2,N=T.getUTCFullYear()-1980,N=N<<4,N=N|T.getUTCMonth()+1,N=N<<5,N=N|T.getUTCDate(),L&&(X=t(1,1)+t(n(b),4)+O,M+="up"+t(X.length,2)+X),q&&(ee=t(1,1)+t(n(D),4)+I,M+="uc"+t(ee.length,2)+ee);var ce="";ce+=`
\0`,ce+=t(Y,2),ce+=S.magic,ce+=t($,2),ce+=t(N,2),ce+=t(B.crc32,4),ce+=t(B.compressedSize,4),ce+=t(B.uncompressedSize,4),ce+=t(b.length,2),ce+=t(M.length,2);var fe=f.LOCAL_FILE_HEADER+ce+b+M,Ee=f.CENTRAL_FILE_HEADER+t(oe,2)+ce+t(D.length,2)+"\0\0\0\0"+t(K,4)+t(_,4)+b+M+D;return{fileRecord:fe,dirRecord:Ee}},d=function(o,p,y,_,w){var c="",m=e.transformTo("string",w(_));return c=f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+t(o,2)+t(o,2)+t(p,4)+t(y,4)+t(m.length,2)+m,c},v=function(o){var p="";return p=f.DATA_DESCRIPTOR+t(o.crc32,4)+t(o.compressedSize,4)+t(o.uncompressedSize,4),p};function h(o,p,y,_){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=y,this.encodeFileName=_,this.streamFiles=o,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}return e.inherits(h,i),h.prototype.push=function(o){var p=o.meta.percent||0,y=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(o):(this.bytesWritten+=o.data.length,i.prototype.push.call(this,{data:o.data,meta:{currentFile:this.currentFile,percent:y?(p+100*(y-_-1))/y:100}}))},h.prototype.openedSource=function(o){this.currentSourceOffset=this.bytesWritten,this.currentFile=o.file.name;var p=this.streamFiles&&!o.file.dir;if(p){var y=s(o,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(o){this.accumulate=!1;var p=this.streamFiles&&!o.file.dir,y=s(o,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),p)this.push({data:v(o),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var o=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var y=this.bytesWritten-o,_=d(this.dirRecords.length,y,o,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(o){this._sources.push(o);var p=this;return o.on("data",function(y){p.processChunk(y)}),o.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),o.on("error",function(y){p.error(y)}),this},h.prototype.resume=function(){if(!i.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},h.prototype.error=function(o){var p=this._sources;if(!i.prototype.error.call(this,o))return!1;for(var y=0;y<p.length;y++)try{p[y].error(o)}catch{}return!0},h.prototype.lock=function(){i.prototype.lock.call(this);for(var o=this._sources,p=0;p<o.length;p++)o[p].lock()},Wn=h,Wn}var $s;function nc(){if($s)return Dn;$s=1;var e=qo(),i=tc(),r=function(n,f){var t=n||f,a=e[t];if(!a)throw new Error(t+" is not a valid compression method !");return a};return Dn.generateWorker=function(n,f,t){var a=new i(f.streamFiles,t,f.platform,f.encodeFileName),l=0;try{n.forEach(function(s,d){l++;var v=r(d.options.compression,f.compression),h=d.options.compressionOptions||f.compressionOptions||{},o=d.dir,p=d.date;d._compressWorker(v,h).withStreamInfo("file",{name:s,dir:o,date:p,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(a)}),a.entriesCount=l}catch(s){a.error(s)}return a},Dn}var Gn,zs;function ic(){if(zs)return Gn;zs=1;var e=Ne(),i=Je();function r(n,f){i.call(this,"Nodejs stream input adapter for "+n),this._upstreamEnded=!1,this._bindStream(f)}return e.inherits(r,i),r.prototype._bindStream=function(n){var f=this;this._stream=n,n.pause(),n.on("data",function(t){f.push({data:t,meta:{percent:0}})}).on("error",function(t){f.isPaused?this.generatedError=t:f.error(t)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},r.prototype.pause=function(){return i.prototype.pause.call(this)?(this._stream.pause(),!0):!1},r.prototype.resume=function(){return i.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},Gn=r,Gn}var Zn,Us;function ac(){if(Us)return Zn;Us=1;var e=Or(),i=Ne(),r=Je(),n=To(),f=Io(),t=Ri(),a=Gl(),l=nc(),s=et(),d=ic(),v=function(w,c,m){var S=i.getTypeOf(c),g,b=i.extend(m||{},f);b.date=b.date||new Date,b.compression!==null&&(b.compression=b.compression.toUpperCase()),typeof b.unixPermissions=="string"&&(b.unixPermissions=parseInt(b.unixPermissions,8)),b.unixPermissions&&b.unixPermissions&16384&&(b.dir=!0),b.dosPermissions&&b.dosPermissions&16&&(b.dir=!0),b.dir&&(w=o(w)),b.createFolders&&(g=h(w))&&p.call(this,g,!0);var O=S==="string"&&b.binary===!1&&b.base64===!1;(!m||typeof m.binary>"u")&&(b.binary=!O);var k=c instanceof t&&c.uncompressedSize===0;(k||b.dir||!c||c.length===0)&&(b.base64=!1,b.binary=!0,c="",b.compression="STORE",S="string");var D=null;c instanceof t||c instanceof r?D=c:s.isNode&&s.isStream(c)?D=new d(w,c):D=i.prepareContent(w,c,b.binary,b.optimizedBinaryString,b.base64);var I=new a(w,D,b);this.files[w]=I},h=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var c=w.lastIndexOf("/");return c>0?w.substring(0,c):""},o=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},p=function(w,c){return c=typeof c<"u"?c:f.createFolders,w=o(w),this.files[w]||v.call(this,w,null,{dir:!0,createFolders:c}),this.files[w]};function y(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var c,m,S;for(c in this.files)S=this.files[c],m=c.slice(this.root.length,c.length),m&&c.slice(0,this.root.length)===this.root&&w(m,S)},filter:function(w){var c=[];return this.forEach(function(m,S){w(m,S)&&c.push(S)}),c},file:function(w,c,m){if(arguments.length===1)if(y(w)){var S=w;return this.filter(function(b,O){return!O.dir&&S.test(b)})}else{var g=this.files[this.root+w];return g&&!g.dir?g:null}else w=this.root+w,v.call(this,w,c,m);return this},folder:function(w){if(!w)return this;if(y(w))return this.filter(function(g,b){return b.dir&&w.test(g)});var c=this.root+w,m=p.call(this,c),S=this.clone();return S.root=m.name,S},remove:function(w){w=this.root+w;var c=this.files[w];if(c||(w.slice(-1)!=="/"&&(w+="/"),c=this.files[w]),c&&!c.dir)delete this.files[w];else for(var m=this.filter(function(g,b){return b.name.slice(0,w.length)===w}),S=0;S<m.length;S++)delete this.files[m[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var c,m={};try{if(m=i.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:e.utf8encode}),m.type=m.type.toLowerCase(),m.compression=m.compression.toUpperCase(),m.type==="binarystring"&&(m.type="string"),!m.type)throw new Error("No output type specified.");i.checkSupport(m.type),(m.platform==="darwin"||m.platform==="freebsd"||m.platform==="linux"||m.platform==="sunos")&&(m.platform="UNIX"),m.platform==="win32"&&(m.platform="DOS");var S=m.comment||this.comment||"";c=l.generateWorker(this,m,S)}catch(g){c=new r("error"),c.error(g)}return new n(c,m.type||"string",m.mimeType)},generateAsync:function(w,c){return this.generateInternalStream(w).accumulate(c)},generateNodeStream:function(w,c){return w=w||{},w.type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(c)}};return Zn=_,Zn}var Hn,Ws;function $o(){if(Ws)return Hn;Ws=1;var e=Ne();function i(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}return i.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var n=0,f;for(this.checkOffset(r),f=this.index+r-1;f>=this.index;f--)n=(n<<8)+this.byteAt(f);return this.index+=r,n},readString:function(r){return e.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC((r>>25&127)+1980,(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(r&31)<<1))}},Hn=i,Hn}var Vn,Gs;function zo(){if(Gs)return Vn;Gs=1;var e=$o(),i=Ne();function r(n){e.call(this,n);for(var f=0;f<this.data.length;f++)n[f]=n[f]&255}return i.inherits(r,e),r.prototype.byteAt=function(n){return this.data[this.zero+n]},r.prototype.lastIndexOfSignature=function(n){for(var f=n.charCodeAt(0),t=n.charCodeAt(1),a=n.charCodeAt(2),l=n.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===f&&this.data[s+1]===t&&this.data[s+2]===a&&this.data[s+3]===l)return s-this.zero;return-1},r.prototype.readAndCheckSignature=function(n){var f=n.charCodeAt(0),t=n.charCodeAt(1),a=n.charCodeAt(2),l=n.charCodeAt(3),s=this.readData(4);return f===s[0]&&t===s[1]&&a===s[2]&&l===s[3]},r.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,f},Vn=r,Vn}var Xn,Zs;function sc(){if(Zs)return Xn;Zs=1;var e=$o(),i=Ne();function r(n){e.call(this,n)}return i.inherits(r,e),r.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},r.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},r.prototype.readAndCheckSignature=function(n){var f=this.readData(4);return n===f},r.prototype.readData=function(n){this.checkOffset(n);var f=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,f},Xn=r,Xn}var Yn,Hs;function Uo(){if(Hs)return Yn;Hs=1;var e=zo(),i=Ne();function r(n){e.call(this,n)}return i.inherits(r,e),r.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,f},Yn=r,Yn}var Kn,Vs;function oc(){if(Vs)return Kn;Vs=1;var e=Uo(),i=Ne();function r(n){e.call(this,n)}return i.inherits(r,e),r.prototype.readData=function(n){this.checkOffset(n);var f=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,f},Kn=r,Kn}var Jn,Xs;function Wo(){if(Xs)return Jn;Xs=1;var e=Ne(),i=fr(),r=zo(),n=sc(),f=oc(),t=Uo();return Jn=function(a){var l=e.getTypeOf(a);return e.checkSupport(l),l==="string"&&!i.uint8array?new n(a):l==="nodebuffer"?new f(a):i.uint8array?new t(e.transformTo("uint8array",a)):new r(e.transformTo("array",a))},Jn}var Qn,Ys;function lc(){if(Ys)return Qn;Ys=1;var e=Wo(),i=Ne(),r=Ri(),n=xi(),f=Or(),t=qo(),a=fr(),l=0,s=3,d=function(h){for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&t[o].magic===h)return t[o];return null};function v(h,o){this.options=h,this.loadOptions=o}return v.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(h){var o,p;if(h.skip(22),this.fileNameLength=h.readInt(2),p=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(o=d(this.compressionMethod),o===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,o,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var o=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(o),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),h===l&&(this.dosPermissions=this.externalFileAttributes&63),h===s&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=e(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var o=h.index+this.extraFieldsLength,p,y,_;for(this.extraFields||(this.extraFields={});h.index+4<o;)p=h.readInt(2),y=h.readInt(2),_=h.readData(y),this.extraFields[p]={id:p,length:y,value:_};h.setIndex(o)},handleUTF8:function(){var h=a.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var o=this.findExtraFieldUnicodePath();if(o!==null)this.fileNameStr=o;else{var p=i.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var _=i.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var o=e(h.value);return o.readInt(1)!==1||n(this.fileName)!==o.readInt(4)?null:f.utf8decode(o.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var o=e(h.value);return o.readInt(1)!==1||n(this.fileComment)!==o.readInt(4)?null:f.utf8decode(o.readData(h.length-5))}return null}},Qn=v,Qn}var ei,Ks;function cc(){if(Ks)return ei;Ks=1;var e=Wo(),i=Ne(),r=Bo(),n=lc(),f=fr();function t(a){this.files=[],this.loadOptions=a}return t.prototype={checkSignature:function(a){if(!this.reader.readAndCheckSignature(a)){this.reader.index-=4;var l=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(l)+", expected "+i.pretty(a)+")")}},isSignature:function(a,l){var s=this.reader.index;this.reader.setIndex(a);var d=this.reader.readString(4),v=d===l;return this.reader.setIndex(s),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var a=this.reader.readData(this.zipCommentLength),l=f.uint8array?"uint8array":"array",s=i.transformTo(l,a);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var a=this.zip64EndOfCentralSize-44,l=0,s,d,v;l<a;)s=this.reader.readInt(2),d=this.reader.readInt(4),v=this.reader.readData(d),this.zip64ExtensibleData[s]={id:s,length:d,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var a,l;for(a=0;a<this.files.length;a++)l=this.files[a],this.reader.setIndex(l.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),l.readLocalPart(this.reader),l.handleUTF8(),l.processAttributes()},readCentralDir:function(){var a;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)a=new n({zip64:this.zip64},this.loadOptions),a.readCentralPart(this.reader),this.files.push(a);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var a=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(a<0){var l=!this.isSignature(0,r.LOCAL_FILE_HEADER);throw l?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(a);var s=a;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,a=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),a<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(a),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var v=s-d;if(v>0)this.isSignature(s,r.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(a){this.reader=e(a)},load:function(a){this.prepareReader(a),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},ei=t,ei}var ri,Js;function uc(){if(Js)return ri;Js=1;var e=Ne(),i=Ar(),r=Or(),n=cc(),f=Do(),t=et();function a(l){return new i.Promise(function(s,d){var v=l.decompressed.getContentWorker().pipe(new f);v.on("error",function(h){d(h)}).on("end",function(){v.streamInfo.crc32!==l.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}return ri=function(l,s){var d=this;return s=e.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),t.isNode&&t.isStream(l)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):e.prepareContent("the loaded zip file",l,!0,s.optimizedBinaryString,s.base64).then(function(v){var h=new n(s);return h.load(v),h}).then(function(h){var o=[i.Promise.resolve(h)],p=h.files;if(s.checkCRC32)for(var y=0;y<p.length;y++)o.push(a(p[y]));return i.Promise.all(o)}).then(function(h){for(var o=h.shift(),p=o.files,y=0;y<p.length;y++){var _=p[y],w=_.fileNameStr,c=e.resolve(_.fileNameStr);d.file(c,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:s.createFolders}),_.dir||(d.file(c).unsafeOriginalName=w)}return o.zipComment.length&&(d.comment=o.zipComment),d})},ri}var ti,Qs;function fc(){if(Qs)return ti;Qs=1;function e(){if(!(this instanceof e))return new e;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new e;for(var r in this)typeof this[r]!="function"&&(i[r]=this[r]);return i}}return e.prototype=ac(),e.prototype.loadAsync=uc(),e.support=fr(),e.defaults=Io(),e.version="3.10.1",e.loadAsync=function(i,r){return new e().loadAsync(i,r)},e.external=Ar(),ti=e,ti}var ni,eo;function hc(){if(eo)return ni;eo=1;var e=z,i=U,r=parseInt("0777",8);ni=n.mkdirp=n.mkdirP=n;function n(f,t,a,l){typeof t=="function"?(a=t,t={}):(!t||typeof t!="object")&&(t={mode:t});var s=t.mode,d=t.fs||i;s===void 0&&(s=r),l||(l=null);var v=a||function(){};f=e.resolve(f),d.mkdir(f,s,function(h){if(!h)return l=l||f,v(null,l);switch(h.code){case"ENOENT":if(e.dirname(f)===f)return v(h);n(e.dirname(f),t,function(o,p){o?v(o,p):n(f,t,v,p)});break;default:d.stat(f,function(o,p){o||!p.isDirectory()?v(h,l):v(null,l)});break}})}return n.sync=function f(t,a,l){(!a||typeof a!="object")&&(a={mode:a});var s=a.mode,d=a.fs||i;s===void 0&&(s=r),l||(l=null),t=e.resolve(t);try{d.mkdirSync(t,s),l=l||t}catch(h){switch(h.code){case"ENOENT":l=f(e.dirname(t),a,l),f(t,a,l);break;default:var v;try{v=d.statSync(t)}catch{throw h}if(!v.isDirectory())throw h;break}}return l},ni}var ii={exports:{}},ro;function dc(){return ro||(ro=1,(function(){var e,i=null,r=typeof window=="object"?window:ze,n=!1,f=r.process,t=Array,a=Error,l=0,s=1,d=2,v="Symbol",h="iterator",o="species",p=v+"("+o+")",y="return",_="_uh",w="_pt",c="_st",m="Invalid this",S="Invalid argument",g=`
From previous `,b="Chaining cycle detected for promise",O="Uncaught (in promise)",k="rejectionHandled",D="unhandledRejection",I,L,q={e:i},$=function(){},N=/^.+\/node_modules\/yaku\/.+\n?/mg,M=ii.exports=function(J){var se=this,he;if(!C(se)||se._s!==e)throw pe(m);if(se._s=d,n&&(se[w]=A()),J!==$){if(!T(J))throw pe(S);he=ce(J)(_e(se,s),_e(se,l)),he===q&&ge(se,l,he.e)}};M.default=M,ee(M,{then:function(J,se){if(this._s===void 0)throw pe();return je(this,ue(M.speciesConstructor(this,M)),J,se)},catch:function(G){return this.then(e,G)},_pCount:0,_pre:i,_Yaku:1}),M.resolve=function(J){return we(J)?J:Pe(ue(this),J)},M.reject=function(J){return ge(ue(this),l,J)},M.race=function(J){var se=this,he=ue(se),xe=function(Te){ge(he,s,Te)},Se=function(Te){ge(he,l,Te)},Ae=ce(Ee)(J,function(Te){se.resolve(Te).then(xe,Se)});return Ae===q?se.reject(Ae.e):he},M.all=function(J){var se=this,he=ue(se),xe=[],Se;function Ae(Te){ge(he,l,Te)}return Se=ce(Ee)(J,function(Te,lr){se.resolve(Te).then(function(R){xe[lr]=R,--Se||ge(he,s,xe)},Ae)}),Se===q?se.reject(Se.e):(Se||ge(he,s,[]),he)},M.Symbol=r[v]||{},ce(function(){Object.defineProperty(M,X(),{get:function(){return this}})})(),M.speciesConstructor=function(G,J){var se=G.constructor;return se&&se[X()]||J},M.unhandledRejection=function(G,J){try{r.console.error(O,n?J.longStack:Le(G,J))}catch{}},M.rejectionHandled=$,M.enableLongStackTrace=function(){n=!0},M.nextTick=f?f.nextTick:function(G){setTimeout(G)},M._Yaku=1;function X(){return M[v][o]||p}function ee(G,J){for(var se in J)G.prototype[se]=J[se];return G}function C(G){return G&&typeof G=="object"}function T(G){return typeof G=="function"}function B(G,J){return G instanceof J}function Y(G){return B(G,a)}function K(G,J,se){if(!J(G))throw pe(se)}function oe(){try{return I.apply(L,arguments)}catch(G){return q.e=G,q}}function ce(G,J){return I=G,L=J,oe}function fe(G,J){var se=t(G),he=0;function xe(){for(var Se=0;Se<he;)J(se[Se],se[Se+1]),se[Se++]=e,se[Se++]=e;he=0,se.length>G&&(se.length=G)}return function(Se,Ae){se[he++]=Se,se[he++]=Ae,he===2&&M.nextTick(xe)}}function Ee(G,J){var se,he=0,xe,Se,Ae;if(!G)throw pe(S);var Te=G[M[v][h]];if(T(Te))xe=Te.call(G);else if(T(G.next))xe=G;else if(B(G,t)){for(se=G.length;he<se;)J(G[he],he++);return he}else throw pe(S);for(;!(Se=xe.next()).done;)if(Ae=ce(J)(Se.value,he++),Ae===q)throw T(xe[y])&&xe[y](),Ae.e;return he}function pe(G){return new TypeError(G)}function A(G){return(G?"":g)+new a().stack}var P=fe(999,function(G,J){var se,he;if(he=G._s?J._onFulfilled:J._onRejected,he===e){ge(J,G._s,G._v);return}if(se=ce(Ce)(he,G._v),se===q){ge(J,l,se.e);return}Pe(J,se)}),Q=fe(9,function(G){Ie(G)||(G[_]=1,ae(D,G))});function ae(G,J){var se="on"+G.toLowerCase(),he=r[se];f&&f.listeners(G).length?G===D?f.emit(G,J._v,J):f.emit(G,J):he?he({reason:J._v,promise:J}):M[G](J._v,J)}function we(G){return G&&G._Yaku}function ue(G){if(we(G))return new G($);var J,se,he;return J=new G(function(xe,Se){if(J)throw pe();se=xe,he=Se}),K(se,T),K(he,T),J}function _e(G,J){return function(se){n&&(G[c]=A(!0)),J===s?Pe(G,se):ge(G,J,se)}}function je(G,J,se,he){return T(se)&&(J._onFulfilled=se),T(he)&&(G[_]&&ae(k,G),J._onRejected=he),n&&(J._pre=G),G[G._pCount++]=J,G._s!==d&&P(G,J),J}function Ie(G){if(G._umark)return!0;G._umark=!0;for(var J=0,se=G._pCount,he;J<se;)if(he=G[J++],he._onRejected||Ie(he))return!0}function Le(G,J){var se=[];function he(xe){return se.push(xe.replace(/^\s+|\s+$/g,""))}return n&&(J[c]&&he(J[c]),(function xe(Se){Se&&w in Se&&(xe(Se._next),he(Se[w]+""),xe(Se._pre))})(J)),(G&&G.stack?G.stack:G)+(`
`+se.join(`
`)).replace(N,"")}function Ce(G,J){return G(J)}function ge(G,J,se){var he=0,xe=G._pCount;if(G._s===d)for(G._s=J,G._v=se,J===l&&(n&&Y(se)&&(se.longStack=Le(se,G)),Q(G));he<xe;)P(G,G[he++]);return G}function Pe(G,J){if(J===G&&J)return ge(G,l,pe(b)),G;if(J!==i&&(T(J)||C(J))){var se=ce(Ue)(J);if(se===q)return ge(G,l,se.e),G;T(se)?(n&&we(J)&&(G._next=J),we(J)?qe(G,J,se):M.nextTick(function(){qe(G,J,se)})):ge(G,s,J)}else ge(G,s,J);return G}function Ue(G){return G.then}function qe(G,J,se){var he=ce(se,J)(function(xe){J&&(J=i,Pe(G,xe))},function(xe){J&&(J=i,ge(G,l,xe))});he===q&&J&&(ge(G,l,he.e),J=i)}})()),ii.exports}var ai,to;function pc(){if(to)return ai;to=1;var e=dc();return ai={extendPrototype:function(i,r){for(var n in r)i.prototype[n]=r[n];return i},isFunction:function(i){return typeof i=="function"},isNumber:function(i){return typeof i=="number"},Promise:e,slice:[].slice},ai}var si,no;function vc(){if(no)return si;no=1;var e=pc(),i=e.isFunction;return si=function(r,n){return function(f,t,a,l,s){var d=arguments.length,v,h,o,p;h=new e.Promise(function(w,c){o=w,p=c});function y(w,c){w==null?o(c):p(w)}switch(d){case 0:r.call(n,y);break;case 1:i(f)?r.call(n,f):r.call(n,f,y);break;case 2:i(t)?r.call(n,f,t):r.call(n,f,t,y);break;case 3:i(a)?r.call(n,f,t,a):r.call(n,f,t,a,y);break;case 4:i(l)?r.call(n,f,t,a,l):r.call(n,f,t,a,l,y);break;case 5:i(s)?r.call(n,f,t,a,l,s):r.call(n,f,t,a,l,s,y);break;default:v=new Array(d);for(var _=0;_<d;_++)v[_]=arguments[_];if(i(v[d-1]))return r.apply(n,v);v[_]=y,r.apply(n,v)}return h}},si}var oi,io;function mc(){if(io)return oi;io=1;var e=U,i=z,r=fc(),n=hc(),f=vc(),t=f(e.writeFile),a=f(e.readFile),l=f(n);function s(v){function h(S,g,b,O){var k=0;return k+=S,k+=g<<8,k+=b<<16,k+=O<<24,k}if(v[0]===80&&v[1]===75&&v[2]===3&&v[3]===4)return v;if(v[0]!==67||v[1]!==114||v[2]!==50||v[3]!==52)throw new Error("Invalid header: Does not start with Cr24");var o=v[4]===3,p=v[4]===2;if(!p&&!o||v[5]||v[6]||v[7])throw new Error("Unexpected crx format version number.");if(p){var y=h(v[8],v[9],v[10],v[11]),_=h(v[12],v[13],v[14],v[15]),w=16+y+_;return v.slice(w,v.length)}var c=h(v[8],v[9],v[10],v[11]),m=12+c;return v.slice(m,v.length)}function d(v,h){var o=i.resolve(v),p=i.extname(v),y=i.basename(v,p),_=i.dirname(v);return h=h||i.resolve(_,y),a(o).then(function(w){return r.loadAsync(s(w))}).then(function(w){var c=Object.keys(w.files);return Promise.all(c.map(function(m){var S=!w.files[m].dir,g=i.join(h,m),b=S&&i.dirname(g)||g,O=w.files[m].async("nodebuffer");return l(b).then(function(){return S?O:!1}).then(function(k){return k?t(g,k):!0})}))})}return oi=d,oi}var ao;function gc(){if(ao)return Dr;ao=1,Object.defineProperty(Dr,"__esModule",{value:!0});const e=U,i=z,r=Nl(),n=Eo(),f=mc(),t=(a,l,s=5)=>{const d=n.getPath();e.existsSync(d)||e.mkdirSync(d,{recursive:!0});const v=i.resolve(`${d}/${a}`);return new Promise((h,o)=>{if(!e.existsSync(v)||l){e.existsSync(v)&&r.sync(v);const p=`https://clients2.google.com/service/update2/crx?response=redirect&acceptformat=crx2,crx3&x=id%3D${a}%26uc&prodversion=32`,y=i.resolve(`${v}.crx`);n.downloadFile(p,y).then(()=>{f(y,v).then(()=>{n.changePermissions(v,755),h(v)}).catch(_=>{if(!e.existsSync(i.resolve(v,"manifest.json")))return o(_)})}).catch(_=>{if(console.log(`Failed to fetch extension, trying ${s-1} more times`),s<=1)return o(_);setTimeout(()=>{t(a,l,s-1).then(h).catch(o)},200)})}else h(v)})};return Dr.default=t,Dr}var so;function yc(){if(so)return Oe;so=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.MOBX_DEVTOOLS=Oe.APOLLO_DEVELOPER_TOOLS=Oe.CYCLEJS_DEVTOOL=Oe.REDUX_DEVTOOLS=Oe.VUEJS3_DEVTOOLS=Oe.VUEJS_DEVTOOLS=Oe.ANGULARJS_BATARANG=Oe.JQUERY_DEBUGGER=Oe.BACKBONE_DEBUGGER=Oe.REACT_DEVELOPER_TOOLS=Oe.EMBER_INSPECTOR=void 0;const e=ne,i=U,r=z,n=kl(),f=gc(),t=Eo();let a={};const l=()=>r.resolve(t.getPath(),"IDMap.json");if(i.existsSync(l()))try{a=JSON.parse(i.readFileSync(l(),"utf8"))}catch{console.error("electron-devtools-installer: Invalid JSON present in the IDMap file")}const s=(d,v={})=>{typeof v=="boolean"&&(v={forceDownload:v});const{forceDownload:h,loadExtensionOptions:o}=v;if(process.type!=="browser")return Promise.reject(new Error("electron-devtools-installer can only be used from the main process"));if(Array.isArray(d))return d.reduce((w,c)=>w.then(()=>s(c,v)),Promise.resolve(""));let p;if(typeof d=="object"&&d.id){p=d.id;const w=process.versions.electron.split("-")[0];if(!n.satisfies(w,d.electron))return Promise.reject(new Error(`Version of Electron: ${w} does not match required range ${d.electron} for extension ${p}`))}else if(typeof d=="string")p=d;else return Promise.reject(new Error(`Invalid extensionReference passed in: "${d}"`));const y=a[p];let _;return e.session.defaultSession.getExtension?_=!!y&&e.session.defaultSession.getAllExtensions().find(w=>w.name===y):_=!!y&&e.BrowserWindow.getDevToolsExtensions&&e.BrowserWindow.getDevToolsExtensions().hasOwnProperty(y),!h&&_?Promise.resolve(a[p]):f.default(p,h||!1).then(w=>{if(_)if(e.session.defaultSession.removeExtension){const m=e.session.defaultSession.getAllExtensions().find(S=>S.name).id;e.session.defaultSession.removeExtension(m)}else e.BrowserWindow.removeDevToolsExtension(y);if(e.session.defaultSession.loadExtension)return e.session.defaultSession.loadExtension(w,o).then(m=>Promise.resolve(m.name));const c=e.BrowserWindow.addDevToolsExtension(w);return i.writeFileSync(l(),JSON.stringify(Object.assign(a,{[p]:c}))),Promise.resolve(c)})};return Oe.default=s,Oe.EMBER_INSPECTOR={id:"bmdblncegkenkacieihfhpjfppoconhi",electron:">=1.2.1"},Oe.REACT_DEVELOPER_TOOLS={id:"fmkadmapgofadopljbjfkapdkoienihi",electron:">=1.2.1"},Oe.BACKBONE_DEBUGGER={id:"bhljhndlimiafopmmhjlgfpnnchjjbhd",electron:">=1.2.1"},Oe.JQUERY_DEBUGGER={id:"dbhhnnnpaeobfddmlalhnehgclcmjimi",electron:">=1.2.1"},Oe.ANGULARJS_BATARANG={id:"ighdmehidhipcmcojjgiloacoafjmpfk",electron:">=1.2.1"},Oe.VUEJS_DEVTOOLS={id:"nhdogjmejiglipccpnnnanhbledajbpd",electron:">=1.2.1"},Oe.VUEJS3_DEVTOOLS={id:"ljjemllljcmogpfapbkkighbhhppjdbg",electron:">=1.2.1"},Oe.REDUX_DEVTOOLS={id:"lmhkpmbekcpmknklioeibfkpmmfibljd",electron:">=1.2.1"},Oe.CYCLEJS_DEVTOOL={id:"dfgplfmhhmdekalbpejekgfegkonjpfp",electron:">=1.2.1"},Oe.APOLLO_DEVELOPER_TOOLS={id:"jdkknkkbebbapilgoeccciglkfbmbnfm",electron:">=1.2.1"},Oe.MOBX_DEVTOOLS={id:"pfgnfdagidkfgccljigdamigbcnndkod",electron:">=1.2.1"},Oe}yc();const ie={mainWindow:null,ptyProcess:null,emulatorProcess:null,currentBuildProcess:null,currentEmulatorConfig:{selectedEmulator:"gen_sdl2"},helpWatcher:null},wr=z.join(ne.app.getPath("home"),".retrostudio"),fi=z.join(wr,"emulators"),Wr=z.join(wr,"toolkit");function Go(){U.existsSync(wr)||U.mkdirSync(wr,{recursive:!0}),U.existsSync(fi)||U.mkdirSync(fi,{recursive:!0}),U.existsSync(Wr)||U.mkdirSync(Wr,{recursive:!0})}function hi(e,i){try{Go();const r=z.join(wr,e);return U.writeFileSync(r,JSON.stringify(i,null,2),"utf-8"),!0}catch(r){return console.error(`Erro ao salvar arquivo de config ${e}:`,r),!1}}function Gr(e,i={}){try{const r=z.join(wr,e);if(U.existsSync(r))return JSON.parse(U.readFileSync(r,"utf-8"))}catch(r){console.error(`Erro ao carregar arquivo de config ${e}:`,r)}return i}function Zo(){try{if(ne.app&&typeof ne.app.getAppPath=="function")return ne.app.getAppPath()}catch(e){console.warn("No foi possvel obter appPath:",e)}return null}function Ho(e,i){if(U.statSync(e).isDirectory()){U.existsSync(i)||U.mkdirSync(i,{recursive:!0}),U.readdirSync(e).forEach(f=>{const t=z.join(e,f),a=z.join(i,f);Ho(t,a)});return}U.copyFileSync(e,i)}function yr(e){if(!e)throw new Error("Caminho do projeto no informado.");const i=z.resolve(e);if(!U.existsSync(i)||!U.statSync(i).isDirectory())throw new Error("Projeto invlido ou inacessvel.");return i}function sr(e,i){const r=z.resolve(e),n=z.resolve(i);if(!n.startsWith(r))throw new Error("Operao fora do diretrio do projeto.");return n}function oo(e){if(!e||typeof e!="string")throw new Error("Nome invlido.");const i=e.trim();if(!i)throw new Error("Nome invlido.");if(i.includes("/")||i.includes("\\"))throw new Error("Nome no pode conter separadores de diretrios.");return i}function vr(e){if(!U.existsSync(e))throw new Error("Entrada no encontrada.")}function _c(e,i){if(!i.has(e))return e;const r=e.lastIndexOf("."),n=r>0,f=n?e.slice(0,r):e,t=n?e.slice(r):"";let a=1,l=`${f} copy${t}`;for(;i.has(l);)a+=1,l=`${f} copy ${a}${t}`;return l}function wc(e){if(ie.helpWatcher)try{ie.helpWatcher.close()}catch(f){console.error("[Help] Erro ao fechar watcher anterior:",f)}const i=[z.join(ne.app.getAppPath(),"docs"),z.join(__dirname,"..","..","docs"),z.join(__dirname,"..","docs"),z.join(process.cwd(),"docs")];let r=null;for(const f of i)if(U.existsSync(f)){r=f;break}if(!r){console.warn("[Help] Diretrio docs no encontrado para Hot Reload");return}console.log("[Help] Configurando Hot Reload em:",r);let n;try{const f=process.platform==="linux";ie.helpWatcher=U.watch(r,{recursive:!f},(t,a)=>{a&&a.endsWith(".md")&&(clearTimeout(n),n=setTimeout(()=>{e&&!e.isDestroyed()&&(console.log(`[Help] Mudana detectada: ${a}. Recarregando contedo...`),e.webContents.send("help-content-updated"))},500))})}catch(f){console.error("[Help] Falha ao iniciar watcher:",f)}}const li=!ne.app.isPackaged;async function Vo(){const e=li?z.join(process.cwd(),"public","icon.png"):z.join(__dirname,"../dist","icon.png");try{new ne.Tray(e)}catch(o){console.warn("Falha ao carregar cone da bandeja:",o.message)}const i=ne.screen.getCursorScreenPoint(),r=ne.screen.getDisplayNearestPoint(i),{x:n,y:f,width:t,height:a}=r.workArea,l=1500,s=867,d=Math.floor(n+(t-l)/2),v=Math.floor(f+(a-s)/2),h=z.join(__dirname,"preload.js");if(ie.mainWindow=new ne.BrowserWindow({width:l,height:s,x:d,y:v,frame:!1,titleBarStyle:"hidden",webPreferences:{nodeIntegration:!0,contextIsolation:!0,preload:h,devTools:!0,sandbox:!1},icon:e,show:!1}),ie.mainWindow.once("ready-to-show",()=>{console.log("[Main] Event: ready-to-show"),ie.mainWindow.setPosition(d,v),ie.mainWindow.show(),li&&(console.log("[Main] Janela pronta - Abrindo DevTools"),ie.mainWindow.webContents.openDevTools({mode:"detach"}))}),setTimeout(()=>{ie.mainWindow&&!ie.mainWindow.isDestroyed()&&!ie.mainWindow.isVisible()&&(console.warn("[Main] Timeout: ready-to-show demorou demais, mostrando janela foradamente"),ie.mainWindow.show(),li&&ie.mainWindow.webContents.openDevTools({mode:"detach"}))},5e3),wc(ie.mainWindow),ie.mainWindow.on("maximize",()=>{ie.mainWindow.webContents.send("window-control-state",{isMaximized:!0})}),ie.mainWindow.on("unmaximize",()=>{ie.mainWindow.webContents.send("window-control-state",{isMaximized:!1})}),ie.mainWindow.webContents.on("devtools-opened",()=>{ie.mainWindow.webContents.send("status-message",{message:"DevTools Aberto",type:"info"})}),process.env.VITE_DEV_SERVER_URL){console.log("[Main] VITE_DEV_SERVER_URL detectada:",process.env.VITE_DEV_SERVER_URL);try{await ie.mainWindow.loadURL(process.env.VITE_DEV_SERVER_URL),console.log("[Main] URL carregada com sucesso")}catch(o){console.error("[Main] Erro ao carregar URL do Vite, usando fallback local:",o),ie.mainWindow.loadFile(z.join(__dirname,"../dist/index.html"))}}else console.log("[Main] Carregando index.html local (Produo ou Sem Server)"),ie.mainWindow.loadFile(z.join(__dirname,"../dist/index.html"))}function bc(){const e=[{label:"RetroStudio",submenu:[{role:"quit"}]},{label:"Edit",submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"}]},{label:"View",submenu:[{role:"reload"},{role:"forceReload"},{role:"toggleDevTools"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn"},{role:"zoomOut"}]}];ne.Menu.setApplicationMenu(ne.Menu.buildFromTemplate(e)),ne.globalShortcut.register("CommandOrControl+Shift+I",()=>{ie.mainWindow&&(ie.mainWindow.webContents.isDevToolsOpened()?ie.mainWindow.webContents.closeDevTools():ie.mainWindow.webContents.openDevTools({mode:"detach"}))}),ne.globalShortcut.register("F5",()=>{ie.mainWindow&&ie.mainWindow.webContents.reload()})}function Ec(){ne.ipcMain.on("get-home",e=>{const i=process.env.HOME||process.env.HOMEPATH||process.env.USERPROFILE;if(i){const r=z.resolve(i),n=Ur(z.join(r));e.reply("send-directory",n)}else console.error("No foi possvel determinar o diretrio home.")}),ne.ipcMain.on("current-path",e=>{const i=Ur(z.join(process.cwd()));e.reply("send-directory",i)}),ne.ipcMain.on("directory-navigate",(e,i)=>{const r=Ur(i.path);e.reply("send-directory",r)}),ne.ipcMain.on("back-directory-navigate",(e,i)=>{const r=z.resolve(i.path,".."),n=Ur(r);e.reply("send-directory",n)}),ne.ipcMain.on("fs-create-entry",(e,i)=>{try{const{projectPath:r,targetDir:n,entryName:f,entryType:t,templatePath:a}=i||{},l=yr(r),s=oo(f),d=sr(l,n);if(!["file","folder"].includes(t))throw new Error("Tipo de entrada invlido.");const v=z.join(d,s);if(U.existsSync(v))throw new Error("J existe um item com esse nome.");if(t==="folder")U.mkdirSync(v,{recursive:!0});else if(a){const h=sr(l,a);U.copyFileSync(h,v)}else U.writeFileSync(v,"","utf-8");Ke(e,"create",{success:!0,path:v})}catch(r){console.error("fs-create-entry error:",r),Ke(e,"create",{success:!1,error:r.message})}}),ne.ipcMain.on("fs-rename-entry",(e,i)=>{try{const{projectPath:r,targetPath:n,newName:f}=i||{},t=yr(r),a=sr(t,n);vr(a);const l=oo(f),s=z.join(z.dirname(a),l);if(U.existsSync(s))throw new Error("J existe um item com esse nome.");U.renameSync(a,s),Ke(e,"rename",{success:!0,path:s,previousPath:a})}catch(r){console.error("fs-rename-entry error:",r),Ke(e,"rename",{success:!1,error:r.message})}}),ne.ipcMain.on("fs-delete-entry",(e,i)=>{try{const{projectPath:r,targetPath:n}=i||{},f=yr(r),t=sr(f,n);vr(t),U.statSync(t).isDirectory()?U.rmSync(t,{recursive:!0,force:!0}):U.unlinkSync(t),Ke(e,"delete",{success:!0,path:t})}catch(r){console.error("fs-delete-entry error:",r),Ke(e,"delete",{success:!1,error:r.message})}}),ne.ipcMain.on("fs-copy-entry",(e,i)=>{try{const{projectPath:r,sourcePath:n,targetDir:f}=i||{},t=yr(r),a=sr(t,n);vr(a);const l=sr(t,f);vr(l);const s=z.basename(a),d=new Set(U.readdirSync(l)),v=_c(s,d),h=z.join(l,v);Xo(a,h),Ke(e,"copy",{success:!0,path:h})}catch(r){console.error("fs-copy-entry error:",r),Ke(e,"copy",{success:!1,error:r.message})}}),ne.ipcMain.on("fs-move-entry",(e,i)=>{try{const{projectPath:r,sourcePath:n,targetDir:f}=i||{},t=yr(r),a=sr(t,n);vr(a);const l=sr(t,f);vr(l);const s=z.join(l,z.basename(a));if(U.existsSync(s))throw new Error("J existe um item com esse nome no destino.");U.renameSync(a,s),Ke(e,"move",{success:!0,path:s})}catch(r){console.error("fs-move-entry error:",r),Ke(e,"move",{success:!1,error:r.message})}}),ne.ipcMain.on("fs-open-with",(e,i)=>{try{const{projectPath:r,targetPath:n}=i||{},f=yr(r),t=sr(f,n);vr(t),ne.shell.openPath(t),Ke(e,"open-with",{success:!0,path:t})}catch(r){console.error("fs-open-with error:",r),Ke(e,"open-with",{success:!1,error:r.message})}}),ne.ipcMain.on("open-file",(e,i)=>{const r=Sc(i);e.reply("receive-file",r)}),ne.ipcMain.on("save-file",(e,i)=>{console.log("Salvando arquivo: ");const r=i.path,n=i.cod;U.writeFile(r,n,"utf-8",f=>{if(f){console.error("Erro ao salvar arquivo: ",f);return}console.log("Arquivo salvo com sucesso")}),console.log(i)})}function Ur(e){try{const i=U.statSync(e);if(i.isDirectory()&&(z.basename(e)==="out"||z.basename(e).startsWith(".")))return null;const r={id:""+Math.random(),label:z.basename(e),tipo:i.isDirectory()?"diretorio":"arquivo",path:e,expanded:!1};if(i.isDirectory()){const n=U.readdirSync(e).map(f=>{const t=z.join(e,f);try{if(U.statSync(t).isDirectory()&&!f.startsWith("."))return{id:""+Math.random(),label:f,tipo:"diretorio",path:t,expanded:!1}}catch{return null}});r.children=n.filter(Boolean)}return r}catch(i){return console.error("Erro on navigateDirectory: ",i),null}}function Xo(e,i){if(U.statSync(e).isDirectory()){U.mkdirSync(i,{recursive:!0}),U.readdirSync(e).forEach(n=>{Xo(z.join(e,n),z.join(i,n))});return}U.copyFileSync(e,i)}function Ke(e,i,r={},n=null){e.reply("fs-operation-result",{operation:i,requestId:n,...r})}function Sc(e){try{if(!e||typeof e!="string")return console.error("[lerConteudoArquivo] Caminho invalido"),null;const i=e.trim();return i.startsWith("make:")||i.includes("***")?(console.error("[lerConteudoArquivo] Linha de erro, nao eh arquivo"),null):U.existsSync(i)?(console.log("[lerConteudoArquivo] Lendo:",i),U.readFileSync(i,"utf-8")):(console.error("[lerConteudoArquivo] Arquivo nao encontrado:",i),null)}catch(i){return console.error("[lerConteudoArquivo] Erro:",i.message),null}}const lo={"md-skeleton":"md-skeleton","32x-skeleton":"32x-skeleton","sgdk-skeleton":"sgdk-skeleton","sgdk-stage9-sample":"sgdk-stage9-sample"};function xc(e){const i=[],r=Zo(),n=z.resolve(__dirname,".."),f=process.resourcesPath;i.push(z.join(Wr,"examples",e)),r&&(i.push(z.join(r,"toolkit","examples",e)),i.push(z.join(r,"src","toolkit","examples",e)),i.push(z.join(r,"..","src","toolkit","examples",e))),f&&(i.push(z.join(f,"toolkit","examples",e)),i.push(z.join(f,"app.asar.unpacked","toolkit","examples",e))),i.push(z.join(__dirname,"toolkit","examples",e)),i.push(z.join(n,"src","toolkit","examples",e)),i.push(z.join(n,"toolkit","examples",e)),i.push(z.join(process.cwd(),"toolkit","examples",e)),i.push(z.join(process.cwd(),"src","toolkit","examples",e));for(const t of i)if(t&&U.existsSync(t))return t;return console.warn(`Template "${e}" no encontrado. Caminhos testados:`,i),null}function Rc(e){const i=lo[e]?e:"md-skeleton";return{key:i,absolutePath:xc(lo[i])}}function Yo(e){const i=U.statSync(e);if(i.isDirectory()&&(z.basename(e)==="out"||z.basename(e).startsWith(".")))return null;const r={id:""+Math.random(),label:z.basename(e),tipo:i.isDirectory()?"diretorio":"arquivo",path:e,expanded:!1};if(i.isDirectory()){const n=U.readdirSync(e).map(f=>{const t=z.join(e,f);return z.basename(t)!=="out"?Yo(t):null}).filter(Boolean).sort((f,t)=>f.tipo==="diretorio"&&t.tipo==="arquivo"?-1:f.tipo==="arquivo"&&t.tipo==="diretorio"?1:0);r.children=n}return r}function ur(e){const i=z.join(e,"retro-studio.json");let r={name:z.basename(e),template:"md-skeleton",createdAt:new Date().toISOString(),resourcePath:"res",assets:[]};try{if(U.existsSync(i)){const n=U.readFileSync(i,"utf-8"),f=JSON.parse(n);r={...r,...f}}else U.writeFileSync(i,JSON.stringify(r,null,2)),console.log("[IPC] retro-studio.json criado em:",e)}catch(n){console.error("[IPC] Erro ao ler/criar retro-studio.json:",n)}return r}function Rr(e){const i=ur(e);return z.join(e,i.resourcePath||"res")}function kc(e){const i=z.extname(e).toLowerCase();return[".pal",".act"].includes(i)?"palette":[".wav",".mp3",".ogg",".vgm",".vgz"].includes(i)?"sound":[".json",".res"].includes(i)?"tilemap":([".png",".jpg",".jpeg",".gif",".bmp"].includes(i),null)}function Cc(e){try{const i=Rr(e),r=ur(e);if(!U.existsSync(i))return{success:!0,newAssets:[],unidentifiedAssets:[]};const n=d=>{const v=[],h=U.readdirSync(d);for(const o of h){const p=z.join(d,o);try{const y=U.statSync(p);y.isFile()?v.push(p):y.isDirectory()&&v.push(...n(p))}catch(y){console.warn("[IPC] Erro ao acessar:",p,y.message)}}return v},f=n(i),t=(r.assets||[]).map(d=>d.path),a=f.filter(d=>{const v=z.relative(e,d);return!t.includes(v)}),l=[],s=[];for(const d of a){const v=z.basename(d),h=U.statSync(d),o=kc(v),p={name:v,size:h.size,path:z.relative(e,d),createdAt:h.birthtime&&h.birthtime.toISOString()||new Date().toISOString(),updatedAt:h.mtime&&h.mtime.toISOString()||new Date().toISOString()};o?l.push({...p,type:o,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,metadata:o==="palette"?{}:{}}):[".png",".jpg",".jpeg",".gif",".bmp"].includes(z.extname(v).toLowerCase())&&s.push(p)}return console.log(`[IPC] Escaneo de recursos: ${l.length} identificados, ${s.length} aguardando classificao`),{success:!0,newAssets:l,unidentifiedAssets:s}}catch(i){return console.error("[IPC] Erro ao escanear recursos:",i),{success:!1,error:i.message,newAssets:[],unidentifiedAssets:[]}}}function Ac(){ne.ipcMain.on("req-projec",(e,i)=>{const r=Yo(i.path),n=ur(i.path);e.reply("read-files",{estrutura:r,config:n})}),ne.ipcMain.on("get-project-config",(e,i)=>{const r=ur(i);e.reply("project-config",r)}),ne.ipcMain.on("add-asset-to-config",(e,{projectPath:i,asset:r})=>{try{const n=ur(i);n.assets||(n.assets=[]),n.assets.some(a=>a.id===r.id)||n.assets.push(r);const t=z.join(i,"retro-studio.json");U.writeFileSync(t,JSON.stringify(n,null,2)),e.reply("add-asset-result",{success:!0,config:n})}catch(n){console.error("[IPC] Erro ao adicionar asset:",n),e.reply("add-asset-result",{success:!1,error:n.message})}}),ne.ipcMain.on("save-project-config",(e,{projectPath:i,config:r})=>{try{const n=z.join(i,"retro-studio.json");U.writeFileSync(n,JSON.stringify(r,null,2)),e.reply("save-project-config-result",{success:!0})}catch(n){console.error("[IPC] Erro ao salvar retro-studio.json:",n),e.reply("save-project-config-result",{success:!1,error:n.message})}}),ne.ipcMain.on("remove-asset-from-config",(e,{projectPath:i,assetId:r})=>{try{const n=ur(i);n.assets||(n.assets=[]),n.assets=n.assets.filter(t=>t.id!==r);const f=z.join(i,"retro-studio.json");U.writeFileSync(f,JSON.stringify(n,null,2)),e.reply("remove-asset-result",{success:!0})}catch(n){console.error("[IPC] Erro ao remover asset:",n),e.reply("remove-asset-result",{success:!1,error:n.message})}}),ne.ipcMain.on("create-project",(e,i)=>{try{const{name:r,path:n,template:f}=i;if(!r||!n){e.returnValue={success:!1,error:"Name and path are required"};return}const t=z.join(n,r);if(U.existsSync(t)){e.returnValue={success:!1,error:"Directory already exists"};return}const{absolutePath:a,key:l}=Rc(f);if(!U.existsSync(a)){e.returnValue={success:!1,error:`Template "${l}" not found`};return}U.mkdirSync(t,{recursive:!0}),Ho(a,t);const s=z.join(t,"scenes");U.existsSync(s)||U.mkdirSync(s,{recursive:!0});const d={name:r,template:l,createdAt:new Date().toISOString(),resourcePath:"res",assets:[]};U.writeFileSync(z.join(t,"retro-studio.json"),JSON.stringify(d,null,2)),e.returnValue={success:!0,path:t}}catch(r){console.error("Error creating project:",r),e.returnValue={success:!1,error:r.message}}}),ne.ipcMain.on("scan-resources",(e,i)=>{try{const r=Cc(i);e.reply("scan-resources-result",r)}catch(r){console.error("[IPC] Erro no handler scan-resources:",r),e.reply("scan-resources-result",{success:!1,error:r.message,newAssets:[],unidentifiedAssets:[]})}}),ne.ipcMain.on("add-detected-assets",(e,{projectPath:i,assets:r})=>{try{const n=ur(i);n.assets||(n.assets=[]);for(const t of r)n.assets.some(l=>l.name===t.name)||n.assets.push(t);const f=z.join(i,"retro-studio.json");U.writeFileSync(f,JSON.stringify(n,null,2)),e.reply("add-detected-assets-result",{success:!0,config:n})}catch(n){console.error("[IPC] Erro ao adicionar assets detectados:",n),e.reply("add-detected-assets-result",{success:!1,error:n.message})}}),ne.ipcMain.on("copy-asset-to-project",(e,i)=>{try{const{projectPath:r,filename:n,buffer:f}=i,t=Rr(r);U.existsSync(t)||U.mkdirSync(t,{recursive:!0});const a=z.join(t,n);U.writeFileSync(a,Buffer.from(f));const l=z.relative(r,a);e.reply("copy-asset-result",{success:!0,assetPath:l})}catch(r){console.error("[IPC] Erro ao copiar asset:",r),e.reply("copy-asset-result",{success:!1,error:r.message})}}),ne.ipcMain.on("register-asset-resource",(e,i)=>{try{const{projectPath:r,resourceEntry:n,assetName:f}=i,t=Rr(r),a=z.join(t,"resources.res");U.existsSync(a)||(U.existsSync(t)||U.mkdirSync(t,{recursive:!0}),U.writeFileSync(a,""));let l=U.readFileSync(a,"utf-8");const s=l.split(`
`),v=n.split(/\s+/)[1];let h=!1;const o=s.map(p=>{const y=p.trim();if(!y)return p;const _=y.split(/\s+/);return _.length>=2&&_[1]===v?(h=!0,n):p});h?U.writeFileSync(a,o.join(`
`)):(l&&!l.endsWith(`
`)&&(l+=`
`),l+=n+`
`,U.writeFileSync(a,l)),e.reply("register-asset-result",{success:!0,message:`Asset "${f}" registrado com sucesso`})}catch(r){console.error("[IPC] Erro ao registrar asset:",r),e.reply("register-asset-result",{success:!1,error:r.message})}}),ne.ipcMain.on("get-res-files",(e,i)=>{try{const r=Rr(i);if(!U.existsSync(r)){e.reply("get-res-files-result",{success:!0,files:[]});return}const n=t=>{let a=[];if(!U.existsSync(t))return[];const l=U.readdirSync(t);for(const s of l){const d=z.join(t,s),v=U.statSync(d);v.isFile()?a.push(z.relative(i,d)):v.isDirectory()&&a.push(...n(d))}return a},f=n(r);e.reply("get-res-files-result",{success:!0,files:f})}catch(r){console.error("[IPC] Erro ao obter arquivos recursivos:",r),e.reply("get-res-files-result",{success:!1,error:r.message})}}),ne.ipcMain.on("get-palette-colors",(e,i)=>{try{const{projectPath:r,assetPath:n}=i,f=z.isAbsolute(n)?n:z.join(r,n);if(!U.existsSync(f))throw new Error("Arquivo de paleta no encontrado");const t=z.extname(f).toLowerCase();let a=[];if(t===".pal"){const s=U.readFileSync(f,"utf-8").split(`
`);if(s.length>0&&s[0]&&s[0].trim().startsWith("JASC-PAL")){const d=parseInt(s[2]);for(let v=0;v<d&&3+v<s.length;v++){const h=s[3+v].trim().split(/\s+/);if(h.length>=3){const o=parseInt(h[0]),p=parseInt(h[1]),y=parseInt(h[2]),_=`#${[o,p,y].map(w=>w.toString(16).padStart(2,"0")).join("").toUpperCase()}`;a.push({r:o,g:p,b:y,hex:_})}}}}else if(t===".act"){const l=U.readFileSync(f);if(l.length>=768)for(let s=0;s<256;s++){const d=l[s*3],v=l[s*3+1],h=l[s*3+2],o=`#${[d,v,h].map(p=>p.toString(16).padStart(2,"0")).join("").toUpperCase()}`;a.push({r:d,g:v,b:h,hex:o})}}e.reply("get-palette-colors-result",{success:!0,colors:a,assetPath:n})}catch(r){console.error("[IPC] Erro ao extrair cores:",r),e.reply("get-palette-colors-result",{success:!1,error:r.message})}}),ne.ipcMain.handle("get-asset-preview",async(e,i)=>{try{const{projectPath:r,assetPath:n}=i,f=z.isAbsolute(n)?n:z.join(r,n);if(!U.existsSync(f))return{success:!1,error:"Arquivo no encontrado"};const t=z.extname(f).toLowerCase();if([".png",".jpg",".jpeg",".gif",".bmp"].includes(t)){const l=U.readFileSync(f).toString("base64");return{success:!0,assetPath:n,preview:`data:${t===".png"?"image/png":"image/jpeg"};base64,${l}`}}return{success:!1,error:"Tipo no suportado"}}catch(r){return{success:!1,error:r.message}}}),ne.ipcMain.handle("get-palette-colors",async(e,i)=>{try{const{projectPath:r,assetPath:n}=i,f=z.isAbsolute(n)?n:z.join(r,n);if(!U.existsSync(f))return{success:!1,error:"No encontrado"};const t=z.extname(f).toLowerCase();let a=[];if(t===".pal"){const s=U.readFileSync(f,"utf-8").split(`
`);if(s.length>0&&s[0]&&s[0].trim().startsWith("JASC-PAL")){const d=parseInt(s[2]);for(let v=0;v<d&&3+v<s.length;v++){const h=s[3+v].trim().split(/\s+/);h.length>=3&&a.push({r:parseInt(h[0]),g:parseInt(h[1]),b:parseInt(h[2]),hex:`#${h.slice(0,3).map(o=>parseInt(o).toString(16).padStart(2,"0")).join("")}`.toUpperCase()})}}}return{success:!0,colors:a,assetPath:n}}catch(r){return{success:!1,error:r.message}}}),ne.ipcMain.on("get-asset-preview",(e,i)=>{try{const{projectPath:r,assetPath:n}=i,f=z.isAbsolute(n)?n:z.join(r,n);if(!U.existsSync(f))throw new Error("Arquivo no encontrado");const t=z.extname(f).toLowerCase();if([".png",".jpg",".jpeg",".gif",".bmp"].includes(t)){const l=U.readFileSync(f).toString("base64"),s=t===".png"?"image/png":"image/jpeg";e.reply("get-asset-preview-result",{success:!0,assetPath:n,preview:`data:${s};base64,${l}`})}else e.reply("get-asset-preview-result",{success:!1,assetPath:n,error:"Tipo de arquivo no suportado"})}catch(r){console.error("[IPC] Erro ao obter preview:",r),e.reply("get-asset-preview-result",{success:!1,assetPath:i.assetPath,error:r.message})}}),ne.ipcMain.on("rename-asset-file",(e,i)=>{try{const{projectPath:r,oldFileName:n,newName:f,oldPath:t}=i,a=Rr(r);let l=t?z.join(r,t):z.join(a,n);if(!U.existsSync(l)){const p=_=>{const w=[],c=U.readdirSync(_);for(const m of c){const S=z.join(_,m);U.statSync(S).isFile()?z.basename(S)===n&&w.push(S):w.push(...p(S))}return w},y=p(a);y.length>0&&(l=y[0])}if(!l||!U.existsSync(l)){e.reply("rename-asset-result",{success:!1,error:`Arquivo "${n}" no encontrado.`});return}const s=z.extname(l),d=f.includes(".")?f:f+s,v=z.join(z.dirname(l),d);if(U.existsSync(v)){e.reply("rename-asset-result",{success:!1,error:"J existe um arquivo com este nome"});return}U.renameSync(l,v);const h=p=>{let y=[];return U.readdirSync(p).forEach(w=>{w=z.join(p,w),U.statSync(w).isDirectory()?y=y.concat(h(w)):w.endsWith(".res")&&y.push(w)}),y};h(a).forEach(p=>{let y=U.readFileSync(p,"utf-8");y.includes(n)&&(y=y.split(n).join(d),U.writeFileSync(p,y))}),e.reply("rename-asset-result",{success:!0,oldFileName:n,newFileName:d,newPath:z.relative(r,v)})}catch(r){console.error("[IPC] Erro ao renomear arquivo:",r),e.reply("rename-asset-result",{success:!1,error:r.message})}}),ne.ipcMain.handle("find-definition-in-project",async(e,{projectPath:i,symbolName:r})=>{try{if(!i||!U.existsSync(i))return null;const n=z.join(i,"src");if(!U.existsSync(n))return null;const f=t=>{try{const a=U.readdirSync(t);for(const l of a)try{const s=z.join(t,l);if(U.statSync(s).isDirectory()){const v=f(s);if(v)return v}else if(l.endsWith(".c")||l.endsWith(".h")){const v=U.readFileSync(s,"utf-8"),o=new RegExp(`(?:^|\\n)\\s*(?:(?:static|inline|extern|volatile)\\s+)*(?:[\\w*]+\\s+)+${r}\\s*\\([^)]*\\)\\s*\\{`,"m").exec(v);if(o){const m=v.substring(0,o.index+o[0].indexOf(r)).split(`
`);return{path:s,line:m.length,column:m[m.length-1].length+1}}const y=new RegExp(`^\\s*#define\\s+${r}\\b`,"m").exec(v);if(y){const m=v.substring(0,y.index+y[0].indexOf(r)).split(`
`);return{path:s,line:m.length,column:m[m.length-1].length+1}}const w=new RegExp(`(?:^|\\n)\\s*(?:(?:static|extern|volatile|const)\\s+)*(?:[a-zA-Z_]\\w*\\*?\\s+)+${r}\\s*(?:[=;|,])`,"m").exec(v);if(w){const m=v.substring(0,w.index+w[0].indexOf(r)).split(`
`);return{path:s,line:m.length,column:m[m.length-1].length+1}}}}catch{continue}}catch{return null}return null};return f(n)}catch(n){return console.error("Error in find-definition-in-project:",n),null}})}function Oc(){ne.ipcMain.on("stop-game",e=>{if(ie.currentBuildProcess){try{process.kill(-ie.currentBuildProcess.pid,"SIGTERM")}catch{ie.currentBuildProcess&&ie.currentBuildProcess.kill()}ie.currentBuildProcess=null}if(ie.emulatorProcess){try{ie.emulatorProcess.kill()}catch(i){console.error("Erro ao matar emulador:",i)}ie.emulatorProcess=null}e.reply("emulator-closed",{code:0,interrupted:!0})}),ne.ipcMain.on("terminal-spawn",(e,{cwd:i})=>{if(ie.ptyProcess)try{ie.ptyProcess.kill()}catch(n){console.error("Erro ao encerrar PTY anterior:",n)}const r=process.platform==="win32"?"powershell.exe":process.env.SHELL||"bash";try{ie.ptyProcess=Qo.spawn(r,[],{name:"xterm-color",cols:80,rows:24,cwd:i||Jo.homedir(),env:process.env}),ie.ptyProcess.onData(n=>{ie.mainWindow&&ie.mainWindow.webContents.send("terminal-incoming-data",n)}),ie.ptyProcess.onExit(({exitCode:n})=>{ie.mainWindow&&ie.mainWindow.webContents.send("terminal-incoming-data",`\r
[Processo encerrado com cdigo ${n}]\r
`),ie.ptyProcess=null})}catch(n){console.error("Falha ao iniciar PTY:",n),e.reply("terminal-incoming-data",`\r
Erro ao iniciar terminal: ${n.message}\r
`)}}),ne.ipcMain.on("terminal-write",(e,i)=>{if(ie.emulatorProcess)try{ie.emulatorProcess.stdin.write(i)}catch(r){console.warn("Erro ao escrever no stdin do emulador:",r)}else ie.ptyProcess&&ie.ptyProcess.write(i)}),ne.ipcMain.on("terminal-resize",(e,{cols:i,rows:r})=>{if(ie.ptyProcess)try{ie.ptyProcess.resize(i,r)}catch(n){console.warn("Erro ao redimensionar terminal:",n)}})}const di={gen_sdl2:["toolkit","emulators","md","gen_sdl2"],blastem:["toolkit","emulators","blastem","blastem"],picodrive:["toolkit","emulators","PicoDrive","picodrive"]};function pi(e=null){const i=Zo(),r=z.resolve(__dirname,".."),n=process.resourcesPath,t=di[e||"gen_sdl2"]||di.gen_sdl2,a=z.join(fi,...t.slice(2)),l=[()=>a,()=>i&&z.join(i,...t),()=>i&&z.join(i,"src",...t),()=>n&&z.join(n,...t),()=>n&&z.join(n,"app.asar.unpacked",...t),()=>z.join(__dirname,...t),()=>z.join(r,"src",...t),()=>z.join(r,...t),()=>z.join(process.cwd(),...t),()=>z.join(process.cwd(),"src",...t)];for(const s of l){const d=s();if(d&&U.existsSync(d))return d}return null}function Tc(){const e={};for(const[i]of Object.entries(di)){const r=pi(i);r&&U.existsSync(r)&&(e[i]=r)}return e}function Ic(e){const i=[z.join(e,"out","rom.bin"),z.join(e,"rom.bin"),z.join(e,"out","out.bin"),z.join(e,"out.bin")];for(const t of i)if(t&&U.existsSync(t))return t;const r=[e,z.join(e,"out")];let n=null,f=0;return r.forEach(t=>{if(!t||!U.existsSync(t))return;U.readdirSync(t).forEach(l=>{if(!/\.(bin|32x)$/i.test(l))return;const s=z.join(t,l);try{const d=U.statSync(s);d.isFile()&&d.mtimeMs>=f&&(n=s,f=d.mtimeMs)}catch(d){console.warn("Falha ao inspecionar ROM candidate:",s,d)}})}),n}function Pc(){ne.ipcMain.on("get-available-emulators",e=>{try{const i=Tc();e.reply("available-emulators",{success:!0,emulators:Object.keys(i),paths:i})}catch(i){console.error("Error getting available emulators:",i),e.reply("available-emulators",{success:!1,error:i.message})}}),ne.ipcMain.on("get-emulator-config",e=>{const i=Gr("emulator-config.json",{selectedEmulator:"gen_sdl2"});e.reply("emulator-config",{success:!0,config:i})}),ne.ipcMain.on("set-emulator-config",(e,i)=>{const r=hi("emulator-config.json",i);e.reply("emulator-config-updated",{success:r})}),ne.ipcMain.on("get-custom-emulator-paths",e=>{const i=Gr("custom-emulator-paths.json",{gen_sdl2:"",blastem:""});e.reply("custom-emulator-paths",{success:!0,paths:i})}),ne.ipcMain.on("set-custom-emulator-paths",(e,i)=>{const r=hi("custom-emulator-paths.json",i);e.reply("custom-emulator-paths",{success:r,paths:i})}),ne.ipcMain.on("browse-emulator-path",async(e,{emulator:i})=>{try{const r=await ne.dialog.showOpenDialog(ie.mainWindow,{title:`Select ${i==="blastem"?"BlastEm":"Genesis SDL2"} Executable`,defaultPath:process.env.HOME,properties:["openFile"],filters:[{name:"Executable Files",extensions:["","exe","bin"]},{name:"All Files",extensions:["*"]}]});if(!r.canceled&&r.filePaths.length>0){const n=r.filePaths[0];e.reply("emulator-path-selected",{emulator:i,path:n,success:!0})}}catch(r){console.error("Error browsing for emulator path:",r),e.reply("emulator-path-selected",{emulator:i,success:!1,error:r.message})}})}function Dc(){ne.ipcMain.on("save-scene",(e,i)=>{try{const r=i.scene||i,n=i.projectPath||r.projectPath||r.path||__dirname,f=r.name||"scene",t=i.nodes||r.nodes||[];if(!n||n===__dirname){console.error("No valid project path available for saving scene"),e.reply("save-scene-result",{success:!1,error:"Caminho do projeto invlido"});return}const a=z.join(n,"scenes",`${f}.json`),l=z.dirname(a);U.existsSync(l)||U.mkdirSync(l,{recursive:!0});const s={...r,nodes:t,updatedAt:new Date().toISOString()};U.writeFile(a,JSON.stringify(s,null,2),"utf-8",d=>{if(d){console.error("Error saving scene file:",d),e.reply("save-scene-result",{success:!1,error:d.message});return}try{const v=ur(n);v.assets||(v.assets=[]);const h=`scene_${f}`;v.assets.some(p=>p.id===h||p.path===z.relative(n,a))||v.assets.push({id:h,name:f,type:"scene",path:z.relative(n,a),createdAt:new Date().toISOString()}),U.writeFileSync(z.join(n,"retro-studio.json"),JSON.stringify(v,null,2))}catch(v){console.error("Error updating retro-studio.json with scene:",v)}e.reply("save-scene-result",{success:!0,path:a})})}catch(r){console.error("Error in save-scene handler:",r),e.reply("save-scene-result",{success:!1,error:r.message})}}),ne.ipcMain.on("load-scene",(e,i)=>{try{if(!U.existsSync(i)){e.reply("load-scene-result",{success:!1,error:"Arquivo no encontrado"});return}const r=JSON.parse(U.readFileSync(i,"utf-8"));e.reply("load-scene-result",{success:!0,scene:r})}catch(r){console.error("Error loading scene:",r),e.reply("load-scene-result",{success:!1,error:r.message})}}),ne.ipcMain.on("export-scene",(e,i)=>{try{const r=i.projectPath||i.path||process.cwd();let n=i.code||`// Auto-generated scene code from Retro Studio
`;i.code||(n+=`// Scene: ${i.name}

`,n+=`#include <genesis.h>

`,i.nodes&&i.nodes.filter(a=>a.type==="sprite").forEach((a,l)=>{n+=`// Sprite: ${a.name}
`,n+=`Sprite sprite_${l};
`,n+=`sprite_${l}.x = ${a.x};
`,n+=`sprite_${l}.y = ${a.y};
`,n+=`sprite_${l}.width = ${a.width||16};
`,n+=`sprite_${l}.height = ${a.height||16};

`}));const f=z.join(r,"src",`scene_${i.name||"main"}.c`),t=z.dirname(f);U.existsSync(t)||U.mkdirSync(t,{recursive:!0}),U.writeFileSync(f,n,"utf-8"),e.reply("export-scene-result",{success:!0,path:f})}catch(r){console.error("Error in export-scene:",r),e.reply("export-scene-result",{success:!1,error:r.message})}})}function Nc(){ne.ipcMain.on("save-ui-settings",(e,i)=>{hi("ui-settings.json",i)}),ne.ipcMain.handle("get-ui-settings",async()=>{const e=Gr("ui-settings.json",{});if(!e.toolkitPath){const i=z.join(Wr,"marsdev","mars");U.existsSync(i)&&(e.toolkitPath=i)}return e}),ne.ipcMain.on("window-control",(e,i)=>{if(ie.mainWindow)switch(i){case"minimize":ie.mainWindow.minimize();break;case"maximize":ie.mainWindow.isMaximized()?ie.mainWindow.unmaximize():ie.mainWindow.maximize();break;case"close":ie.mainWindow.close();break}}),ne.ipcMain.on("select-folder",e=>{ne.dialog.showOpenDialog(ie.mainWindow,{properties:["openDirectory"]}).then(i=>{!i.canceled&&i.filePaths.length>0&&e.reply("folder-selected",{path:i.filePaths[0]})})}),ne.ipcMain.on("select-file",(e,i={})=>{ne.dialog.showOpenDialog(ie.mainWindow,{title:i.title||"Selecionar Arquivo",properties:["openFile"],filters:i.filters||[]}).then(r=>{!r.canceled&&r.filePaths.length>0&&e.reply("file-selected",{path:r.filePaths[0]})})}),ne.ipcMain.on("open-external-editor",(e,{editorPath:i,filePath:r})=>{if(!i||!r)return;const{spawn:n}=require("child_process");n(i,[r],{detached:!0,stdio:"ignore"}).unref()}),ne.ipcMain.on("open-external-url",(e,i)=>{i&&ne.shell.openExternal(i)})}const jc=[/^([^:]+):(\d+):(\d+):\s*(error|warning|note):\s*(.+)$/,/^([^:]+):(\d+):\s*(error|warning|note):\s*(.+)$/,/^(.+?):(\d+):\s*(.+)$/];function Lc(e){if(!e||typeof e!="string")return null;for(const i of jc){const r=e.match(i);if(r){const[,n,f,...t]=r;let a="error",l="",s=1;return t.length===3?(s=parseInt(t[0]),a=t[1].toLowerCase(),l=t[2]):t.length===2?(a=t[0].toLowerCase(),l=t[1]):l=t.join(":"),{file:n.trim(),line:parseInt(f),column:s,type:a,message:l.trim(),severity:a==="error"?"error":a==="warning"?"warning":"info"}}}return null}function Mc(e){if(!e)return[];const i=e.split(`
`),r=[],n=new Set;for(const f of i){const t=Lc(f);if(t){const a=`${t.file}:${t.line}:${t.message}`;n.has(a)||(r.push(t),n.add(a))}}return r}function Fc(){ne.ipcMain.on("run-game",(e,i)=>{const r=i.path,n=i.toolkitPath;if(ie.currentBuildProcess){try{process.kill(-ie.currentBuildProcess.pid,"SIGTERM")}catch{ie.currentBuildProcess.kill()}ie.currentBuildProcess=null}if(ie.emulatorProcess){try{ie.emulatorProcess.kill()}catch{}ie.emulatorProcess=null}let t=Gr("emulator-config.json",{selectedEmulator:"gen_sdl2"}).selectedEmulator||"gen_sdl2";if(!n||!U.existsSync(n)){e.reply("run-game-error",{message:"Toolkit path invlido."});return}if(!r||!U.existsSync(r)){e.reply("run-game-error",{message:"Projeto invlido."});return}const a=z.join(n,"dgen"),s=pi(t)||pi("gen_sdl2"),v=`${`MARSDEV="${n}"`} make`;ie.mainWindow&&ie.mainWindow.webContents.send("terminal-incoming-data",`\r
> Iniciando build: ${v}\r
`);let h="";ie.currentBuildProcess=ui.spawn("sh",["-c",`cd "${r}" && ${v}`],{detached:!0,cwd:r}),ie.currentBuildProcess.stdout.on("data",o=>{const p=o.toString();h+=p,ie.mainWindow&&ie.mainWindow.webContents.send("terminal-incoming-data",p.replace(/\n/g,`\r
`))}),ie.currentBuildProcess.stderr.on("data",o=>{const p=o.toString();h+=p,ie.mainWindow&&ie.mainWindow.webContents.send("terminal-incoming-data",p.replace(/\n/g,`\r
`))}),ie.currentBuildProcess.on("close",o=>{const p=ie.currentBuildProcess===null;if(ie.currentBuildProcess=null,p&&o!==0)return;const y=Mc(h);if(y.length>0&&e.reply("compilation-errors",{errors:y,output:h}),o!==0){e.reply("run-game-error",{message:`Build falhou com cdigo ${o}.`});return}const _=Ic(r);if(!_){e.reply("run-game-error",{message:"ROM no encontrada aps o build."});return}const w=s&&U.existsSync(s)?s:a;ie.mainWindow&&ie.mainWindow.webContents.send("terminal-incoming-data",`\r
> Executando: "${w}" "${_}"\r
`);try{ie.emulatorProcess=ui.spawn(w,[_],{cwd:r,stdio:["pipe","pipe","pipe"]}),ie.emulatorProcess.stdout.on("data",c=>{ie.mainWindow&&ie.mainWindow.webContents.send("terminal-incoming-data",c.toString().replace(/\n/g,`\r
`))}),ie.emulatorProcess.stderr.on("data",c=>{ie.mainWindow&&ie.mainWindow.webContents.send("terminal-incoming-data",c.toString().replace(/\n/g,`\r
`))}),ie.emulatorProcess.on("close",c=>{ie.emulatorProcess=null,e.reply("emulator-closed",{code:c})}),ie.emulatorProcess.on("error",c=>{ie.emulatorProcess=null,e.reply("run-game-error",{message:`Erro ao iniciar emulador: ${c.message}`})}),e.reply("run-game-build-complete",{romPath:_,emulator:w})}catch(c){e.reply("run-game-error",{message:`Falha ao disparar emulador: ${c.message}`})}})})}function qc(){ne.ipcMain.on("load-markdown-file",(e,i)=>{try{const{filePath:r}=i||{};if(!r){e.reply("load-markdown-file-result",{success:!1,error:"Caminho do arquivo no fornecido"});return}let n=r.startsWith("./")?r.substring(2):r;const f=[z.join(process.cwd(),"docs","content","SGDK.wiki",n),z.join(process.cwd(),"docs","tutorials",n),z.join(__dirname,"..","docs","content","SGDK.wiki",n),z.join(__dirname,"..","docs","tutorials",n),z.join(process.cwd(),n),r];let t=null;for(const h of f)if(U.existsSync(h)&&U.statSync(h).isFile()){t=h;break}if(!t){e.reply("load-markdown-file-result",{success:!1,error:`Arquivo no encontrado: ${r}`});return}const a=U.readFileSync(t,"utf-8"),l=/^---\n([\s\S]*?)\n---\n/,s=a.match(l);let d=z.basename(t,".md"),v=a;if(s){const o=s[1].match(/title:\s*(.+)/i);o&&(d=o[1].trim()),v=a.replace(l,"")}e.reply("load-markdown-file-result",{success:!0,content:v,title:d})}catch(r){console.error("[Help] Erro ao carregar arquivo Markdown:",r),e.reply("load-markdown-file-result",{success:!1,error:r.message})}}),ne.ipcMain.on("load-content-topics",async(e,i)=>{try{const{dirPath:r}=i||{};let n=r;if(!n){const t=[z.join(ne.app.getAppPath(),"docs","content"),z.join(__dirname,"..","..","docs","content"),z.join(__dirname,"..","docs","content"),z.join(process.cwd(),"docs","content")];for(const a of t)if(U.existsSync(a)){n=a;break}}if(!n||!U.existsSync(n)){e.reply("load-content-topics-result",{success:!0,topics:[]});return}const f=(t,a="")=>{const l=z.join(t,a),s=U.readdirSync(l),d=[];for(const v of s){const h=z.join(a,v),o=z.join(t,h);if(U.statSync(o).isDirectory()){const y=f(t,h);if(y.length>0){let _="",w=v.replace(/^\d+-/,"").replace(/-/g," "),c="fas fa-folder";const m=z.join(o,"index.md");if(U.existsSync(m)){const S=U.readFileSync(m,"utf-8"),g=/^---\n([\s\S]*?)\n---\n/,b=S.match(g);if(b){const O=b[1],k=O.match(/title:\s*(.+)/i);k&&(w=k[1].trim());const D=O.match(/icon:\s*(.+)/i);D&&(c=D[1].trim()),_=S.replace(g,"")}else _=S}d.push({id:`dir_${h.replace(/[\/\\]/g,"_")}`,title:w,icon:c,content:_,children:y.sort((S,g)=>S.id.localeCompare(g.id))})}}else if(v.endsWith(".md")&&v!=="index.md"){const y=U.readFileSync(o,"utf-8"),_=/^---\n([\s\S]*?)\n---\n/,w=y.match(_);let c={title:v.replace(".md","").replace(/^\d+-/,"").replace(/-/g," "),icon:"far fa-file-alt"},m=y;if(w){const S=w[1],g=S.match(/title:\s*(.+)/i),b=S.match(/icon:\s*(.+)/i);g&&(c.title=g[1].trim()),b&&(c.icon=b[1].trim()),m=y.replace(_,"")}d.push({id:`topic_${h.replace(/[\/\\]/g,"_")}`,title:c.title,icon:c.icon,content:m,children:[]})}}return d.sort((v,h)=>v.id.localeCompare(h.id))};e.reply("load-content-topics-result",{success:!0,topics:f(n)})}catch(r){console.error("[Content] Erro ao carregar:",r),e.reply("load-content-topics-result",{success:!1,error:r.message})}}),ne.ipcMain.on("load-tutorials",async(e,i)=>{try{const{dirPath:r}=i||{};let n=r;if(!n){const a=[z.join(ne.app.getAppPath(),"docs","tutorials"),z.join(__dirname,"..","..","docs","tutorials"),z.join(__dirname,"..","docs","tutorials"),z.join(process.cwd(),"docs","tutorials")];for(const l of a)if(U.existsSync(l)){n=l;break}}if(!n||!U.existsSync(n)){e.reply("load-tutorials-result",{success:!0,tutorials:[]});return}const f=U.readdirSync(n).filter(a=>a.endsWith(".md")),t=[];for(const a of f){const l=U.readFileSync(z.join(n,a),"utf-8"),s=/^---\n([\s\S]*?)\n---\n/,d=l.match(s);let v={title:a.replace(".md",""),description:"",tags:[]},h=l;if(d){const o=d[1],p=o.match(/title:\s*(.+)/i),y=o.match(/description:\s*(.+)/i),_=o.match(/tags:\s*\[([^\]]+)\]/i);p&&(v.title=p[1].trim()),y&&(v.description=y[1].trim()),_&&(v.tags=_[1].split(",").map(w=>w.trim().replace(/["']/g,"")).filter(w=>w)),h=l.replace(s,"")}t.push({id:`tutorial_${a.replace(".md","")}`,title:v.title,description:v.description,tags:v.tags,content:h})}e.reply("load-tutorials-result",{success:!0,tutorials:t})}catch(r){console.error("[Tutorials] Erro ao carregar:",r),e.reply("load-tutorials-result",{success:!1,error:r.message})}})}const ci=Zr.promisify(ui.exec),or=new Map;function Bc(){console.log("[Cartridge] Setting up IPC handlers..."),ne.ipcMain.handle("detect-cartridge-device",async()=>{console.log("[Cartridge] detect-cartridge-device called");try{console.log("[Cartridge] Running lsusb command...");const{stdout:i}=await ci("lsusb"),r=i.split(`
`);console.log("[Cartridge] lsusb output:",i);let n=null,f=null,t=null;for(const a of r)if(a.includes("2e8a:0009")&&a.includes("Raspberry Pi")){console.log("[Cartridge] Found Mark 1 device:",a);const l=a.match(/Bus (\d+) Device (\d+):/);l&&(t=`Bus ${l[1]} Device ${l[2]}`),n={vendor:"2e8a",product:"0009",manufacturer:"Raspberry Pi",name:"Pico",description:"Mark 1 Cartridge Programmer",bus:t};break}if(n){console.log("[Cartridge] Device found, looking for tty path...");try{console.log("[Cartridge] Checking dmesg for tty devices...");const{stdout:l}=await ci('dmesg | grep -E "ttyACM|ttyUSB" | tail -20'),s=l.split(`
`).reverse();console.log("[Cartridge] dmesg output:",l);for(const d of s)if(d.includes("ttyACM")||d.includes("ttyUSB")){const v=d.match(/(ttyACM\d+|ttyUSB\d+)/);if(v){f=`/dev/${v[1]}`,console.log("[Cartridge] Found device path:",f);break}}if(!f){console.log("[Cartridge] Checking common device paths...");const d=["/dev/ttyACM0","/dev/ttyACM1","/dev/ttyUSB0","/dev/ttyUSB1"];for(const v of d)if(U.existsSync(v)){f=v,console.log("[Cartridge] Found fallback device path:",f);break}}}catch(l){console.warn("[Cartridge] Could not determine tty device:",l.message)}const a={success:!0,device:n,devicePath:f,connected:!0,needsPermission:f&&U.existsSync(f)};return console.log("[Cartridge] Detection result:",a),a}return console.log("[Cartridge] No device found"),{success:!0,device:null,devicePath:null,connected:!1,message:"Mark 1 device not found. Please connect via USB."}}catch(i){return console.error("[Cartridge] Error detecting cartridge device:",i),{success:!1,error:i.message,connected:!1}}}),ne.ipcMain.handle("check-device-permissions",async()=>{console.log("[Cartridge] check-device-permissions called");try{const i="/dev/ttyACM0";if(console.log("[Cartridge] Checking permissions for:",i),!U.existsSync(i))return console.log("[Cartridge] Device does not exist:",i),{exists:!1,readable:!1,writable:!1,message:"Device not found at /dev/ttyACM0"};try{return U.accessSync(i,U.constants.R_OK|U.constants.W_OK),console.log("[Cartridge] Device permissions OK"),{exists:!0,readable:!0,writable:!0,message:"Device permissions OK"}}catch(r){return console.log("[Cartridge] Device permission denied:",r.message),{exists:!0,readable:!1,writable:!1,message:"Permission denied. Run: sudo chmod 777 /dev/ttyACM0"}}}catch(i){return console.error("[Cartridge] Error checking permissions:",i),{exists:!1,readable:!1,writable:!1,error:i.message}}});let e=null;ne.ipcMain.handle("start-device-polling",async i=>{console.log("[Cartridge] start-device-polling called");try{e&&(console.log("[Cartridge] Clearing existing polling interval"),clearInterval(e));let r=!1;return console.log("[Cartridge] Starting device polling every 2 seconds"),e=setInterval(async()=>{try{const f=(await ci('lsusb | grep "2e8a:0009"')).stdout.includes("2e8a:0009");f!==r&&(console.log("[Cartridge] Device state changed:",f),i.sender.send("device-state-changed",{connected:f,type:f?"connect":"disconnect",vendor:"2e8a",product:"0009",message:f?"Mark 1 connected":"Mark 1 disconnected"}),r=f)}catch{r&&(console.log("[Cartridge] Device disconnected"),i.sender.send("device-state-changed",{connected:!1,type:"disconnect",vendor:"2e8a",product:"0009",message:"Mark 1 disconnected"}),r=!1)}},2e3),console.log("[Cartridge] Device polling started successfully"),{success:!0,message:"Device polling started"}}catch(r){return console.error("[Cartridge] Error starting device polling:",r),{success:!1,error:r.message}}}),ne.ipcMain.handle("stop-device-polling",async()=>(console.log("[Cartridge] stop-device-polling called"),e&&(clearInterval(e),e=null,console.log("[Cartridge] Device polling stopped")),{success:!0,message:"Device polling stopped"})),ne.ipcMain.handle("read-file-buffer",async(i,r)=>{try{if(!U.existsSync(r))throw new Error(`File not found: ${r}`);const n=U.statSync(r),f=U.readFileSync(r);return{success:!0,buffer:f.buffer.slice(f.byteOffset,f.byteOffset+f.byteLength),size:n.size,path:r}}catch(n){return console.error("Error reading file for cartridge programming:",n),{success:!1,error:n.message}}}),ne.ipcMain.handle("get-current-rom-info",async i=>{try{const r=global.currentProjectPath||process.cwd(),n=[z.join(r,"out","game.bin"),z.join(r,"out","game.md"),z.join(r,"out","game.smd"),z.join(r,"game.bin"),z.join(r,"game.srm")];for(const f of n)if(U.existsSync(f)){const t=U.statSync(f);return{success:!0,path:f,size:t.size,name:z.basename(f)}}return{success:!1,error:"No compiled ROM found. Please build your project first."}}catch(r){return console.error("Error getting current ROM info:",r),{success:!1,error:r.message}}}),ne.ipcMain.handle("validate-rom-file",async(i,r)=>{try{if(!U.existsSync(r))throw new Error(`File not found: ${r}`);const n=U.statSync(r),f=U.readFileSync(r),t={isValid:!1,format:"unknown",warnings:[],errors:[]},a=n.size/1024;(a<8||a>4096)&&t.errors.push(`Invalid ROM size: ${a.toFixed(1)}KB (expected 8KB - 4MB)`),f.length>=256&&(f.toString("ascii",128,144).replace(/\0/g,"").includes("SEGA")?(t.isValid=!0,t.format="megadrive"):t.warnings.push("No SEGA header found - may not be a valid Mega Drive ROM"),f.toString("ascii",256,260)==="SEGA"&&(t.isValid=!0,t.format="megadrive"));const l=z.extname(r).toLowerCase();return[".bin",".md",".smd"].includes(l)&&(t.format=l===".bin"?"binary":l.substring(1).toUpperCase()),t.errors.length===0&&t.format!=="unknown"&&(t.isValid=!0),{success:!0,validation:t,size:n.size,path:r}}catch(n){return console.error("Error validating ROM file:",n),{success:!1,error:n.message}}}),ne.ipcMain.handle("get-cartridge-config",async i=>{try{return{success:!0,config:{vendorId:"0x2e8a",productId:"0x0009",baudRate:115200,chunkSize:1024,autoConnect:!1,swapEndianness:!0,supportedFormats:[".bin",".md",".smd"],deviceName:"Mark 1 Cartridge Programmer"}}}catch(r){return console.error("Error getting cartridge config:",r),{success:!1,error:r.message}}}),ne.ipcMain.handle("save-cartridge-config",async(i,r)=>{try{const f=["vendorId","productId","baudRate","chunkSize"].filter(t=>!(t in r));if(f.length>0)throw new Error(`Missing required config fields: ${f.join(", ")}`);if(typeof r.vendorId=="string"&&!r.vendorId.startsWith("0x"))throw new Error("Vendor ID must be in hex format (e.g., 0x2e8a)");if(typeof r.productId=="string"&&!r.productId.startsWith("0x"))throw new Error("Product ID must be in hex format (e.g., 0x0009)");if(r.baudRate<9600||r.baudRate>921600)throw new Error("Baud rate must be between 9600 and 921600");if(r.chunkSize<64||r.chunkSize>8192)throw new Error("Chunk size must be between 64 and 8192 bytes");return console.log("Cartridge configuration saved:",r),{success:!0,message:"Configuration saved successfully"}}catch(n){return console.error("Error saving cartridge config:",n),{success:!1,error:n.message}}}),ne.ipcMain.handle("connect-serial",async(i,r)=>{console.log("[Cartridge] connect-serial called for:",r);try{if(or.has(r)){const l=or.get(r);l.readStream&&l.readStream.destroy(),l.writeStream&&l.writeStream.destroy(),or.delete(r)}if(!U.existsSync(r))throw new Error(`Device not found: ${r}`);const n=U.createReadStream(r,{flags:"r",encoding:"utf8",fd:null,mode:438,autoClose:!0}),f=U.createWriteStream(r,{flags:"w",encoding:"utf8",fd:null,mode:438,autoClose:!0}),t={readStream:n,writeStream:f,devicePath:r};or.set(r,t),console.log("[Cartridge] Serial connection established:",r);let a="";return n.on("data",l=>{a+=l;const s=a.split(`
`);a=s.pop()||"";for(const d of s)d.trim()&&(console.log("[Cartridge] Serial data received:",d.trim()),i.sender.send("serial-data",{devicePath:r,data:d.trim(),timestamp:Date.now()}))}),n.on("error",l=>{console.error("[Cartridge] Serial read error:",l),i.sender.send("serial-error",{devicePath:r,error:l.message})}),f.on("error",l=>{console.error("[Cartridge] Serial write error:",l),i.sender.send("serial-error",{devicePath:r,error:l.message})}),{success:!0,message:`Connected to ${r}`,devicePath:r}}catch(n){return console.error("[Cartridge] Error connecting to serial port:",n),{success:!1,error:n.message}}}),ne.ipcMain.handle("disconnect-serial",async(i,r)=>{console.log("[Cartridge] disconnect-serial called for:",r);try{if(or.has(r)){const n=or.get(r);return n.readStream&&n.readStream.destroy(),n.writeStream&&n.writeStream.destroy(),or.delete(r),console.log("[Cartridge] Serial connection closed:",r),{success:!0,message:`Disconnected from ${r}`}}else return{success:!1,error:"No active connection found"}}catch(n){return console.error("[Cartridge] Error disconnecting serial port:",n),{success:!1,error:n.message}}}),ne.ipcMain.handle("write-serial",async(i,r,n)=>{console.log("[Cartridge] write-serial called for:",r),console.log("[Cartridge] Data type:",typeof n),console.log("[Cartridge] Data value:",n),console.log("[Cartridge] Data is null/undefined:",n==null),console.log("[Cartridge] Data is array:",Array.isArray(n)),console.log("[Cartridge] Data length:",n&&n.length);try{if(or.has(r)){const f=or.get(r);if(f.writeStream&&!f.writeStream.destroyed){let t=n;if(Array.isArray(n))t=Buffer.from(n),console.log("[Cartridge] Converted array to Buffer:",t);else if(n&&n.buffer&&n.byteLength)t=Buffer.from(n),console.log("[Cartridge] Converted Uint8Array to Buffer:",t);else if(typeof n=="string")t=n,console.log("[Cartridge] Using string data:",t);else if(n)console.log("[Cartridge] Unknown data type, attempting conversion"),t=Buffer.from(n.toString());else throw new Error("No data provided");return console.log("[Cartridge] Final write data:",t),console.log("[Cartridge] Final write data type:",typeof t),await new Promise((a,l)=>{f.writeStream.write(t,s=>{s?l(s):a()})}),console.log("[Cartridge] Data written to serial port successfully"),{success:!0,message:"Data written successfully"}}else return{success:!1,error:"Serial write stream is not available"}}else return{success:!1,error:"No active connection found"}}catch(f){return console.error("[Cartridge] Error writing to serial port:",f),{success:!1,error:f.message}}}),console.log("[IPC] Cartridge programming handlers registered")}const Ci=!ne.app.isPackaged;console.log("DEVELOPMENT --------> ",Ci);Ci&&(ne.app.commandLine.appendSwitch("remote-debugging-port","9222"),console.log("[Main] Remote debugging enabled on port 9222"));ne.protocol.registerSchemesAsPrivileged([{scheme:"app",privileges:{secure:!0,standard:!0}}]);ne.app.on("window-all-closed",()=>{if(ie.ptyProcess)try{ie.ptyProcess.kill()}catch(e){console.error("Erro ao encerrar PTY:",e)}process.platform!=="darwin"&&ne.app.quit()});ne.app.on("activate",()=>{ie.mainWindow===null&&Vo()});ne.app.on("ready",async()=>{console.log("[Main] App is ready. Initializing..."),Go(),ne.protocol.registerFileProtocol("app",(e,i)=>{let r=e.url.replace("app://./","");r=r.replace("app://","");const n=decodeURIComponent(r);try{let f=z.join(__dirname,n);if(U.existsSync(f))return i({path:f});if(f=z.join(__dirname,"..",n),U.existsSync(f))return i({path:f});const t=z.basename(n);if(f=z.join(__dirname,t),U.existsSync(f))return i({path:f});if(n.includes("fonts/")){const l=z.join(__dirname,"fonts",t);if(U.existsSync(l))return i({path:l})}const a=process.resourcesPath;if(a&&(f=z.join(a,n),U.existsSync(f)))return i({path:f});console.warn("[Protocol] File not found:",n),i({error:-6})}catch(f){console.error("Protocol error:",f),i({error:-2})}}),ne.protocol.registerFileProtocol("custom",(e,i)=>{const r=e.url.replace("custom://","");i({path:decodeURIComponent(r)})}),console.log("[Main] Initializing IPC handlers..."),Ec(),Ac(),Oc(),Pc(),Dc(),Nc(),Fc(),qc(),Bc(),console.log("[Main] All IPC handlers initialized"),bc(),Vo()});Ci&&(process.platform==="win32"?process.on("message",e=>{e==="graceful-exit"&&ne.app.quit()}):process.on("SIGTERM",()=>{ne.app.quit()}));
